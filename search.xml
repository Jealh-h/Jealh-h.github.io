<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>2021å¹´ç»ˆæ€»ç»“</title>
    <url>/2021/12/31/2021%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<blockquote>
<p>æ„Ÿæƒ³ï¼š æ—¶é—´è¿‡å¾—çœŸçš„å¾ˆå¿«ï¼Œè€Œéœ€è¦å­¦ä¹ çš„ä¸œè¥¿ä¸€ç›´åœ¨å˜å¤šï¼Œä»å¤§äºŒåˆ°å¤§ä¸‰çš„ï¼Œæ…¢æ…¢åœ°å°±è§‰å¾—è‡ªå·±æ¥è§¦çš„é¢†åŸŸæ‰€æ¸ºå°ã€‚è€Œè¿™ä¸€å¹´é‡Œæ„Ÿå—æœ€æ·±çš„æ€»è¿˜æ˜¯æ—¶é—´ä¸å¤Ÿçš„æ ·å­ã€‚</p>
</blockquote>
<hr>
<span id="more"></span>

<h3 id="å­¦ä¹ "><a href="#å­¦ä¹ " class="headerlink" title="å­¦ä¹ "></a>å­¦ä¹ </h3><p>åœ¨å­¦ä¹ ä¸Šï¼Œå°½ç®¡ä¸æ˜¯æ‰€æœ‰è¯¾ç¨‹å®‰æ’å¾—å¾ˆå¦¥å½“ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›è¯¾ç¨‹è®©æˆ‘å—ç›Šè‰¯å¤šã€‚è®°å¿†æ¯”è¾ƒæ·±åˆ»å¾—è¿˜æ˜¯æš‘å‡å‰çš„ flutter è¯¾ç¨‹å§ã€‚é‚£ä¸€æ¬¡é¢ä¸´å¾—æŒ‘æˆ˜æ˜¯æœªçŸ¥ã€è¯¾ç¨‹æ—¶é—´çŸ­ã€‚è€Œæœ€ç»ˆçš„ä»»åŠ¡æ˜¯ä½¿ç”¨ flutter å®Œæˆä¸€ä¸ª APPã€‚è€Œæˆ‘åšçš„å°±æ˜¯ä¸€ä¸ªè®°ç¬”è®°çš„ APP äº†<a href="https://github.com/Jealh-h/lightNote">(https://github.com/Jealh-h/lightNote)</a>ï¼Œå°½ç®¡åŠŸèƒ½ä¸æ˜¯é‚£ä¹ˆå®Œå–„ï¼Œä½†è¿™æ¬¡è®©æˆ‘ä½“éªŒåˆ°äº†å…¨æ ˆå¼€å‘çš„ä¸€äº›å›°éš¾å§ï¼Œå¾—ç›Šäº eggjs æ¡†æ¶èƒ½è®©æˆ‘ä¸€ä¸ªä¸å¤ªæ‡‚åç«¯çš„è½»æ¾ä¸€ç‚¹â€¦â€¦.ã€‚æ•°æ®åˆ†æè¿™é—¨è¯¾ä¹ŸæŒºå¥½çš„ï¼Œè‡³å°‘è®©æˆ‘åœ¨æœºå™¨å­¦ä¹ æ–¹é¢èƒ½å¤Ÿè°ƒåº“äº†ï¼Œèƒ½è®­ç»ƒæ¨¡å‹äº†ã€‚ç‰¹åˆ«æ˜¯åœ¨æœ€åçš„æˆ¿ä»·é¢„æµ‹çš„é¡¹ç›®ä¸Šï¼Œä»æ•°æ®è·å–åˆ°æ•°æ®åˆ†æå†åˆ°æ¨¡å‹é¢„æµ‹ï¼Œè¿™ä¸€å¥—ä¸‹æ¥è®©æˆ‘è§‰å¾— python æ›´åŠ å¼ºå¤§äº†ã€‚å…¶æ¬¡å°±æ˜¯æ•°æ®å¯è§†åŒ–äº†ï¼Œè™½ç„¶è¯´ç†è®ºè¯¾ç€å®æœ‰ä¸€ç‚¹æ— èŠï¼Œå¥½åœ¨å®éªŒè¯¾è¿˜æ¯”è¾ƒæœ‰è¶£ï¼Œè¿™æ¬¡è®©æˆ‘ä½“éªŒäº†ä¸€æŠŠ d3js,ç»™æˆ‘çš„æ„Ÿè§‰å°±æ˜¯ jquery çš„ä¸€ä¸ªå…„å¼Ÿä¸€æ ·ï¼Œåªä¸è¿‡æ›´åŠ é€‚åˆäºç»˜åˆ¶å›¾å½¢ã€‚æœ€åè¯´è¯´ç¼–è¯‘åŸç†å§ï¼Œè¿™é—¨è¯¾å°±æ„Ÿè§‰æ¯”è¾ƒç¥å¥‡å§ï¼Ÿï¼ä»è¯æ³•åˆ†æåˆ°è¯­æ³•åˆ†æï¼Œå†åˆ°è¯­ä¹‰åˆ†æç­‰ç­‰ã€‚éƒ½æ„Ÿè§‰æœ‰å¾ˆå¼ºçš„ç†è®ºæ”¯æ’‘ã€‚å•å°±å¯¹äºç»™å®šçš„ test æ¥è¯´ï¼Œåšä¸€ä¸ªè¯æ³•åˆ†æã€è¯­æ³•åˆ†æçš„å·¥ä½œé‡å°±æŒºå¤§çš„ï¼ˆæ±‚ NFAã€DFA,æ”¹å†™ LL(1)æ–‡æ³•ç­‰ç­‰ï¼‰ï¼Œå¯è§å“ªäº›è¯­è¨€ä¹‹çˆ¶æ˜¯æœ‰å¤š ğŸ‚ äº†ã€‚</p>
<h3 id="ç”Ÿæ´»"><a href="#ç”Ÿæ´»" class="headerlink" title="ç”Ÿæ´»"></a>ç”Ÿæ´»</h3><p>åœ¨è¿™ä¸€å¹´é‡Œä¾ç„¶é‚£ä¹ˆå–œæ¬¢é€› bi ç«™,å–œæ¬¢å¬éŸ³ä¹ã€‚å°è±¡æœ€æ·±çš„è¿˜æ˜¯ã€ŠåŒåŸä¹‹æˆ˜ã€‹äº†,ä¸€æ–¹é¢æ˜¯æˆ‘å–œæ¬¢çš„ç”»é£ï¼Œä½†æ˜¯å‘¢è¿™å‰§æƒ…ç¡®å®æœ‰ç‚¹è™äº†,è¿™å¤§æ¦‚å°±æ˜¯è§’è‰²è®¾å®šå§ã€‚<br><strong>qq éŸ³ä¹å¹´åº¦æŠ¥å‘Š</strong><br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/qqmusic_2021.PNG" alt="qqéŸ³ä¹"></p>
<p><strong>bilibili å¹´åº¦æŠ¥å‘Š</strong><br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/bilibili_2021.PNG" alt="bilibili"></p>
<h3 id="æŠ€æœ¯æ ˆ"><a href="#æŠ€æœ¯æ ˆ" class="headerlink" title="æŠ€æœ¯æ ˆ"></a>æŠ€æœ¯æ ˆ</h3><p>åœ¨æŠ€æœ¯æ ˆä¸Šï¼Œå¯¹äº react çš„ä½¿ç”¨æ›´åŠ ç†Ÿæ‚‰äº†ï¼Œå°½ç®¡è‡ªå·±æƒ³ç”¨ vue å†™ä¸€ä¸ªä¸ªäººåšå®¢ï¼Œä½†å†™åˆ°ä¸€åŠè¿˜æ˜¯æ”¾å¼ƒäº†ï¼ˆå¯èƒ½é‚£æ—¶å€™è¿˜ä¸çŸ¥é“ä¸€äº›å¼ºå¤§çš„ nodejs æ¡†æ¶å§ï¼‰ã€‚æ‰€ä»¥è¿˜æ˜¯ hexo é¦™å•Šï¼Œå°±è¿™æ ·å‘ç°äº†å†™åšå®¢æ˜¯ä¸€ä»¶å¼ºåŒ–è®°å¿†çš„äº‹æƒ…ã€‚åœ¨è¿™ä¸€å¹´é‡Œï¼Œè™½ç„¶åœ¨çŸ¥è¯†å¹¿åº¦ä¸Šæœ‰äº†æå‡ï¼Œä½†åœ¨æ·±åº¦ä¸Šæ„Ÿè§‰è¿˜å­¦æå‡ã€‚æ¯”è¾ƒçº ç»“çš„è¿˜æ˜¯å¯¹äºä¸€äº›å·¥å…·ä¸çŸ¥åˆ°æ˜¯è¦ä¼šåˆ°ä»€ä¹ˆå±‚åº¦å§ï¼Œæ¯”å¦‚ webpack,vite æ˜¯ä¼šæŒ‰ç…§å®˜æ–¹æ–‡æ¡£é…ç½®ï¼Œè¿˜æ˜¯èƒ½ç†Ÿç»ƒåœ°å†™å‡ºæ¥ã€‚æš‘æœŸåœ¨å®éªŒå®¤æœŸé—´ï¼ŒæŠŠåŸæœ‰çš„ oj3 ç”± webpack æ„å»ºæ”¹æˆäº† vite,åªèƒ½è¯´ vite çœŸå¿«ã€‚ä½¿ç”¨ react é‡å†™äº†ä¸€ä¸ªä¼šè®®å®¤ç®¡ç†ç³»ç»Ÿç«¯ã€‚è€Œå¯¹äºå¾®ä¿¡å°ç¨‹åºé‚£è¾¹ï¼Œè™½ç„¶æ²¡æœ‰è·å¾—å¥–ï¼Œä½†ä¹Ÿæ”¶è·äº†ä¸€äº›å¼€å‘ç»éªŒå§ã€‚è€Œå¯¹äºä¸€äº›å…¶ä»–çŸ¥è¯†ï¼Œæ¯”å¦‚ rustã€electronã€wasmã€ä»¥åŠæ¸¸æˆå¼€å‘éƒ½æ˜¯å¾ˆæƒ³å­¦çš„ï¼Œä½†éƒ½ä¼šæ„Ÿè§‰è‡ªç”±çš„æ—¶é—´å¤ªå°‘ï¼Œè€Œå­¦ä¹ åˆéœ€è¦è€—è´¹å¤§é‡æ—¶é—´ã€‚æ‰€ä»¥è¿˜éœ€è¦æ§åˆ¶è‡ªå·±ã€è®©è‡ªå·±çæƒœæ—¶é—´å•Šã€‚</p>
<h3 id="æœŸæœ›"><a href="#æœŸæœ›" class="headerlink" title="æœŸæœ›"></a>æœŸæœ›</h3><p>å¸Œæœ›è‡ªå·±è®°å¿†åŠ›å¥½ä¸€ç‚¹ã€‚<br>æ¯ä¸€å¤©éƒ½è¦å´­æ–°çš„ä¸€ç‚¹ã€‚<br>å¯¹æ¸´æœ›çš„äº‹æƒ…æ‰§ç€ä¸€ç‚¹ã€‚<br>è®©è‡ªå·±çš„æƒ³æ³•ä¸°å¯Œä¸€ç‚¹ã€‚</p>
<p><strong>å°±ä¸Šé¢é‚£ä¹ˆäº¿ç‚¹å°±å¤Ÿäº†</strong></p>
]]></content>
      <categories>
        <category>å¹´ç»ˆæ€»ç»“</category>
      </categories>
  </entry>
  <entry>
    <title>Scroll å¼€å‘å°è®°</title>
    <url>/2022/09/11/Scroll-%E5%BC%80%E5%8F%91%E5%B0%8F%E8%AE%B0/</url>
    <content><![CDATA[<blockquote>
<p>èƒŒæ™¯ï¼šä¸€æ¬¡å·¦æ»‘åŠ è½½æ›´å¤šçš„çš„äº¤äº’å¼€å‘</p>
</blockquote>
<h2 id="å¡«å‘å¼€å§‹"><a href="#å¡«å‘å¼€å§‹" class="headerlink" title="å¡«å‘å¼€å§‹"></a>å¡«å‘å¼€å§‹</h2><p>åœ¨æœ€å¼€å§‹æ—¶ï¼Œæˆ‘å¾—åˆ°äº†ä¸€ä¸ªæç¤ºï¼Œå·¦æ»‘åŠ è½½æ›´å¤šç±»ä¼¼ä¸‹æ‹‰åˆ·æ–°ã€‚æƒ³äº†æƒ³ï¼Œå¥½å®¶ä¼™ï¼Œä¸å°±æ˜¯æŠŠä¸‹æ‹‰åˆ·æ–°æ¨ªè¿‡æ¥å˜›ï¼Œç¢°å·§ä¸‹æ‹‰åˆ·æ–°è¿˜æ˜¯å‰å‡ å¤©æ–°å¢çš„ä¸€ä¸ªç»„ä»¶ï¼Œè¿™å›å¯ä»¥å€Ÿé‰´å€Ÿé‰´äº† ğŸ˜ã€‚OK å¼€å¹²ï¼</p>
<span id="more"></span>

<h2 id="ä¸‹æ‹‰åˆ·æ–°ç»„ä»¶çš„è®¾è®¡"><a href="#ä¸‹æ‹‰åˆ·æ–°ç»„ä»¶çš„è®¾è®¡" class="headerlink" title="ä¸‹æ‹‰åˆ·æ–°ç»„ä»¶çš„è®¾è®¡"></a>ä¸‹æ‹‰åˆ·æ–°ç»„ä»¶çš„è®¾è®¡</h2><p>åœ¨æŸ¥çœ‹ç»„ä»¶çš„æºç åï¼Œå‘ç°ä¸‹æ‹‰åˆ·æ–°ç»„ä»¶çš„è®¾è®¡å…¶å®æ¯”è¾ƒç®€å•ã€‚è¿™é‡Œä½¿ç”¨äº† @use-gesture/react ç”¨åœ¨æ‰‹åŠ¿ä¸Šçš„ç»‘å®šï¼Œreact-spring ç”¨ä½œåŠ¨ç”»çš„å®ç°ã€‚ä¸‹é¢å°±ç®€å•ä»‹ç»ä¸‹å…¶è®¾è®¡æ€è·¯ã€‚</p>
<p>é¦–å…ˆæŠ›å‡ºå‡ ä¸ªé—®é¢˜</p>
<ul>
<li>ä»€ä¹ˆæ—¶å€™è§¦å‘åˆ·æ–° æˆ–è€…ä»€ä¹ˆæ—¶å€™è°ƒç”¨æ‰‹åŠ¿ï¼Ÿ</li>
<li>scroll å®¹å™¨æ»šåŠ¨æ—¶ä¸æ‰‹åŠ¿å†²çªã€‚</li>
<li>ä¸‹æ‹‰çš„é˜ˆå€¼ã€å›å¼¹åŠ¨ç”»</li>
</ul>
<ol>
<li><p>ä¸‹æ‹‰åˆ·æ–°ç»„ä»¶åœ¨è®¾è®¡æ—¶ï¼Œé‡‡ç”¨çš„æ˜¯æµè§ˆå™¨åŸç”Ÿæ»šåŠ¨åŠ ä¸Šè‡ªå®šä¹‰ç”¨æˆ·æ‰‹åŠ¿äº‹ä»¶ã€‚è¿™æ ·æˆ‘ä»¬å¾ˆå®¹æ˜“åˆ¤æ–­ä»€ä¹ˆæ—¶å€™è§¦å‘æ‰‹åŠ¿äº‹ä»¶äº†ã€‚å…¶ç­”æ¡ˆæ˜¯ï¼šåˆ¤æ–­ dom èŠ‚ç‚¹çš„ scrollTopï¼Œå½“ scrollTop ä¸º 0 æ—¶ï¼Œè¯´æ˜å·²ç»åˆ°é¡¶äº†ï¼Œç„¶ååœ¨å¾€ä¸‹æ‹‰æ—¶ï¼Œå°±å¼€å§‹è§¦å‘æ‰‹åŠ¿ï¼Œå½“æ‰‹åŠ¿ä¸‹æ‹‰çš„è·ç¦»è¶…è¿‡æŸä¸ªé˜ˆå€¼æ—¶ï¼Œå³å˜ä¸ºäº†å¯åˆ·æ–°çš„çŠ¶æ€ï¼Œæ¾æ‰‹åï¼Œç›´æ¥è§¦å‘ä¸‹æ‹‰å›è°ƒã€‚</p>
</li>
<li><p>ä»é—®é¢˜ 1 çš„ç­”æ¡ˆæˆ‘ä»¬å°±å¯ä»¥å¾ˆåˆç†åœ°è§„é¿åŸç”Ÿæ»šåŠ¨ä¸æ‰‹åŠ¿ä¸‹æ‹‰çš„å†²çªï¼ŒåŠ scrollTop ä¸ä¸º 0 æ—¶ï¼Œä¸ä¼šè§¦å‘æ‰‹åŠ¿äº‹ä»¶ã€‚</p>
</li>
<li><p>é€šè¿‡ use-gesture/react ä¸­çš„ rubberbandIfOutOfBounds å‡½æ•°åˆ›å»ºä¸€ä¸ªå¼¹ç°§æ•ˆæœï¼Œå›å¼¹åŠ¨ç”»å‘¢ï¼Œè¿™ä¸ªç»„ä»¶é‡‡ç”¨çš„æ˜¯è®¾ç½® loading çš„ height æ¥å®ç°ï¼Œè™½ç„¶å¯ä»¥ï¼Œä½†æˆ‘ç†è§£è¿™ç§åŠ¨æ€é«˜åº¦ä¸æ˜¯å¤ªé€‚åˆè¿™ç§æ»šåŠ¨åœºæ™¯ã€‚å› æ­¤åé¢ç»è¿‡å„ç§å®éªŒï¼ˆè¸©å‘ï¼‰åï¼Œä¸¢å¼ƒäº†è¿™ç§æ”¹å˜é«˜åº¦ï¼ˆå®½åº¦ï¼‰çš„æ–¹å¼å±•ç¤º loadingã€‚</p>
</li>
</ol>
<blockquote>
<p>å¤§æ¦‚çš„ä¸€ä¸ªæ¡†æ¶å›¾</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/2022-09-01%2018.42.03.png" alt="img_1"></p>
<h2 id="æ¨ªæ»‘å®è·µ"><a href="#æ¨ªæ»‘å®è·µ" class="headerlink" title="æ¨ªæ»‘å®è·µ"></a>æ¨ªæ»‘å®è·µ</h2><p>æ¨ªæ»‘å¤šç®€å•å‘¢ï¼ŒæŠŠç«–ç€çš„æ¨ªè¿‡æ¥å°±æ˜¯äº† ğŸ˜Šã€‚å“ˆå“ˆï¼Œç¡®å®æ˜¯è¿™æ ·çš„ã€‚</p>
<h3 id="Version-1"><a href="#Version-1" class="headerlink" title="Version 1"></a>Version 1</h3><p>åŸºæœ¬å¥—è·¯ï¼š</p>
<ul>
<li>overflowï¼šhidden</li>
<li>transformï¼štranslate3d<br>åŸºäºä»¥ä¸Šå¥—è·¯ï¼Œç¬¬ä¸€ç‰ˆæ²¡æœ‰é‡‡ç”¨æµè§ˆå™¨çš„åŸç”Ÿæ»šåŠ¨ï¼Œç„¶åå…¨ç¨‹è§¦å‘æ‰‹åŠ¿äº‹ä»¶ï¼Œé€šè¿‡æ‰‹åŠ¿äº‹ä»¶æ§åˆ¶ react-spring çš„åŠ¨ç”»å‚æ•°ï¼Œå®ç°æ¨¡æ‹Ÿæ»šåŠ¨ã€‚æ˜¾ç„¶ï¼Œæ¨¡æ‹Ÿæ»šåŠ¨çš„æ•ˆæœä¸æ˜¯å¤ªå¥½ï¼Œå…¶åŸå› åœ¨äºæ»šåŠ¨é€Ÿç‡å˜åŒ–ã€æ»šåŠ¨æƒ¯æ€§ç­‰æ¯”è¾ƒéš¾æ§åˆ¶ï¼ˆå®é™…åŸå› ï¼šğŸ¥¬ ğŸ¶ï¼‰ã€‚<br>ä¸‹é¢æ¥çœ‹ä¸€ä¸‹åˆç‰ˆæ•ˆæœ:</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/Sep-01-2022%2019-11-16.gif" alt="img_2"></p>
<p>ç›®æµ‹æ•ˆæœè¿˜è¡Œï¼Œä½†æ˜¯åœ¨çœŸæœºè°ƒè¯•ä¸Šå°±æ¯”è¾ƒæ‹‰èƒ¯äº†ï¼Œåœ¨çœŸæœºä¸Šï¼Œå®é™…ç§»åŠ¨çš„è·ç¦»æ˜¯æ‰‹æŒ‡ä¸€åŠ¨çš„è·ç¦»ï¼Œæ‰€ä»¥æ˜¯éå¸¸çš„æ…¢å¹¶ä¸”æ¯ä¸€æ¬¡æ»šåŠ¨çš„è·ç¦»ã€é€Ÿåº¦è¿™äº›æ¯”è¾ƒå—é™ã€‚</p>
<h3 id="Version-2"><a href="#Version-2" class="headerlink" title="Version 2"></a>Version 2</h3><p>å‚è€ƒ picker ç»„ä»¶ï¼Œåšä¸€ä¸ªæ»šåŠ¨æƒ¯æ€§ã€‚è¿™ç§æ»šåŠ¨å¯¹åº”çš„æ˜¯æ¯ä¸€æ¬¡ç§»åŠ¨ï¼Œç»ˆç‚¹ä½ç½®éƒ½æ˜¯ä¸€ä¸ªæ•´æ•°ä½ç½®ï¼ˆæœ€ç»ˆç§»åŠ¨åæ ‡æ˜¯ï¼š index * itemWidth æˆ–è€… itemHeightï¼‰ã€‚</p>
<h3 id="Version-3"><a href="#Version-3" class="headerlink" title="Version 3"></a>Version 3</h3><p>æ€è·¯ï¼šåŸç”Ÿæ»šåŠ¨ç»“åˆæ‰‹åŠ¿ï¼Œè¿™æ¬¾è®¾è®¡æ¯”è¾ƒåˆç†ï¼ŒåŸç”Ÿæ»šåŠ¨æ”¹å–„äº†é€Ÿåº¦é—®é¢˜ï¼Œæ¨ªå‘é•¿åˆ—è¡¨åœ¨æ»šåŠ¨æ—¶ï¼Œåªæœ‰åˆ°æ»šåŠ¨åˆ°æœ€å³è¾¹æ—¶æ‰è§¦å‘æ•´ä½“å®¹å™¨çš„ç§»åŠ¨ï¼Œç„¶åéœ²å‡º loadã€‚<br>æ³¨æ„ï¼šåŸç”Ÿæ»šåŠ¨é‡‡ç”¨ overflowï¼šautoã€‚åœ¨æ»šåŠ¨åˆ°æœ€å³è¾¹æ—¶ï¼Œè§¦å‘æ‰‹åŠ¿ï¼Œéœ€è¦è®¾ç½® overflowï¼šhiddenï¼Œä¸ç„¶å°±ä¼šå‘ç”Ÿæ»šåŠ¨é‡å ï¼ˆåŸç”Ÿçš„åœ¨æ»šåŠ¨ã€æ‰‹åŠ¿ä¹Ÿåœ¨ç§»åŠ¨ï¼‰ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/2022-09-02%2020.17.02.png" alt="img_3"></p>
<p>çœ‹ä¼¼å¯ç”¨äº†ï¼Œç„¶è€Œ ios æœ‰ä¸ªå‘ç‚¹ï¼ŒåŸç”Ÿæ»šåŠ¨å…·æœ‰æƒ¯æ€§å›å¼¹ï¼Œæ‰€ä»¥ï¼Œå½“ä½ æ‹‡æŒ‡å¿«é€Ÿå·¦æ»‘æ—¶ï¼Œä¼šå‡ºç°ä¸€ä¸ªæ»šåŠ¨å›å¼¹ã€‚è¿™ä¸ªå›å¼¹ä¸ä¼šå°† load éœ²å‡ºæ¥ï¼Œåè€Œéœ²å‡ºçš„æ˜¯ä¸€ä¸ªç™½åº•ã€‚</p>
<h2 id="èƒ½ç”¨å¾…æ”¹å–„"><a href="#èƒ½ç”¨å¾…æ”¹å–„" class="headerlink" title="èƒ½ç”¨å¾…æ”¹å–„"></a>èƒ½ç”¨å¾…æ”¹å–„</h2><p>å¦‚æ ‡é¢˜æ‰€è¯´ï¼Œæœ€ç»ˆç‰ˆåªæ˜¯ä¸€ä¸ªèƒ½ç”¨çš„ç‰ˆæœ¬ã€‚å„ç§åŸå› ï¼Œé€‰æ‹©å°† load æ”¾åœ¨äº†åŸç”Ÿ scroll é‡Œé¢äº†ï¼ˆé‡Œå¤–å·®åˆ«ä¸å¤§ ğŸ˜…ï¼‰ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/Sep-02-2022%2021-05-15.gif" alt="img_3"></p>
<p>å¾…ä¼˜åŒ–çš„ç‚¹</p>
<ul>
<li>åŸç”Ÿæ»šåŠ¨ä¸èƒ½æœ‰å›å¼¹æ•ˆæœï¼Œå¦‚æœéœ€è¦å¢åŠ å›å¼¹æ•ˆæœï¼Œéœ€è¦æ‰‹åŠ¨æ¨¡æ‹Ÿæ»šåŠ¨ï¼Œç„¶åå†æ·»åŠ å›å¼¹ã€‚(iosç‰¹å®šçš„è¾¹ç•Œå¼¹ç°§æ•ˆæœä¸èƒ½ç¦æ­¢)</li>
<li>è¾¹ç•Œ drag ä¸æµç•…ï¼Œæœ‰å¾…æ”¹è¿›ã€‚</li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>ä½¿ç”¨github actionsè¿›è¡Œè½»æœåŠ¡çš„é¡µé¢éƒ¨ç½²</title>
    <url>/2021/10/22/actions%E8%BF%9B%E8%A1%8C%E8%BD%BB%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%A1%B5%E9%9D%A2%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[<h1 id="ä½¿ç”¨-github-actions-è¿›è¡Œè½»æœåŠ¡çš„é¡µé¢æ‰˜ç®¡"><a href="#ä½¿ç”¨-github-actions-è¿›è¡Œè½»æœåŠ¡çš„é¡µé¢æ‰˜ç®¡" class="headerlink" title="ä½¿ç”¨ github actions è¿›è¡Œè½»æœåŠ¡çš„é¡µé¢æ‰˜ç®¡"></a>ä½¿ç”¨ github actions è¿›è¡Œ<a href="https://qingfuwu.cn/">è½»æœåŠ¡</a>çš„é¡µé¢æ‰˜ç®¡</h1><h3 id="é¦–å…ˆï¼Œè½»æœåŠ¡å®˜æ–¹æ–‡æ¡£ç»™å‡ºäº†æ‰‹åŠ¨éƒ¨ç½²é¡µé¢çš„æ•™ç¨‹é¡µé¢æ‰˜ç®¡ã€‚è€Œæˆ‘è¿™é‡Œå°±ç®€å•åœ°ä»‹ç»ä¸€ä¸‹ä½¿ç”¨-github-actions-çš„è‡ªåŠ¨éƒ¨ç½²ã€‚åªè¦ä¼šä¸€ç‚¹-github-actions-å®ç°èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ã€‚"><a href="#é¦–å…ˆï¼Œè½»æœåŠ¡å®˜æ–¹æ–‡æ¡£ç»™å‡ºäº†æ‰‹åŠ¨éƒ¨ç½²é¡µé¢çš„æ•™ç¨‹é¡µé¢æ‰˜ç®¡ã€‚è€Œæˆ‘è¿™é‡Œå°±ç®€å•åœ°ä»‹ç»ä¸€ä¸‹ä½¿ç”¨-github-actions-çš„è‡ªåŠ¨éƒ¨ç½²ã€‚åªè¦ä¼šä¸€ç‚¹-github-actions-å®ç°èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ã€‚" class="headerlink" title="é¦–å…ˆï¼Œè½»æœåŠ¡å®˜æ–¹æ–‡æ¡£ç»™å‡ºäº†æ‰‹åŠ¨éƒ¨ç½²é¡µé¢çš„æ•™ç¨‹é¡µé¢æ‰˜ç®¡ã€‚è€Œæˆ‘è¿™é‡Œå°±ç®€å•åœ°ä»‹ç»ä¸€ä¸‹ä½¿ç”¨ github actions çš„è‡ªåŠ¨éƒ¨ç½²ã€‚åªè¦ä¼šä¸€ç‚¹ github actions,å®ç°èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ã€‚"></a>é¦–å…ˆï¼Œè½»æœåŠ¡å®˜æ–¹æ–‡æ¡£ç»™å‡ºäº†æ‰‹åŠ¨éƒ¨ç½²é¡µé¢çš„æ•™ç¨‹<a href="https://qingfuwu.cn/docs/openapi/sdk/hosting.html#%E8%8E%B7%E5%8F%96%E9%A1%B5%E9%9D%A2%E6%89%98%E7%AE%A1%E4%BF%A1%E6%81%AF">é¡µé¢æ‰˜ç®¡</a>ã€‚è€Œæˆ‘è¿™é‡Œå°±ç®€å•åœ°ä»‹ç»ä¸€ä¸‹ä½¿ç”¨ github actions çš„è‡ªåŠ¨éƒ¨ç½²ã€‚åªè¦ä¼šä¸€ç‚¹ github actions,å®ç°èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ã€‚</h3><p><a href="https://qcjtoy.web.cloudendpoint.cn/">çœ‹çœ‹æ•ˆæœ</a></p>
<h3 id="1-github-åˆ›å»ºä»“åº“ï¼Œé…ç½®-github-workflow-yml-åŒæ—¶è®¾ç½®-secrets-å˜é‡-ACCESS-TOKEN-ä¸-SERVICE-ID"><a href="#1-github-åˆ›å»ºä»“åº“ï¼Œé…ç½®-github-workflow-yml-åŒæ—¶è®¾ç½®-secrets-å˜é‡-ACCESS-TOKEN-ä¸-SERVICE-ID" class="headerlink" title="1.github åˆ›å»ºä»“åº“ï¼Œé…ç½®.github/workflow/*.yml,åŒæ—¶è®¾ç½® secrets å˜é‡ ACCESS_TOKEN ä¸ SERVICE_ID."></a>1.github åˆ›å»ºä»“åº“ï¼Œé…ç½®.github/workflow/*.yml,åŒæ—¶è®¾ç½® secrets å˜é‡ ACCESS_TOKEN ä¸ SERVICE_ID.</h3><ul>
<li><h4 id="é…ç½®-workflow-çš„-yml-æ–‡ä»¶ã€‚"><a href="#é…ç½®-workflow-çš„-yml-æ–‡ä»¶ã€‚" class="headerlink" title="é…ç½® workflow çš„ yml æ–‡ä»¶ã€‚"></a>é…ç½® workflow çš„ yml æ–‡ä»¶ã€‚</h4>ç›´æ¥å¤åˆ¶é‡Œé¢çš„ Usage,<a href="https://github.com/marketplace/actions/deploy-to-byteinspire-hosting">Deploy to ByteInspire Hosting</a></li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Hosting</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span> <span class="string">push</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build_and_deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="comment"># Add any build steps here. For example:</span></span><br><span class="line">      <span class="comment"># - run: npm ci &amp;&amp; npm run build</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">byteinspire/hosting-deployer-action@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">service-id:</span> <span class="string">&quot;$<span class="template-variable">&#123;&#123; secrets.SERVICE_ID &#125;&#125;</span>&quot;</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">&quot;$<span class="template-variable">&#123;&#123; secrets.ACCESS_TOKEN &#125;&#125;</span>&quot;</span></span><br><span class="line">          <span class="comment"># Or you can use file param to directly specify the ziped file path</span></span><br><span class="line">          <span class="attr">directory:</span> <span class="string">./</span></span><br></pre></td></tr></table></figure>

<span id="more"></span>

<ul>
<li><h4 id="é…ç½®-secrets-çš„å˜é‡-ACCESS-TOKEN-ä¸-SERVICE-ID"><a href="#é…ç½®-secrets-çš„å˜é‡-ACCESS-TOKEN-ä¸-SERVICE-ID" class="headerlink" title="é…ç½® secrets çš„å˜é‡ ACCESS_TOKEN ä¸ SERVICE_ID"></a>é…ç½® secrets çš„å˜é‡ ACCESS_TOKEN ä¸ SERVICE_ID</h4></li>
</ul>
<ol>
<li>ACCESS_TOKEN<br>å®˜æ–¹å·²ç»å†™å¾—å¾ˆè¯¦ç»†äº†<a href="https://qingfuwu.cn/docs/openapi/personaltoken.html#%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BA%E8%AE%BF%E9%97%AE%E5%87%AD%E8%AF%81">åˆ›å»ºå’Œç®¡ç†è®¿é—®å‡­è¯</a><br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202110221004.png"><br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202110221006.png"></li>
<li>SERVICE_ID<br>ç™»å½•è½»æœåŠ¡å<a href="https://qingfuwu.cn/dashboard">https://qingfuwu.cn/dashboard</a>ï¼Œåœ¨é¦–é¡µå°±èƒ½çœ‹è§ä½ åˆ›å»ºçš„æ‰€æœ‰æœåŠ¡ã€‚<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202110220950.png"><br>è¿™é‡Œå°±é€‰æ‹© hello world è¿™ä¸ªæœåŠ¡ï¼Œç‚¹å‡»è¿›å»ï¼Œå†è¿›å…¥åˆ°è®¾ç½®é‡Œé¢å°±å¯ä»¥çœ‹è§ SERVICE_ID.å½“ç„¶è¿™é‡Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ç‚¹å‡»é¡µé¢æ‰˜ç®¡ï¼Œä¸Šä¼ å‹ç¼©æ–‡ä»¶æ‰‹åŠ¨éƒ¨ç½²ã€‚<img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202110220952.png"></li>
<li>æ·»åŠ å˜é‡åˆ° secrets é‡Œé¢ï¼Œè¿™é‡Œæˆ‘å·²ç»æ·»åŠ ä¸Šäº†ã€‚è¿™é‡Œè¦æ³¨æ„çš„æ˜¯è®¾ç½® respository secretï¼Œå› ä¸ºæœ€å¼€å§‹è®¾ç½®æˆ environment secret è€Œå¤±è´¥å‡ æ¬¡ ğŸ˜­<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202110220955.png"></li>
</ol>
<h3 id="2-ç»è¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œå¤§è‡´å°±å¯ä»¥å®Œæˆäº†ã€‚"><a href="#2-ç»è¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œå¤§è‡´å°±å¯ä»¥å®Œæˆäº†ã€‚" class="headerlink" title="2. ç»è¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œå¤§è‡´å°±å¯ä»¥å®Œæˆäº†ã€‚"></a>2. ç»è¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œå¤§è‡´å°±å¯ä»¥å®Œæˆäº†ã€‚</h3><p>#####çœ‹çœ‹ actions å§ï¼Œå¿½ç•¥å‰å‡ æ¬¡ environment secret çš„é”… ğŸ˜‚<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202110221013.png"><br>è¿›å…¥é¡µé¢æ‰˜ç®¡ï¼Œç‚¹å‡»ç½‘ç«™åŸŸåï¼Œå°±å¯ä»¥çœ‹è§éƒ¨ç½²åçš„é¡µé¢äº†ã€‚<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202110221016.png"><br>æœ€ç»ˆæ•ˆæœï¼š<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202110221025.png"></p>
]]></content>
      <tags>
        <tag>deploy qingfuwu</tag>
      </tags>
  </entry>
  <entry>
    <title>numpyæ¡ä»¶é€‰æ‹©</title>
    <url>/2021/10/13/numpy%E6%9D%A1%E4%BB%B6%E9%80%89%E6%8B%A9/</url>
    <content><![CDATA[<h2 id="numpy-çš„æ¡ä»¶ç­›é€‰"><a href="#numpy-çš„æ¡ä»¶ç­›é€‰" class="headerlink" title="numpy çš„æ¡ä»¶ç­›é€‰"></a>numpy çš„æ¡ä»¶ç­›é€‰</h2><h3 id="ç­›é€‰åŸºç¡€"><a href="#ç­›é€‰åŸºç¡€" class="headerlink" title="ç­›é€‰åŸºç¡€"></a>ç­›é€‰åŸºç¡€</h3><h4 id="æ•°ç»„åˆ‡ç‰‡"><a href="#æ•°ç»„åˆ‡ç‰‡" class="headerlink" title="æ•°ç»„åˆ‡ç‰‡"></a>æ•°ç»„åˆ‡ç‰‡</h4><p>æˆ‘ä»¬ä¸€èˆ¬éƒ½çŸ¥é“ python çš„ [ ] æ“ä½œç¬¦å¯ä»¥è¿›è¡Œåˆ‡ç‰‡æ“ä½œ,ä¸¾ä¾‹å¦‚ä¸‹:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="comment">#åˆ‡ç‰‡æ“ä½œå‚æ•°ä»‹ç»ï¼š[èµ·å§‹ä½ç½®ä¸‹æ ‡ï¼ˆé»˜è®¤æœ€å¼€å§‹ï¼‰:ç»“æŸä½ç½®ä¸‹æ ‡(é»˜è®¤æœ€å):æ­¥é•¿(é»˜è®¤ä¸ºä¸€)]</span></span><br><span class="line">arr[<span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line"><span class="comment"># [1,2]</span></span><br><span class="line"></span><br><span class="line">arr[<span class="number">0</span>:<span class="number">2</span>:<span class="number">2</span>]</span><br><span class="line"><span class="comment"># [1,3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å½“æ­¥é•¿ä¸º-1æ—¶ï¼Œèƒ½å¤Ÿé€†ç½®æ•°ç»„</span></span><br><span class="line">arr[::-<span class="number">1</span>]</span><br><span class="line"><span class="comment"># [3,2,1]</span></span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h4 id="ä¸‹é¢æ˜¯-ndarray-äºŒç»´æ•°ç»„çš„ä¾‹å­"><a href="#ä¸‹é¢æ˜¯-ndarray-äºŒç»´æ•°ç»„çš„ä¾‹å­" class="headerlink" title="ä¸‹é¢æ˜¯ ndarray äºŒç»´æ•°ç»„çš„ä¾‹å­"></a>ä¸‹é¢æ˜¯ ndarray äºŒç»´æ•°ç»„çš„ä¾‹å­</h4><h5 id="å•åˆ—-è¡Œç­›é€‰"><a href="#å•åˆ—-è¡Œç­›é€‰" class="headerlink" title="å•åˆ—/è¡Œç­›é€‰"></a>å•åˆ—/è¡Œç­›é€‰</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = [</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],</span><br><span class="line">[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line">]</span><br><span class="line">arr = np.array(arr)</span><br><span class="line"><span class="comment"># å•åˆ—ç­›é€‰</span></span><br><span class="line"><span class="comment"># åˆ—ç­›é€‰ï¼Œç¬¬ä¸€ä¸ªå†’å·ä¸èƒ½çœç•¥</span></span><br><span class="line">arr[:,<span class="number">0</span>] <span class="comment"># é€‰æ‹©ä¸‹æ ‡ä¸º0çš„åˆ—</span></span><br><span class="line"><span class="comment"># [1,4]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å•è¡Œç­›é€‰</span></span><br><span class="line">arr[<span class="number">0</span>] <span class="comment"># é€‰æ‹©ä¸‹æ ‡ä¸º0çš„è¡Œï¼Œå°±åƒæ™®é€šçš„äºŒç»´æ•°ç»„è®¿é—®ç¬¬ä¸€ä¸ªä¸€ç»´æ•°ç»„ä¸€æ ·</span></span><br><span class="line"><span class="comment"># [1,2,3,4]</span></span><br></pre></td></tr></table></figure>

<h5 id="å¤šè¡Œ-åˆ—ç­›é€‰"><a href="#å¤šè¡Œ-åˆ—ç­›é€‰" class="headerlink" title="å¤šè¡Œ/åˆ—ç­›é€‰"></a>å¤šè¡Œ/åˆ—ç­›é€‰</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = [</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],</span><br><span class="line">[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line">]</span><br><span class="line">arr = np.array(arr)</span><br><span class="line"><span class="comment"># å¤šåˆ—ç­›é€‰</span></span><br><span class="line">	<span class="comment"># é€‰æ‹©æŸä¸ªä¸‹æ ‡åŒºé—´çš„åˆ—</span></span><br><span class="line">arr[:,<span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line"><span class="comment"># [</span></span><br><span class="line"><span class="comment"># [1,2],</span></span><br><span class="line"><span class="comment"># [4,5]</span></span><br><span class="line"><span class="comment"># ]</span></span><br><span class="line">	<span class="comment"># é€‰æ‹©æŸäº›åˆ—</span></span><br><span class="line">arr[:,[<span class="number">0</span>,<span class="number">3</span>]] <span class="comment"># é€‰æ‹©ä¸‹æ ‡ä¸º 0ï¼Œ3çš„åˆ—</span></span><br><span class="line"><span class="comment"># [</span></span><br><span class="line"><span class="comment"># [1,4],</span></span><br><span class="line"><span class="comment"># [4,7]</span></span><br><span class="line"><span class="comment"># ]</span></span><br><span class="line">	<span class="comment"># boolé€‰æ‹©</span></span><br><span class="line">	<span class="comment"># boolæ•°ç»„çš„  é•¿åº¦  å¿…é¡»è¦ä¸åˆ—çš„  ç»´æ•°ç›¸åŒ</span></span><br><span class="line">arr[:,[<span class="literal">True</span>,<span class="literal">False</span>,<span class="literal">False</span>,<span class="literal">False</span>]]</span><br><span class="line"><span class="comment"># [</span></span><br><span class="line"><span class="comment"># [1],</span></span><br><span class="line"><span class="comment"># [4]</span></span><br><span class="line"><span class="comment"># ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤šè¡Œç­›é€‰</span></span><br><span class="line"><span class="comment"># ä¸å¤šåˆ—ç­›é€‰ç±»ä¼¼</span></span><br><span class="line">arr = np.array([</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],</span><br><span class="line">[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>],</span><br><span class="line">[<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>]</span><br><span class="line">])</span><br><span class="line">	<span class="comment"># é€‰æ‹©æŸäº›è¡Œ</span></span><br><span class="line">arr[[<span class="number">0</span>,<span class="number">1</span>]]</span><br><span class="line"><span class="comment"># [[</span></span><br><span class="line"><span class="comment"># [1,2,3,4],</span></span><br><span class="line"><span class="comment"># [4,5,6,7]</span></span><br><span class="line"><span class="comment"># ]]</span></span><br><span class="line">	<span class="comment"># å…¶ä½™å°±ä¸åœ¨èµ˜è¿°ï¼Œå¯ä»¥å­—è¡Œæµ‹è¯•</span></span><br></pre></td></tr></table></figure>

<h3 id="æ¡ä»¶ç­›é€‰"><a href="#æ¡ä»¶ç­›é€‰" class="headerlink" title="æ¡ä»¶ç­›é€‰"></a>æ¡ä»¶ç­›é€‰</h3><p>é€šè¿‡ä¸Šé¢çš„ä¸€äº›åŸºæœ¬çš„ç­›é€‰è§„åˆ™ï¼Œå¯ä»¥å¤§è‡´äº†è§£äº† numpy çš„ç­›é€‰åŸåˆ™äº†ï¼Œé‚£ä¹ˆä¸‹é¢å°±çœ‹ä¸€ numpy æ¯”è¾ƒå¼ºå¤§çš„æ¡ä»¶ç­›é€‰å§ã€‚è€Œæ¡ä»¶ç­›é€‰å°±æ˜¯ä¾èµ– bool ç­›é€‰å®ç°çš„ã€‚</p>
<h4 id="æ¡ä»¶ç­›é€‰è¡Œ"><a href="#æ¡ä»¶ç­›é€‰è¡Œ" class="headerlink" title="æ¡ä»¶ç­›é€‰è¡Œ"></a>æ¡ä»¶ç­›é€‰è¡Œ</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.array([</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],</span><br><span class="line">[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>],</span><br><span class="line">[<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>]</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¾‹å¦‚ï¼šé€‰æ‹©ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºå¶æ•°çš„è¡Œ</span></span><br><span class="line">arr[arr[:,<span class="number">0</span>]%<span class="number">2</span>==<span class="number">0</span>]</span><br><span class="line"><span class="comment"># [[ 4,  5,  6,  7],</span></span><br><span class="line"><span class="comment">#  [ 8,  9, 10, 11]]</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹ä¸Šé¢å‘ç”Ÿäº†ä»€ä¹ˆã€‚<br>é¦–å…ˆ: arr[:,0]x é€‰æ‹©é™¤äº†äºŒç»´æ•°ç»„çš„ç¬¬ä¸€åˆ—â€”â€“[1,4,8]<br>ç„¶å: arr[:,0]%2==0 å¾—åˆ°äº†ä¸€ä¸ª bool æ•°ç»„â€”â€“[False,True,True]<br>æœ€å arr[[False,True,True]],è¿™ä¸ªæ ·å­æ˜¯ä¸æ˜¯æœ‰ç‚¹ç†Ÿæ‚‰äº†ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„ bool ç­›é€‰ã€‚</p>
<h4 id="æ¡ä»¶ç­›é€‰åˆ—"><a href="#æ¡ä»¶ç­›é€‰åˆ—" class="headerlink" title="æ¡ä»¶ç­›é€‰åˆ—"></a>æ¡ä»¶ç­›é€‰åˆ—</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸è¡Œç­›é€‰ç±»ä¼¼</span></span><br><span class="line">arr[:,arr[<span class="number">1</span>]&gt;<span class="number">5</span>] <span class="comment"># é€‰æ‹©ç¬¬äºŒè¡Œä¸­å¤§äº5çš„åˆ—</span></span><br><span class="line"><span class="comment"># [[ 3,  4],</span></span><br><span class="line"><span class="comment">#  [ 6,  7],</span></span><br><span class="line"><span class="comment">#  [10, 11]]</span></span><br></pre></td></tr></table></figure>

<h4 id="è¡Œåˆ—ä¸€èµ·é€‰æ‹©"><a href="#è¡Œåˆ—ä¸€èµ·é€‰æ‹©" class="headerlink" title="è¡Œåˆ—ä¸€èµ·é€‰æ‹©"></a>è¡Œåˆ—ä¸€èµ·é€‰æ‹©</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr[arr&gt;<span class="number">5</span>] <span class="comment"># é€‰æ‹©arrä¸­ï¼Œå¤§äº5çš„å…ƒç´ </span></span><br><span class="line"><span class="comment"># å…¶ä¸­arr&gt;5å¾—åˆ°ä¸€ä¸ªäºŒç»´çš„boolæ•°ç»„</span></span><br><span class="line"><span class="comment"># [[False, False, False, False],</span></span><br><span class="line"><span class="comment">#  [False, False,  True,  True],</span></span><br><span class="line"><span class="comment">#  [ True,  True,  True,  True]]</span></span><br><span class="line"><span class="comment"># æœ€ç»ˆç»“æœæ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„</span></span><br><span class="line"><span class="comment"># [ 6,  7,  8,  9, 10, 11]</span></span><br></pre></td></tr></table></figure>

<h5 id="æ³¨æ„ï¼šåœ¨è¿›è¡Œè¡Œåˆ—ä¸€èµ·é€‰æ‹©æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å…ƒç´ ç±»å‹ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå¦‚ç¬¬ä¸€åˆ—-intï¼Œç¬¬äºŒåˆ—æ˜¯-strï¼Œè¿™æ ·å†ç”¨-arr-gt-5-å°±ä¼šå‡ºç°é”™è¯¯ã€‚"><a href="#æ³¨æ„ï¼šåœ¨è¿›è¡Œè¡Œåˆ—ä¸€èµ·é€‰æ‹©æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å…ƒç´ ç±»å‹ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå¦‚ç¬¬ä¸€åˆ—-intï¼Œç¬¬äºŒåˆ—æ˜¯-strï¼Œè¿™æ ·å†ç”¨-arr-gt-5-å°±ä¼šå‡ºç°é”™è¯¯ã€‚" class="headerlink" title="æ³¨æ„ï¼šåœ¨è¿›è¡Œè¡Œåˆ—ä¸€èµ·é€‰æ‹©æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å…ƒç´ ç±»å‹ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå¦‚ç¬¬ä¸€åˆ— intï¼Œç¬¬äºŒåˆ—æ˜¯ strï¼Œè¿™æ ·å†ç”¨ arr&gt;5 å°±ä¼šå‡ºç°é”™è¯¯ã€‚"></a>æ³¨æ„ï¼šåœ¨è¿›è¡Œè¡Œåˆ—ä¸€èµ·é€‰æ‹©æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å…ƒç´ ç±»å‹ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå¦‚ç¬¬ä¸€åˆ— intï¼Œç¬¬äºŒåˆ—æ˜¯ strï¼Œè¿™æ ·å†ç”¨ arr&gt;5 å°±ä¼šå‡ºç°é”™è¯¯ã€‚</h5><h4 id="å¤šæ¡ä»¶é€‰æ‹©"><a href="#å¤šæ¡ä»¶é€‰æ‹©" class="headerlink" title="å¤šæ¡ä»¶é€‰æ‹©"></a>å¤šæ¡ä»¶é€‰æ‹©</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr[(arr&gt;<span class="number">5</span>) &amp; (arr%<span class="number">2</span>==<span class="number">0</span>)] <span class="comment"># é€‰æ‹©å¤§äº5ä¸”ä¸ºå¶æ•°çš„å…ƒç´ </span></span><br><span class="line"><span class="comment"># [ 6,  8, 10]</span></span><br></pre></td></tr></table></figure>

<h5 id="æ³¨æ„ï¼šå¤šæ¡ä»¶è¦ç”¨ï¼ˆï¼‰æ‹¬èµ·æ¯ä¸€ä¸ªæ¡ä»¶ï¼Œé€»è¾‘å…³ç³»ç”¨-æˆ–è€…-amp-ï¼Œä¸èƒ½ç”¨-and-or-è¿™æ ·ã€‚"><a href="#æ³¨æ„ï¼šå¤šæ¡ä»¶è¦ç”¨ï¼ˆï¼‰æ‹¬èµ·æ¯ä¸€ä¸ªæ¡ä»¶ï¼Œé€»è¾‘å…³ç³»ç”¨-æˆ–è€…-amp-ï¼Œä¸èƒ½ç”¨-and-or-è¿™æ ·ã€‚" class="headerlink" title="æ³¨æ„ï¼šå¤šæ¡ä»¶è¦ç”¨ï¼ˆï¼‰æ‹¬èµ·æ¯ä¸€ä¸ªæ¡ä»¶ï¼Œé€»è¾‘å…³ç³»ç”¨ | æˆ–è€… &amp;ï¼Œä¸èƒ½ç”¨ and,or è¿™æ ·ã€‚"></a>æ³¨æ„ï¼šå¤šæ¡ä»¶è¦ç”¨ï¼ˆï¼‰æ‹¬èµ·æ¯ä¸€ä¸ªæ¡ä»¶ï¼Œé€»è¾‘å…³ç³»ç”¨ | æˆ–è€… &amp;ï¼Œä¸èƒ½ç”¨ and,or è¿™æ ·ã€‚</h5>]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>numpy</tag>
      </tags>
  </entry>
  <entry>
    <title>reactäº‹ä»¶ç³»ç»Ÿ</title>
    <url>/2022/05/01/react%E5%90%88%E6%88%90%E4%BA%8B%E4%BB%B6/</url>
    <content><![CDATA[<h2 id="å¼€å§‹æ³¨å†Œäº‹ä»¶"><a href="#å¼€å§‹æ³¨å†Œäº‹ä»¶" class="headerlink" title="å¼€å§‹æ³¨å†Œäº‹ä»¶"></a>å¼€å§‹æ³¨å†Œäº‹ä»¶</h2><ul>
<li>è¿™é‡Œåªæ˜¯ç®€å•çš„è®¾ç½®ä¸€äº›å˜é‡å€¼ï¼Œè§ä¸‹é¢ä»£ç </li>
</ul>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†Œäº‹ä»¶</span></span><br><span class="line"><span class="comment">// DOMPluginEventSystem.ts</span></span><br><span class="line">SimpleEventPlugin.registerEvents();</span><br><span class="line">EnterLeaveEventPlugin.registerEvents();</span><br><span class="line">ChangeEventPlugin.registerEvents();</span><br><span class="line">SelectEventPlugin.registerEvents();</span><br><span class="line">BeforeInputEventPlugin.registerEvents();</span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">allNativeEvent</span>:<span class="built_in">Set</span>&lt;DOMEventName&gt; = &#123;<span class="string">&#x27;click&#x27;</span>,<span class="string">&#x27;keyup&#x27;</span>,<span class="string">&#x27;keydown&#x27;</span>,...&#125;;</span><br><span class="line"></span><br><span class="line">registrationNameDependencies[<span class="string">&quot;onClick&quot;</span>] = [<span class="string">&quot;click&quot;</span>];</span><br><span class="line">registrationNameDependencies[<span class="string">&#x27;onMouseEnter&#x27;</span>] = [<span class="string">&#x27;mouseout&#x27;</span>, <span class="string">&#x27;mouseover&#x27;</span>]; <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">topLevelEventsToReactNames:<span class="built_in">Map</span>&lt;DOMEventName,<span class="built_in">string</span>|<span class="literal">null</span>&gt; = &#123;<span class="string">&quot;click&quot;</span>:<span class="string">&quot;onClick&quot;</span>&#125;;</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h2 id="å¤§è‡´æµç¨‹"><a href="#å¤§è‡´æµç¨‹" class="headerlink" title="å¤§è‡´æµç¨‹"></a>å¤§è‡´æµç¨‹</h2><p><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202205062357.png" alt="flowchart"></p>
<h2 id="listenToAllSupportedEvent"><a href="#listenToAllSupportedEvent" class="headerlink" title="listenToAllSupportedEvent"></a>listenToAllSupportedEvent</h2><ul>
<li>æ¥ä¸‹æ¥æ˜¯è®©rootå®¹å™¨ç›‘å¬æ‰€æœ‰æ”¯æŒçš„äº‹ä»¶</li>
</ul>
<p>éå§”æ‰˜äº‹ä»¶åªæœ‰æ•è·é˜¶æ®µã€‚<br>è€Œå§”æ‰˜äº‹ä»¶æ•è·å†’æ³¡éƒ½ä¼šç»‘å®šã€‚</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">allNativeEvents.forEach(<span class="function"><span class="params">domEventName</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æˆ‘ä»¬å•ç‹¬å¤„ç†selectionchangeæ›´æ”¹ï¼Œå› ä¸ºå®ƒä¸ä¼šå†’æ³¡ï¼Œéœ€è¦å‡ºç°åœ¨documentä¸Š</span></span><br><span class="line">  <span class="keyword">if</span> (domEventName !== <span class="string">&#x27;selectionchange&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!nonDelegatedEvents.has(domEventName)) &#123;</span><br><span class="line">      <span class="comment">// ä¸æ•è·</span></span><br><span class="line">      listenToNativeEvent(domEventName, <span class="literal">false</span>, rootContainerElement);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// nonDelegatedEventsäº‹ä»¶æ˜¯æ˜¯æ•è·é˜¶æ®µç›‘å¬å™¨</span></span><br><span class="line">    <span class="comment">// delegatedEventsæ˜¯å†’æ³¡æ•è·éƒ½æœ‰</span></span><br><span class="line">    listenToNativeEvent(domEventName, <span class="literal">true</span>, rootContainerElement);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>**<em>æ³¨æ„ï¼š</em>**selectionChangeäº‹ä»¶æ˜¯ç›‘å¬åœ¨documentä¸Šçš„ï¼Œå› ä¸ºå®ƒä¸ä¼šå†’æ³¡ã€‚</p>
<h2 id="ç»‘å®šreactçš„listeneråˆ°root-documentä¸Š"><a href="#ç»‘å®šreactçš„listeneråˆ°root-documentä¸Š" class="headerlink" title="ç»‘å®šreactçš„listeneråˆ°root || documentä¸Š"></a>ç»‘å®šreactçš„listeneråˆ°root || documentä¸Š</h2><p>listenToNativeEvent <strong>â€“&gt;</strong> addTrappedEventListener <strong>â€“&gt;</strong> listener = createEventListenerWrapperWithPriority</p>
<h2 id="createEventListenerWrapperWithPriority"><a href="#createEventListenerWrapperWithPriority" class="headerlink" title="createEventListenerWrapperWithPriority"></a>createEventListenerWrapperWithPriority</h2><p>è¿™é‡Œè¿›è¡Œåˆ›å»ºlistener,listeneræœ‰å¦‚ä¸‹å‡ ç§ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createEventListenerWrapperWithPriority</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">  targetContainer: EventTarget,</span></span></span><br><span class="line"><span class="params"><span class="function">  domEventName: DOMEventName,</span></span></span><br><span class="line"><span class="params"><span class="function">  eventSystemFlags: EventSystemFlags,</span></span></span><br><span class="line"><span class="params"><span class="function"></span>): <span class="title">Function</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> eventPriority = getEventPriority(domEventName);</span><br><span class="line">  <span class="keyword">let</span> listenerWrapper;</span><br><span class="line">  <span class="keyword">switch</span> (eventPriority) &#123;</span><br><span class="line">    <span class="comment">// ä¸€èˆ¬äº‹ä»¶éƒ½æ˜¯DiscreteEventPriority</span></span><br><span class="line">    <span class="keyword">case</span> DiscreteEventPriority:</span><br><span class="line">      listenerWrapper = dispatchDiscreteEvent;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> ContinuousEventPriority:</span><br><span class="line">      listenerWrapper = dispatchContinuousEvent;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> DefaultEventPriority:</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      listenerWrapper = dispatchEvent;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> listenerWrapper.bind(</span><br><span class="line">    <span class="literal">null</span>,</span><br><span class="line">    domEventName,</span><br><span class="line">    eventSystemFlags,</span><br><span class="line">    targetContainer,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸‰ç§listenerå­˜åœ¨ä¸€ä¸ªä¼˜å…ˆçº§çš„å·®åˆ«ã€‚<br>æœ€ç»ˆéƒ½ä¼šè°ƒç”¨dispatchEvent.</p>
<h2 id="dispatchEvent"><a href="#dispatchEvent" class="headerlink" title="dispatchEvent"></a>dispatchEvent</h2><ul>
<li>è¿™æ˜¯reactè¿›è¡Œè§¦å‘äº‹ä»¶ç›‘å¬å‡½æ•°çš„åœ°æ–¹ï¼Œè¿™é‡Œçš„listeneræ˜¯ç»‘å®šåˆ°ç»„ä»¶propsä¸Šçš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
</ul>
<p>é¦–å…ˆåˆ¤æ–­æ˜¯å¦æ˜¯allowReplayäº‹ä»¶ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> allowReplay = (eventSystemFlags &amp; IS_CAPTURE_PHASE) === <span class="number">0</span>;</span><br><span class="line"><span class="comment">// eventSystemFlags captureæ—¶ç­‰äº4,bubbleæ—¶ç­‰äº0</span></span><br><span class="line"><span class="comment">// capture &amp; 4 = 4; bubble &amp; 4 = 0</span></span><br><span class="line"><span class="comment">// IS_CAPTURE_PHASE = 4</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åæ˜¯å…ˆå»å°è¯•è°ƒåº¦äº‹ä»¶,åˆ¤å®šæ˜¯å¦ä¼šblockOnï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> blockedOn = attemptToDispatchEvent(</span><br><span class="line">  domEventName,</span><br><span class="line">  eventSystemFlags,</span><br><span class="line">  targetContainer,</span><br><span class="line">  nativeEvent,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="attemptToDispatchEvent"><a href="#attemptToDispatchEvent" class="headerlink" title="attemptToDispatchEvent"></a>attemptToDispatchEvent</h2><ol>
<li>å…ˆæ˜¯è·å–çœŸæ­£çš„äº‹ä»¶è§¦å‘å…ƒç´ ï¼še.targeï¼Œè¿™é‡Œç§°ä¸ºnativeEventTarget</li>
<li>è·å–nativeEventTargetä¸Šçš„Fiber,å³â€__reactFiber${Randomâ€¦}â€å±æ€§ã€‚è¿™é‡Œæ˜¯targetInst.</li>
<li>å¤„ç†è®©targetInstä¸ºnullçš„æƒ…å†µã€‚<ol>
<li>èŠ‚ç‚¹è¢«unmounted,å³ä¸èƒ½é€šè¿‡returnå±æ€§åˆ°è¾¾æ ¹èŠ‚ç‚¹ã€‚</li>
<li>å¦‚æœæœ€è¿‘çš„mountedæ˜¯SuspenseCompnent | HostRoot | æœ€è¿‘çš„mountedFiber  !== targetInst</li>
</ol>
</li>
</ol>
<p>æ¥ä¸‹æ¥è¿›å…¥çœŸæ­£çš„äº‹ä»¶è°ƒåº¦å‡½æ•°ã€‚</p>
<h2 id="dispatchEventForPluginEventSystem"><a href="#dispatchEventForPluginEventSystem" class="headerlink" title="dispatchEventForPluginEventSystem"></a>dispatchEventForPluginEventSystem</h2><ul>
<li>åœ¨è¿™é‡Œé¢ï¼Œä¼šæœ‰ä¸€ä¸ªmainLoop,å»å¯»æ‰¾ä¸€ä¸ªrootèŠ‚ç‚¹ï¼Œå› ä¸ºåœ¨rootèŠ‚ç‚¹ä¸Šï¼Œä¼šç»‘å®šä¸€äº›äº‹ä»¶ã€‚</li>
<li>éå†çš„æ–¹å¼æ˜¯ä»å½“å‰èŠ‚ç‚¹ä¸€ç›´å¾€ä¸Šï¼ˆreturnï¼‰.</li>
<li>æœ€åbatchedEventUpdates â€”&gt; dispatchEventsForPlugins</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// DOMPluginEventSystem</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dispatchEventForPluginEventSystem</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">  domEventName: DOMEventName,</span></span></span><br><span class="line"><span class="params"><span class="function">  eventSystemFlags: EventSystemFlags,</span></span></span><br><span class="line"><span class="params"><span class="function">  nativeEvent: AnyNativeEvent,</span></span></span><br><span class="line"><span class="params"><span class="function">  targetInst: <span class="literal">null</span> | Fiber, <span class="comment">// è§¦å‘äº‹ä»¶çš„Fiber</span></span></span></span><br><span class="line"><span class="params"><span class="function">  targetContainer: EventTarget, <span class="comment">// root</span></span></span></span><br><span class="line"><span class="params"><span class="function"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> ancestorInst = targetInst;</span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    (eventSystemFlags &amp; IS_EVENT_HANDLE_NON_MANAGED_NODE) === <span class="number">0</span> &amp;&amp;</span><br><span class="line">    (eventSystemFlags &amp; IS_NON_DELEGATED) === <span class="number">0</span></span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="keyword">const</span> targetContainerNode = targetContainer <span class="keyword">as</span> Node;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (targetInst !== <span class="literal">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> node = targetInst;</span><br><span class="line">      mainLoop: <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="comment">// ...æœç´¢root container</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  batchedEventUpdates(<span class="function">() =&gt;</span></span><br><span class="line">  <span class="comment">// è¿›å…¥åˆæˆäº‹ä»¶ç³»ç»Ÿ</span></span><br><span class="line">    dispatchEventsForPlugins(</span><br><span class="line">      domEventName,</span><br><span class="line">      eventSystemFlags,</span><br><span class="line">      nativeEvent,</span><br><span class="line">      ancestorInst,</span><br><span class="line">      targetContainer,</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="dispatchEventsForPlugins"><a href="#dispatchEventsForPlugins" class="headerlink" title="dispatchEventsForPlugins"></a>dispatchEventsForPlugins</h2><ul>
<li>å°†nativeEventè½¬æ¢æˆsynthesizeEvent,å¹¶åŠ å…¥dispatchQueueï¼Œæœ€ç»ˆprocessDispatchQueueã€‚</li>
</ul>
<p><em>extractEvents:</em></p>
<blockquote>
<p>åˆ›å»ºDispatchEntry:{event:listeners}ï¼Œå¹¶æ·»åŠ åˆ°dispatchQueue</p>
</blockquote>
<ol>
<li>å·¥å‚æ¨¡å¼ç¡®å®šSyntheticEventCtor</li>
<li>accumulateSinglePhaseListenersä»targetåˆ°rootéå†ï¼Œè·å–ç»‘å®šåˆ°propsçš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œæ·»åŠ ç”¨æˆ·è‡ªå·±æ·»åŠ çš„äº‹ä»¶å¤„ç†å‡½æ•°åˆ°listenersæ•°ç»„é‡Œå¹¶è¿”å›ã€‚</li>
<li>dispatchQueue.push({event,listeners})<br>è¿™é‡Œeventä¹Ÿå°±æ˜¯synthesizeEventå¯¹è±¡ï¼Œå³åœ¨äº‹ä»¶ç»‘å®šåçš„å›è°ƒå‡½æ•°çš„é»˜è®¤å‚æ•°event.</li>
</ol>
<p><em>processDispatchQueue:</em></p>
<blockquote>
<p>éå†dispatchQueue,å¤„ç†æ¯ä¸ªäº‹ä»¶çš„listenersæ•°ç»„</p>
</blockquote>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è°ƒç”¨processDispatchQueueItemsInOrderï¼Œæ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&lt;&#123;</span></span></span></span><br><span class="line"><span class="type"><span class="doctag"><span class="comment"> * event: ReactSyntheticEvent,</span></span></span></span><br><span class="line"><span class="type"><span class="doctag"><span class="comment"> * listeners: Array&lt;&#123;</span></span></span></span><br><span class="line"><span class="type"><span class="doctag"><span class="comment"> * instance: null | Fiber,</span></span></span></span><br><span class="line"><span class="type"><span class="doctag"><span class="comment"> * listener: Function,</span></span></span></span><br><span class="line"><span class="type"><span class="doctag"><span class="comment"> * currentTarget: EventTarget,</span></span></span></span><br><span class="line"><span class="type"><span class="doctag"><span class="comment"> * &#125;</span></span>&gt;&#125;&#125; dispatchQueue</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;EventSystemFlags&#125;</span> <span class="variable">eventSystemFlags</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">processDispatchQueue</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">  dispatchQueue: DispatchQueue,</span></span></span><br><span class="line"><span class="params"><span class="function">  eventSystemFlags: EventSystemFlags,</span></span></span><br><span class="line"><span class="params"><span class="function"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> inCapturePhase = (eventSystemFlags &amp; IS_CAPTURE_PHASE) !== <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; dispatchQueue.length; i++) &#123;</span><br><span class="line">    <span class="comment">// &#123; event: ReactSyntheticEvent,listeners: Array &lt; DispatchListener &gt;&#125;;</span></span><br><span class="line">    <span class="keyword">const</span> &#123; event, listeners &#125; = dispatchQueue[i];</span><br><span class="line"></span><br><span class="line">    processDispatchQueueItemsInOrder(event, listeners, inCapturePhase);</span><br><span class="line">    <span class="comment">//  event system doesn&#x27;t use pooling.</span></span><br><span class="line">    <span class="comment">// äº‹ä»¶ç³»ç»Ÿä¸ä½¿ç”¨æ± ã€‚</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// This would be a good time to rethrow if any of the event handlers threw.</span></span><br><span class="line">  rethrowCaughtError();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>processDispatchQueueItemsInOrder</li>
</ul>
<blockquote>
<p>æ ¹æ®inCapturePhaseåˆ¤å®šæ˜¯captureè¿˜æ˜¯bubble,</p>
</blockquote>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰§è¡Œäº‹ä»¶é˜Ÿåˆ—ï¼Œæ ¹æ®æ˜¯å¦æ•è·ç¡®å®šäº‹ä»¶çš„æ‰§è¡Œé¡ºåº</span></span><br><span class="line"><span class="comment"> * []dispatchListeners</span></span><br><span class="line"><span class="comment"> * æ•è·ï¼šé‡æœ€åä¸€ä¸ªåˆ°ç¬¬ä¸€ä¸ª</span></span><br><span class="line"><span class="comment"> * å†’æ³¡ï¼šé‡0åˆ°æœ€åä¸€ä¸ª</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;ReactSyntheticEvent&#125;</span> <span class="variable">event</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&lt;DispatchListener&gt;&#125;</span> <span class="variable">dispatchListeners</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;boolean&#125;</span> <span class="variable">inCapturePhase</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">processDispatchQueueItemsInOrder</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">  event: ReactSyntheticEvent,</span></span></span><br><span class="line"><span class="params"><span class="function">  dispatchListeners: <span class="built_in">Array</span>&lt;DispatchListener&gt;,</span></span></span><br><span class="line"><span class="params"><span class="function">  inCapturePhase: <span class="built_in">boolean</span>,</span></span></span><br><span class="line"><span class="params"><span class="function"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> previousInstance;</span><br><span class="line">  <span class="comment">// æ•è·</span></span><br><span class="line">  <span class="comment">// å› ä¸ºæ·»åŠ dispatcheræ—¶æ˜¯ä»å½“å‰ç„¶åreturnåˆ°null,æ‰€ä»¥æ•è·æ˜¯å€’è¿‡æ¥çš„è¿è¡Œ</span></span><br><span class="line">  <span class="keyword">if</span> (inCapturePhase) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = dispatchListeners.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">      <span class="comment">// &#123; instance: null | Fiber,listener: Function,currentTarget: EventTarget&#125;;</span></span><br><span class="line">      <span class="keyword">const</span> &#123; instance, currentTarget, listener &#125; = dispatchListeners[i];</span><br><span class="line"></span><br><span class="line">      <span class="comment">// é˜»æ­¢å†’æ³¡stopPropagation</span></span><br><span class="line">      <span class="keyword">if</span> (instance !== previousInstance &amp;&amp; event.isPropagationStopped()) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      executeDispatch(event, listener, currentTarget);</span><br><span class="line">      previousInstance = instance;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; dispatchListeners.length; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; instance, currentTarget, listener &#125; = dispatchListeners[i];</span><br><span class="line">      <span class="keyword">if</span> (instance !== previousInstance &amp;&amp; event.isPropagationStopped()) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      executeDispatch(event, listener, currentTarget);</span><br><span class="line">      previousInstance = instance;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="executeDispatch"><a href="#executeDispatch" class="headerlink" title="executeDispatch"></a>executeDispatch</h2><ul>
<li>æœ€ç»ˆè°ƒç”¨ç”¨æˆ·çš„å¤„ç†å‡½æ•°,å…¶ä¸­åŒ…å«ä¸€äº›reactçš„invokeå‡½æ•°ï¼Œä»¥åŠä¸€äº›åœ¨å¼€å‘ç¯å¢ƒä¸‹çš„createEventäº‹ä»¶ã€‚</li>
</ul>
<blockquote>
<p>æœ¬æ–‡è¿˜æœ‰è®¸å¤šç»†èŠ‚æ²¡æœ‰æåˆ°ï¼Œåªæ˜¯å¤§è‡´è¯´æ˜äº†äº‹ä»¶ç³»ç»Ÿçš„ä¸€ä¸ªæµç¨‹</p>
</blockquote>
<h2 id="æœªå®Œå¾…ç»­"><a href="#æœªå®Œå¾…ç»­" class="headerlink" title="æœªå®Œå¾…ç»­"></a>æœªå®Œå¾…ç»­</h2>]]></content>
      <categories>
        <category>react</category>
      </categories>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2021/07/21/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<span id="more"></span>

<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>svgåŸºç¡€</title>
    <url>/2022/07/21/svg%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>svgï¼ˆScalable Vector Graphicsï¼‰å¯ç¼©æ”¾çš„çŸ¢é‡å›¾å½¢ï¼Œæ˜¯ W3C XML çš„åˆ†æ”¯è¯­è¨€ä¹‹ä¸€ï¼Œç”¨äºæ ‡è®°å¯ç¼©æ”¾çš„çŸ¢é‡å›¾å½¢ã€‚</p>
<span id="more"></span>

<h2 id="å‘½åç©ºé—´"><a href="#å‘½åç©ºé—´" class="headerlink" title="å‘½åç©ºé—´"></a>å‘½åç©ºé—´</h2><p>å®šä¹‰çš„å‘½åç©ºé—´å¯ä»¥æŠŠé€šé…ã€å…ƒç´ ã€å±æ€§é€‰æ‹©å™¨é™åˆ¶åœ¨æŒ‡å®šå‘½åç©ºé—´é‡Œçš„å…ƒç´ ã€‚</p>
<h3 id="å£°æ˜å‘½åç©ºé—´"><a href="#å£°æ˜å‘½åç©ºé—´" class="headerlink" title="å£°æ˜å‘½åç©ºé—´"></a>å£°æ˜å‘½åç©ºé—´</h3><p>ä½¿ç”¨xmlnså±æ€§è¿›è¡Œå‘½åç©ºé—´çš„å£°æ˜ï¼Œä¸‹é¢çš„å£°æ˜æ„å‘³ç€svgä»¥åŠå®ƒçš„å­èŠ‚ç‚¹éƒ½å±äºâ€œ<a href="http://www.w3.org/2000/svg%E2%80%9D%E8%BF%99%E4%B8%AAsvg%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E3%80%82">http://www.w3.org/2000/svgâ€è¿™ä¸ªsvgå‘½åç©ºé—´ã€‚</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure>

<h2 id="SVG-å…ƒç´ "><a href="#SVG-å…ƒç´ " class="headerlink" title="SVG å…ƒç´ "></a>SVG å…ƒç´ </h2><p>See moreï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element#svg_%E5%85%83%E7%B4%A0%EF%BC%88%E6%8C%89%E7%B1%BB%E5%88%AB%E5%88%86%E7%B1%BB%EF%BC%89">mdn-svgå…ƒç´ å‚è€ƒ</a></p>
<blockquote>
<p>ä¸Šé¢åˆ—å‡ºäº†ä¸€äº›å¸¸è§ä»¥åŠå¸¸ç”¨çš„svgå…ƒç´ ï¼Œä¸‹é¢æˆ‘ä»¬å¯ä»¥æ¥çœ‹çœ‹å®ƒä»¬æ˜¯ä»€ä¹ˆæ ·å­çš„ä»¥åŠæ€ä¹ˆæ”¹å˜å®ƒä»¬çš„å±æ€§ã€‚</p>
</blockquote>
<h2 id="å›¾å½¢å…ƒç´ "><a href="#å›¾å½¢å…ƒç´ " class="headerlink" title="å›¾å½¢å…ƒç´ "></a>å›¾å½¢å…ƒç´ </h2><h3 id="åŸºç¡€å›¾å½¢å…ƒç´ "><a href="#åŸºç¡€å›¾å½¢å…ƒç´ " class="headerlink" title="åŸºç¡€å›¾å½¢å…ƒç´ "></a>åŸºç¡€å›¾å½¢å…ƒç´ </h3><iframe height="300" style="width: 100%;" scrolling="no" title="feDisplacementMap" src="https://codepen.io/l-jour/embed/RwMVwNE?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/l-jour/pen/RwMVwNE"></a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>

<h3 id="çº¿æ®µå±æ€§"><a href="#çº¿æ®µå±æ€§" class="headerlink" title="çº¿æ®µå±æ€§"></a>çº¿æ®µå±æ€§</h3><p>å¯¹äºstrokeå¡«å……çš„çº¿æ®µæ¥è¯´ï¼Œstroke-dasharrayä¸stroke-dashoffsetæ˜¯ä¸¤ä¸ªæ¯”è¾ƒæœ‰ç”¨çš„å±æ€§ã€‚</p>
<ul>
<li>  stroke-dasharrayï¼šæ§åˆ¶ç”¨æ§åˆ¶çº¿æ®µå®çº¿ä¸è™šçº¿çš„å•å…ƒé•¿åº¦ã€‚</li>
</ul>
<!---->

<ul>
<li>  stroke-dasharrayï¼šæ§åˆ¶è™šçº¿çš„åç§»</li>
</ul>
<blockquote>
<p>stroke-dasharrayç»“åˆanimateçš„ä¾‹å­</p>
</blockquote>
<iframe height="300" style="width: 100%;" scrolling="no" title="feDisplacementMap" src="https://codepen.io/l-jour/embed/ZExoMmN?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/l-jour/pen/ZExoMmN"></a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>

<blockquote>
<p>ä½¿ç”¨stroke-dashoffsetä¸animateTransformã€animateç»˜åˆ¶åŠ è½½åŠ¨ç”»</p>
</blockquote>
<p>ç”¨animateæ§åˆ¶stroke-dashoffsetè™šçº¿éƒ¨åˆ†çš„åç§»ï¼ŒåŒæ—¶animateTransformæ§åˆ¶æ•´ä¸ªåœ†ç¯çš„è‡ªè½¬ã€‚</p>
<iframe height="300" style="width: 100%;" scrolling="no" title="feDisplacementMap" src="https://codepen.io/l-jour/embed/ExELqMa?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/l-jour/pen/ExELqMa"></a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>

<blockquote>
<p>å¿ƒç”µå›¾</p>
</blockquote>
<p>è¿™é‡Œä¸»è¦æ€è·¯å°±æ˜¯ä½¿ç”¨polylineç»˜åˆ¶æŠ˜çº¿å›¾ï¼Œä½¿ç”¨stroke-dasharrayç»˜åˆ¶è™šçº¿ï¼Œstroke-dashoffsetæ§åˆ¶è™šçº¿ç©ºç™½å¤„çš„åç§»ï¼Œç„¶åç”¨animateæ§åˆ¶stroke-dashoffsetçš„å€¼ï¼Œå°±èƒ½çœ‹è§è¿™ç§çº¿æ®µç§»åŠ¨çš„æ•ˆæœäº†ğŸ«¥</p>
<iframe height="300" style="width: 100%;" scrolling="no" title="feDisplacementMap" src="https://codepen.io/l-jour/embed/qBoYyxL?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/l-jour/pen/qBoYyxL"></a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>

<h3 id="å¼ºå¤§çš„pathå…ƒç´ "><a href="#å¼ºå¤§çš„pathå…ƒç´ " class="headerlink" title="å¼ºå¤§çš„pathå…ƒç´ "></a>å¼ºå¤§çš„pathå…ƒç´ </h3><p>ä¸Šé¢çš„åŸºæœ¬å›¾å½¢éƒ½æ˜¯å¯ä»¥ç”¨pathæ¥åˆ›å»ºçš„ï¼Œè€Œpathçš„åŠŸèƒ½è¿œè¿œä¸æ­¢ä¸Šé¢è¿™äº›å›¾å½¢ğŸ˜ã€‚pathå…ƒç´ çš„å½¢çŠ¶é€šè¿‡å±æ€§dæ¥å®šä¹‰ï¼Œå±æ€§dçš„å€¼æ˜¯ä¸€ä¸ªâ€œå‘½ä»¤+å‚æ•°â€çš„åºåˆ—ã€‚ä¸‹é¢å°±åˆ—å‡ºäº†ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ã€‚</p>
<h4 id="ç›´çº¿å‘½ä»¤"><a href="#ç›´çº¿å‘½ä»¤" class="headerlink" title="ç›´çº¿å‘½ä»¤"></a>ç›´çº¿å‘½ä»¤</h4><ol>
<li><p>Moveto</p>
<ul>
<li> <code>M x,y</code> åœ¨è¿™é‡Œxå’Œyæ˜¯ç»å¯¹åæ ‡ï¼Œåˆ†åˆ«ä»£è¡¨æ°´å¹³åæ ‡å’Œå‚ç›´åæ ‡ã€‚</li>
<li> <code>m dx,dy</code> åœ¨è¿™é‡Œdxå’Œdyæ˜¯ç›¸å¯¹äºå½“å‰ç‚¹çš„è·ç¦»ï¼Œåˆ†åˆ«æ˜¯å‘å³å’Œå‘ä¸‹çš„è·ç¦»ã€‚</li>
</ul>
</li>
</ol>
<!---->

<ol start="2">
<li><p>Lineto<br><code>Lineto</code>æŒ‡ä»¤å°†ç»˜åˆ¶ä¸€æ¡ç›´çº¿æ®µã€‚è¿™ä¸ªç›´çº¿æ®µä»å½“å‰ä½ç½®ç§»åˆ°æŒ‡å®šä½ç½®</p>
<ul>
<li>  <code>Lx,y</code> xä¸yæ˜¯ç»å¯¹åæ ‡ï¼Œåˆ†åˆ«ä»£è¡¨æ°´å¹³åæ ‡å’Œå‚ç›´åæ ‡</li>
<li>  <code>ldx,dy</code> dxå’Œdyæ˜¯ç›¸å¯¹äºå½“å‰ç‚¹çš„è·ç¦»ï¼Œåˆ†åˆ«æ˜¯å‘å³å’Œå‘ä¸‹çš„è·ç¦»</li>
<li>  <code>Hx</code> ç»å¯¹åæ ‡ï¼Œæ°´å¹³ç§»åŠ¨</li>
<li>  <code>Vy</code> ç»å¯¹åæ ‡ï¼Œå‚ç›´ç§»åŠ¨</li>
<li>  <code>hdx</code> æ°´å¹³ç§»åŠ¨ç›¸å¯¹è·ç¦»</li>
<li>  <code>vdy</code> å‚ç›´ç§»åŠ¨ç›¸å¯¹è·ç¦»</li>
</ul>
</li>
<li><p> Z or zï¼šé—­åˆè·¯å¾„</p>
</li>
</ol>
<iframe height="300" style="width: 100%;" scrolling="no" title="feDisplacementMap" src="https://codepen.io/l-jour/embed/NWYjyxL?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/l-jour/pen/NWYjyxL"></a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>

<h4 id="æ›²çº¿å‘½ä»¤"><a href="#æ›²çº¿å‘½ä»¤" class="headerlink" title="æ›²çº¿å‘½ä»¤"></a>æ›²çº¿å‘½ä»¤</h4><p>å°å†™çš„æŒ‡ä»¤æ„ä¹‰åŒä¸Šï¼Œéƒ½æ˜¯è·Ÿç›¸å¯¹çš„è·ç¦»</p>
<ol>
<li> Curveto</li>
</ol>
<ul>
<li> Â Â Cå‘½ä»¤åˆ›å»ºä¸€ä¸ªä¸‰æ¬¡è´å¡å°”æ›²çº¿ï¼Œå…¶ä¸­ (x1,y1) (x2,y2)ä¸ºæ§åˆ¶ç‚¹ï¼Œx,yä¸ºæ›²çº¿ç»ˆç‚¹</li>
<li> <code>C x1 y1, x2 y2, x y </code>or <code>c dx1 dy1, dx2 dy2, dx dy</code></li>
</ul>
<!---->

<ol start="2">
<li> Smooth Curveto</li>
</ol>
<ul>
<li> Â Â Så‘½ä»¤å¯ä»¥ç”¨æ¥åˆ›å»ºäºä¸å‰é¢ä¸€æ ·çš„è´å¡å°”æ›²çº¿ï¼Œå¦‚æœSå‘½ä»¤è·Ÿåœ¨ä¸€ä¸ªCæˆ–Så‘½ä»¤åé¢ï¼Œåˆ™å®ƒçš„ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹ä¼šè¢«å‡è®¾æˆå‰ä¸€ä¸ªå‘½ä»¤æ›²çº¿çš„ç¬¬äºŒä¸ªæ§åˆ¶ç‚¹çš„ä¸­å¿ƒå¯¹ç§°ç‚¹ã€‚å¦‚æœSå‘½ä»¤å•ç‹¬ä½¿ç”¨ï¼Œå‰é¢æ²¡æœ‰Cæˆ–è€…Så‘½ä»¤ï¼Œé‚£å½“å‰ç‚¹å°†ä½œä¸ºç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹ã€‚æœ€å¤§çš„ä½œç”¨å°±æ˜¯å…‰æ»‘åœ°è¿æ¥ä¸¤æ¡æ›²çº¿</li>
<li> <code>S x2 y2,x y</code> or <code>s dx2 dy2, dx dy</code></li>
</ul>
<blockquote>
<p>Cã€Så‘½ä»¤ä¾‹å­</p>
</blockquote>
<iframe height="300" style="width: 100%;" scrolling="no" title="feDisplacementMap" src="https://codepen.io/l-jour/embed/rNdmJma?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/l-jour/pen/rNdmJma"></a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>

<ol start="3">
<li> Quadratic BÃ©zier curveto</li>
</ol>
<ul>
<li>  Qå‘½ä»¤ç”¨æ¥åˆ›å»ºä¸€æ¡äºŒæ¬¡è´å¡å°”æ›²çº¿ï¼Œåªéœ€è¦ä¸€ä¸ªæ§åˆ¶ç‚¹</li>
<li>  <code>Q x1 y1,x y</code> or <code>q dx1 dx2,dx dy</code></li>
</ul>
<ol start="4">
<li> Smooth quadratic BÃ©zier curveto</li>
</ol>
<ul>
<li> Tå‘½ä»¤ç±»ä¼¼Så‘½ä»¤ï¼Œç”¨äºå¹³æ»‘é“¾æ¥äºŒæ¬¡è´å¡å°”æ›²çº¿</li>
<li> <code>T x1 y1 </code>or <code>t dx dy</code></li>
</ul>
<blockquote>
<p>Qã€Tå‘½ä»¤ä¾‹å­</p>
</blockquote>
<iframe height="300" style="width: 100%;" scrolling="no" title="feDisplacementMap" src="https://codepen.io/l-jour/embed/PoRJaqN?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/l-jour/pen/PoRJaqN"></a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>

<ol start="5">
<li> Arc</li>
</ol>
<ul>
<li>Aå‘½ä»¤ä¹Ÿå¯ä»¥ç”¨äºç»˜åˆ¶æ›²çº¿<ul>
<li>  <code>A rx ry x-axis-rotation large-arc-flag sweep-flag x y</code> <code>a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy</code></li>
<li>  Â Â å‚æ•°è¯´æ˜ï¼š</li>
<li>  Â Â rx ry: xã€yè½´åŠå¾„</li>
<li>  Â Â X-axis-rotation: ç»•xè½´æ—‹è½¬è§’åº¦</li>
<li>  Â Â large-arc-flagï¼š0-å¼§å°äº180åº¦ã€1-å¼§å¤§äº180åº¦</li>
<li>  Â Â sweep-flagï¼š0-é€†æ—¶é’ˆç”»å¼§ã€1-é¡ºæ—¶é’ˆç”»å¼§</li>
<li>  Â Â x yï¼šç»ˆç‚¹åæ ‡</li>
</ul>
</li>
</ul>
<h2 id="åŠ¨ç”»"><a href="#åŠ¨ç”»" class="headerlink" title="åŠ¨ç”»"></a>åŠ¨ç”»</h2><blockquote>
<p>æ”¾å…¥å½¢çŠ¶å…ƒç´ å†…éƒ¨ï¼Œåœ¨æŒ‡å®šçš„æ—¶é—´æ®µé‡Œï¼Œè®¾ç½®ç›¸å…³å±æ€§çš„å¼€å§‹ä¸ç»“æŸå€¼ï¼Œå˜åŒ–æ›²çº¿ç­‰ã€‚</p>
</blockquote>
<h3 id="åŠ¨ç”»å…ƒç´ "><a href="#åŠ¨ç”»å…ƒç´ " class="headerlink" title="åŠ¨ç”»å…ƒç´ "></a>åŠ¨ç”»å…ƒç´ </h3><ul>
<li>  animateï¼šç”¨æ¥å®šä¹‰ä¸€ä¸ªå…ƒç´ çš„æŸä¸ªå±æ€§åœ¨ç›¸åº”æ—¶é—´çš„å˜åŒ–</li>
<li>  animateTransformï¼šæ”¹å˜ç›®æ ‡å…ƒç´ ä¸Šçš„ä¸€ä¸ªå˜å½¢å±æ€§ï¼Œæ§åˆ¶æ—‹è½¬ã€ç¼©æ”¾ã€å¹³ç§»ã€æ–œåˆ‡å˜æ¢</li>
<li>  animateMotionï¼šå®šä¹‰ç›®æ ‡å…ƒç´ å¦‚ä½•æ²¿ä¸€ä¸ªè·¯å¾„è¿åŠ¨</li>
<li>  discardï¼šæŒ‡å®šåœ¨ä½•æ—¶ä¸¢å¼ƒç‰¹å®šå…ƒç´ ï¼Œä»è€Œå‡å°‘ SVG ç”¨æˆ·ä»£ç†æ‰€éœ€çš„èµ„æºã€‚</li>
<li>  mpathï¼šé…åˆanimateMotionï¼Œå¯ä»£æ›¿animateMotionçš„pathå±æ€§ï¼Œç”¨äºå¼•ç”¨ä¸€ä¸ªå¤–éƒ¨çš„path</li>
<li>  setï¼šå¯ä»¥ç”¨æ¥è®¾å®šä¸€ä¸ªå±æ€§å€¼ï¼Œå¹¶ä¸ºè¯¥å€¼èµ‹äºˆä¸€ä¸ªæŒç»­æ—¶é—´ã€‚å®ƒæ”¯æŒæ‰€æœ‰çš„å±æ€§ç±»å‹ï¼Œ åŒ…æ‹¬é‚£äº›åŸç†ä¸Šä¸èƒ½æ’å€¼çš„ï¼Œ ä¾‹å¦‚å€¼ä¸ºå­—ç¬¦ä¸²å’Œå¸ƒå°”ç±»å‹çš„å±æ€§ã€‚ set å…ƒç´ æ˜¯éå åŠ çš„ã€‚æ— æ³•åœ¨å…¶ä¸Šä½¿ç”¨ additive å±æ€§æˆ– accumulate å±æ€§ï¼Œå³ä½¿å£°æ˜äº†è¿™äº›å±æ€§ä¹Ÿä¼šè‡ªåŠ¨è¢«å¿½ç•¥ã€‚</li>
</ul>
<iframe height="300" style="width: 100%;" scrolling="no" title="feDisplacementMap" src="https://codepen.io/l-jour/embed/wvmrYLy?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/l-jour/pen/wvmrYLy"></a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>

<h3 id="åŠ¨ç”»å±æ€§"><a href="#åŠ¨ç”»å±æ€§" class="headerlink" title="åŠ¨ç”»å±æ€§"></a>åŠ¨ç”»å±æ€§</h3><p>è¿™é‡Œå¤§è‡´å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š</p>
<ol>
<li> å–å€¼å±æ€§ï¼šæ§åˆ¶è¦åŠ¨ç”»çš„å±æ€§ï¼ˆå¦‚xåæ ‡ï¼Œwidthç­‰å±æ€§ï¼‰çš„å€¼</li>
</ol>
<pre><code>-  **calcModeï¼š** è®¾ç½®åŠ¨ç”»çš„å˜åŒ–æ›²çº¿ï¼ˆdiscrete | linear | paced | splineï¼‰ï¼Œé™¤äº†animateMotioné»˜è®¤æ˜¯pacedå¤–ï¼Œå…¶ä»–æ˜¯é»˜è®¤linearï¼Œå½“ä¸€äº›ä¸æ”¯æŒçº¿æ€§å˜åŒ–çš„å±æ€§å€¼ï¼ˆstringç±»å‹çš„ï¼‰å°±ä¼šå˜ä¸ºdiscreteã€‚

-  **valuesï¼š** å®šä¹‰åŠ¨ç”»è¿‡ç¨‹ä¸­çš„å€¼åºåˆ—ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªå€¼çš„åˆ†å·åˆ†éš”åˆ—è¡¨ï¼‰çš„å€¼ã€‚ å¦‚æœæŒ‡å®šäº†æ­¤å±æ€§ï¼Œåˆ™å°†å¿½ç•¥åœ¨å…ƒç´ ä¸Šè®¾ç½®çš„ä»»ä½• `from`, `to`, å’Œ `by` å±æ€§å€¼ã€‚

-  **keyTimesï¼š** ä»¥åˆ†å·åˆ†éš”çš„æ—¶é—´å€¼åˆ—è¡¨ï¼Œç”¨äºæ§åˆ¶åŠ¨ç”»çš„æ‰§è¡Œæ­¥éª¤ã€‚åˆ—è¡¨ä¸­çš„æ¯ä¸ªå€¼ä¸`values`ä¸­çš„å€¼ä¸€ä¸€å¯¹åº”ï¼Œå®šä¹‰äº†`values`ä¸­çš„å€¼åœ¨åŠ¨ç”»ä¸­ä½•æ—¶æ‰§è¡Œï¼ŒkeyTimes åˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½æ˜¯æŒ‡å®šåœ¨ [0-1] ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œè¡¨ç¤ºåŠ¨ç”»çš„å®Œæˆæ—¶é—´ã€‚æ¯ä¸€ä¸ªè¿ç»­çš„æ—¶é—´å€¼å¿…é¡»å¤§äºç­‰äºå‰ä¸€ä¸ªæ—¶é—´å€¼ã€‚

    -   å¯¹äº linear å’Œ splineåŠ¨ç”»ï¼Œåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªæ—¶é—´å€¼å¿…é¡»ä¸º 0ï¼Œåˆ—è¡¨çš„æœ€åä¸€ä¸ªæ—¶é—´å€¼å¿…é¡»ä¸º 1ã€‚ä¸æ¯ä¸ª value å…³è”çš„æ—¶é—´å€¼å®šä¹‰äº†ä½•æ—¶è®¾ç½®è¯¥ valueï¼Œè¯¥ value åœ¨ keyTimes çš„æ—¶é—´ å€¼çš„ä¸­é—´æ’å€¼ã€‚
    -   å¯¹äº discreteåŠ¨ç”»ï¼Œåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå€¼å¿…é¡»ä¸º 0ã€‚ä¸æ¯ä¸ª value å…³è”çš„æ—¶é—´å€¼å®šä¹‰äº†ä½•æ—¶è®¾ç½®è¯¥ valueï¼ŒåŠ¨ç”»å‡½æ•°ä½¿ç”¨è¯¥ valueï¼Œç›´åˆ° keyTimes ä¸­å®šä¹‰çš„ä¸‹ä¸€ä¸ªæ—¶é—´å€¼ã€‚
    -   å¦‚æœæ’å€¼æ¨¡å¼æ˜¯ pacedåŠ¨ç”»ï¼ŒkeyTimes å±æ€§è¢«å¿½ç•¥ã€‚

-  **keySplinesï¼š** å®šä¹‰äº†ä¸€ç»„ä¸ keyTimes åˆ—è¡¨å…³è”çš„ BÃ©zier æ›²çº¿æ§åˆ¶ç‚¹ï¼Œå®šä¹‰äº†ä¸€ä¸ªæ§åˆ¶é—´éš”ï¼ˆkeyTimesçš„å€¼åˆ—è¡¨é•¿åº¦å‡1å³ä¸ºé—´éš”æ•°ï¼‰çš„ä¸‰æ¬¡ BÃ©zier å‡½æ•°ã€‚åªæœ‰splineåŠ¨ç”»æ‰ä¼šæœ‰æ•ˆã€‚

-  **fromï¼š** æŒ‡å®šå±æ€§çš„å¼€å§‹å€¼

-  **byï¼š** æŒ‡å®šå°†åœ¨åŠ¨ç”»æœŸé—´ä¿®æ”¹çš„å±æ€§çš„ç›¸å¯¹åç§»å€¼

-  **toï¼š** è¡¨ç¤ºå°†åœ¨åŠ¨ç”»æœŸé—´ä¿®æ”¹çš„å±æ€§çš„æœ€ç»ˆå€¼
</code></pre>
<blockquote>
<p>å–å€¼å±æ€§ä¾‹å­</p>
</blockquote>
  <iframe height="300" style="width: 100%;" scrolling="no" title="feDisplacementMap" src="https://codepen.io/l-jour/embed/WNzdXNZ?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
    See the Pen <a href="https://codepen.io/l-jour/pen/WNzdXNZ"></a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
    on <a href="https://codepen.io">CodePen</a>.
  </iframe>

<ol start="2">
<li> æ—¶é—´å±æ€§ï¼šæ§åˆ¶åŠ¨ç”»å¦‚ä½•å¼€å§‹ï¼Œä½•æ—¶å¼€å§‹ã€é‡å¤æ¬¡æ•°ç­‰</li>
</ol>
<pre><code>-  **beginï¼š** åŠ¨ç”»å¼€å§‹æ—¶é—´

-  **endï¼š** åŠ¨ç”»ç»“æŸæ—¶é—´

-  **durï¼š** åŠ¨ç”»æŒç»­æ—¶é—´

-  **min/maxï¼š** é™åˆ¶åŠ¨ç”»çš„æœ€å°/å¤§æŒç»­æ—¶é—´

-  **restartï¼š** æ§åˆ¶åŠ¨ç”»æ˜¯å¦å¯ä»¥é‡æ–°å¼€å§‹

    -   `always` ï¼šä»»ä½•æ—¶å€™éƒ½å¯é‡æ–°å¼€å§‹
    -   `whenNotActive` ï¼šéåŠ¨ç”»æ—¶å¯é‡æ–°å¼€å§‹
    -   `never` ï¼šä»»ä½•æ—¶å€™éƒ½ä¸èƒ½é‡æ–°å¼€å§‹

-  **repeatCountï¼š** æŒ‡å®šåŠ¨ç”»é‡å¤çš„æ¬¡æ•°ã€å€¼å¿…é¡»å¤§äº 0ã€‚

-  **repeatDurï¼š** æŒ‡å®šåŠ¨ç”»çš„é‡å¤æ—¶é—´

-  **fillï¼š** æ§åˆ¶åŠ¨ç”»ç»“æŸæ—¶çš„çŠ¶æ€ã€‚æœ‰ä¸¤ä¸ªå€¼å¯é€‰

    -   removeï¼šåœ¨åŠ¨ç”»çš„æ¿€æ´»æŒç»­æ—¶é—´ç»“æŸåï¼ŒåŠ¨ç”»æ•ˆæœä¼šç§»é™¤ï¼ˆä¸å†åº”ç”¨ï¼‰ã€‚åœ¨åŠ¨ç”»çš„æ¿€æ´»ç»“æŸåï¼ŒåŠ¨ç”»ä¸å†å¯¹ç›®æ ‡å…ƒç´ æœ‰å½±å“ï¼ˆé™¤éåŠ¨ç”»é‡æ–°å¼€å§‹ï¼‰ã€‚
    -   freezeï¼šåœ¨åŠ¨ç”»æ¿€æ´»æŒç»­æ—¶é—´ç»“æŸåï¼Œæ–‡æ¡£æŒç»­æ—¶é—´çš„å‰©ä½™æ—¶é—´é‡Œï¼ˆæˆ–è€…ç›´åˆ°åŠ¨ç”»é‡æ–°å¼€å§‹ï¼‰åŠ¨ç”»æ•ˆæœä¼šâ€œå†»ç»“â€ç€ã€‚ï¼ˆä¿æŒåŠ¨ç”»ç»ˆæ€ï¼‰
</code></pre>
<ol start="3">
<li> ç›®æ ‡å±æ€§ï¼šæ§åˆ¶è¦åŠ¨ç”»çš„å±æ€§</li>
</ol>
<pre><code>-  **ttributeTypeï¼š** å½“attributeType=&quot;XML&quot;æ—¶ï¼ŒattributeNameè¢«è®¤ä¸ºæ˜¯XMLçš„å±æ€§ï¼›å½“attributeType=&quot;CSS&quot;æ—¶ï¼ŒattributeNameè¢«è®¤ä¸ºæ˜¯cssçš„å±æ€§ï¼›ä¸æŒ‡å®šattributeTypeæ—¶ï¼Œé»˜è®¤ä¸º&quot;auto&quot;ï¼Œä¼šå…ˆå°†attributeNameä½œä¸ºcssçš„å±æ€§ï¼Œå¦‚æœæ— æ•ˆï¼Œå†å°†attributeNameä½œä¸ºXMLçš„å±æ€§ã€‚
-  **attributeNameï¼š** è¦åŠ¨ç”»çš„å±æ€§å
</code></pre>
<!---->

<ol start="4">
<li> å…¶ä»–å±æ€§ï¼šadditiveã€accumulate</li>
</ol>
<pre><code>-  **additiveï¼š** æ§åˆ¶åŠ¨ç”»å±æ€§æ˜¯å¦æ˜¯é™„åŠ çš„ã€‚
-  **accumulateï¼š** åœ¨åŸæ¥çš„ç»“æœçš„åŸºç¡€ä¸Šé‡å¤åŠ¨ç”»çš„æ—¶å€™æ¯ä¸€æ¬¡å¾ªç¯éƒ½ç´¯åŠ ã€‚è¿™ä¸ªå±æ€§å‘Šè¯‰åŠ¨ç”»æ˜¯å¦æ˜¯æ¯æ¬¡å¾ªç¯ï¼Œå‰ä¸€ä¸ªåŠ¨ç”»å±æ€§å€¼è¦åŠ ä¸Šå»ã€‚éœ€è¦è®¾ç½®fromä¸toå±æ€§ã€‚
</code></pre>
<blockquote>
<p>additiveã€accumulateä¾‹å­</p>
</blockquote>
  <iframe height="300" style="width: 100%;" scrolling="no" title="feDisplacementMap" src="https://codepen.io/l-jour/embed/PoREOjj?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
    See the Pen <a href="https://codepen.io/l-jour/pen/PoREOjj"></a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
    on <a href="https://codepen.io">CodePen</a>.
  </iframe>

<h2 id="ç»“æ„å…ƒç´ "><a href="#ç»“æ„å…ƒç´ " class="headerlink" title="ç»“æ„å…ƒç´ "></a>ç»“æ„å…ƒç´ </h2><blockquote>
<p>ç»“æ„å…ƒç´ å…³æ³¨çš„æ˜¯å¤ç”¨</p>
</blockquote>
<ul>
<li>  <strong>defsï¼š</strong> å®šä¹‰ä¸€ä¸ªå¤ç”¨çš„å›¾å½¢ã€‚åœ¨<code>defs</code>å…ƒç´ ä¸­å®šä¹‰çš„å›¾å½¢å…ƒç´ ä¸ä¼šç›´æ¥å‘ˆç°ã€‚ ä½ å¯ä»¥åœ¨ä½ çš„è§†å£çš„ä»»æ„åœ°æ–¹åˆ©ç”¨ <code>use</code>å…ƒç´ å‘ˆç°è¿™äº›å…ƒç´ ã€‚</li>
</ul>
<!---->

<ul>
<li>  <strong>gï¼š</strong> ç»„åˆå­å…ƒç´ çš„å®¹å™¨ï¼Œgå…ƒç´ çš„å±æ€§ä¼šè¢«å…¶æ‰€æœ‰çš„å­å…ƒç´ ç»§æ‰¿ ã€‚ä¸<code>defs</code>ç›¸æ¯”ï¼Œgå®šä¹‰çš„é™¤äº†å¤ç”¨å¤–ï¼Œåœ¨å®šä¹‰æ—¶ä¼šè¿›è¡Œæ¸²æŸ“ã€‚</li>
</ul>
<!---->

<ul>
<li>  <strong>symbolï¼š</strong> å®šä¹‰ä¸€ä¸ªå›¾å½¢æ¨¡ç‰ˆå¯¹è±¡ï¼Œä½¿ç”¨<code>use</code>å…ƒç´ å®ä¾‹åŒ–ã€‚<code>symbol</code>å…ƒç´ å¯¹å›¾å½¢çš„ä½œç”¨æ˜¯åœ¨åŒä¸€æ–‡æ¡£ä¸­å¤šæ¬¡ä½¿ç”¨ï¼Œæ·»åŠ ç»“æ„å’Œè¯­ä¹‰ã€‚symbolé€šè¿‡<code>use</code>è°ƒç”¨æ—¶ï¼Œ<code> &lt;use  ``/``&gt;</code>å¯ä»¥è®¾ç½®heightã€widthæ§åˆ¶å®é™…ç»˜åˆ¶çš„å¤§å°ã€‚</li>
</ul>
<!---->

<ul>
<li>  <strong>svg</strong> <strong>ï¼š</strong> å¦‚æœ <code>svg</code> ä¸æ˜¯æ ¹å…ƒç´ ï¼Œ<code>svg</code> å…ƒç´ å¯ä»¥ç”¨äºåœ¨å½“å‰æ–‡æ¡£ï¼ˆæ¯”å¦‚è¯´ï¼Œä¸€ä¸ª HTML æ–‡æ¡£ï¼‰å†…åµŒå¥—ä¸€ä¸ªç‹¬ç«‹çš„ svg ç‰‡æ®µ ã€‚ è¿™ä¸ªç‹¬ç«‹ç‰‡æ®µæ‹¥æœ‰ç‹¬ç«‹çš„è§†å£å’Œåæ ‡ç³»ç»Ÿã€‚</li>
</ul>
<!---->

<ul>
<li><p><strong>markerï¼š</strong> å®šä¹‰äº†åœ¨ç‰¹å®šçš„pathå…ƒç´ ã€lineå…ƒç´ ã€polylineå…ƒç´ æˆ–è€…polygonå…ƒç´ ä¸Šç»˜åˆ¶ç®­å¤´æˆ–è€…å¤šè¾¹å½¢æ ‡è®°å›¾å½¢ã€‚</p>
<ul>
<li>  refxï¼šå®šä¹‰å…ƒç´ å‚è€ƒç‚¹çš„xåæ ‡ (é»˜è®¤æ˜¯0)</li>
<li>  refyï¼šå®šä¹‰å…ƒç´ å‚è€ƒç‚¹çš„yåæ ‡ (é»˜è®¤æ˜¯0)</li>
<li>  markerWidthï¼šè¡¨ç¤ºæ ¹æ® viewBox å’Œ preserveAspectRatio å±æ€§æ¸²æŸ“ <code>&lt;marker&gt;</code> æ—¶è¦é€‚åˆçš„è§†å£å®½åº¦</li>
<li>  markerHeightï¼šè¡¨ç¤ºæ ¹æ® viewBox å’Œ preserveAspectRatio å±æ€§æ¸²æŸ“ <code>&lt;marker&gt; </code>æ—¶è¦é€‚åˆçš„è§†å£é«˜åº¦</li>
<li>  markerUnitsï¼šæŒ‡ç¤ºæ ‡è®°æ”¾ç½®åœ¨å½¢çŠ¶ä¸Šçš„ä½ç½®æ—¶å¦‚ä½•æ—‹è½¬</li>
</ul>
</li>
</ul>
<!---->

<ul>
<li>  mask</li>
</ul>
<iframe height="300" style="width: 100%;" scrolling="no" title="feDisplacementMap" src="https://codepen.io/l-jour/embed/GRxmgEN?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/l-jour/pen/GRxmgEN"></a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>

<h2 id="æ»¤é•œå…ƒç´ "><a href="#æ»¤é•œå…ƒç´ " class="headerlink" title="æ»¤é•œå…ƒç´ "></a>æ»¤é•œå…ƒç´ </h2><h3 id="ç›¸å…³æ ‡ç­¾"><a href="#ç›¸å…³æ ‡ç­¾" class="headerlink" title="ç›¸å…³æ ‡ç­¾"></a>ç›¸å…³æ ‡ç­¾</h3><blockquote>
<p>æ»¤é•œé€šè¿‡<code>&lt;filter&gt;</code>åœ¨<code>&lt;defs&gt;</code>ä¸­è¿›è¡Œå®šä¹‰ï¼Œåœ¨filteræ ‡ç­¾ä¸­æä¾›ä¸€ç³»åˆ—å›¾å…ƒï¼Œä½¿ç”¨æ»¤é•œåªéœ€ä¸ºsvgå…ƒç´ è®¾ç½®filterå±æ€§å³å¯ã€‚</p>
</blockquote>
<h3 id="å¸¸è§å±æ€§"><a href="#å¸¸è§å±æ€§" class="headerlink" title="å¸¸è§å±æ€§"></a>å¸¸è§å±æ€§</h3><p>  inï¼šæ ‡è¯†è¾“å…¥çš„åŸè¯­</p>
<pre><code>-   SourceGraphicï¼šè¯¥å…³é”®è¯è¡¨ç¤ºå›¾å½¢å…ƒç´ è‡ªèº«å°†ä½œä¸º`&lt;filter&gt;`åŸè¯­çš„åŸå§‹è¾“å…¥
-   SourceAlphaï¼šè¯¥å…³é”®è¯è¡¨ç¤ºå›¾å½¢å…ƒç´ è‡ªèº«å°†ä½œä¸º`&lt;filter&gt;`åŸè¯­çš„åŸå§‹è¾“å…¥. SourceAlpha ä¸ SourceGraphic å…·æœ‰ç›¸åŒçš„è§„åˆ™é™¤äº† SourceAlpha åªä½¿ç”¨å…ƒç´ çš„é€æ˜åº¦ã€‚
-   BackgroundImageï¼šè¯¥å…³é”®è¯è¡¨ç¤º filter å…ƒç´ å½“å‰åº•ä¸‹çš„åŒºåŸŸçš„å›¾å½¢å¿«ç…§å°†è¢«è°ƒç”¨ã€‚
-   BackgroundAlphaï¼šBackgroundImage ç›¸åŒé™¤äº†åªä½¿ç”¨é€æ˜åº¦ã€‚
-   FillPaintï¼šæ­¤å…³é”®å­—è¡¨ç¤ºè¿‡æ»¤æ•ˆæœçš„ç›®æ ‡å…ƒç´ ä¸Šçš„`fill`å±æ€§å€¼ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼ŒFillPaint åœ¨ä»»ä½•åœ°æ–¹éƒ½æ˜¯ä¸é€æ˜çš„ï¼Œä½†å¦‚æœå½¢çŠ¶æ˜¯ä½¿ç”¨æ¸å˜æˆ–å›¾æ¡ˆç»˜åˆ¶çš„ï¼Œå®ƒæœ¬èº«åŒ…æ‹¬é€æ˜æˆ–åŠé€æ˜éƒ¨åˆ†ï¼Œåˆ™æƒ…å†µå¯èƒ½å¹¶éå¦‚æ­¤ã€‚
-   StrokePaintï¼šæ­¤å…³é”®å­—è¡¨ç¤ºæ»¤é•œæ•ˆæœçš„ç›®æ ‡å…ƒç´ ä¸Šçš„ç¬”ç”»å±æ€§çš„å€¼ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼ŒStrokePaint åœ¨ä»»ä½•åœ°æ–¹éƒ½æ˜¯ä¸é€æ˜çš„ï¼Œä½†å¦‚æœå½¢çŠ¶æ˜¯ä½¿ç”¨æ¸å˜æˆ–å›¾æ¡ˆç»˜åˆ¶çš„ï¼Œå®ƒæœ¬èº«åŒ…æ‹¬é€æ˜æˆ–åŠé€æ˜éƒ¨åˆ†ï¼Œåˆ™æƒ…å†µå¯èƒ½å¹¶éå¦‚æ­¤ã€‚
</code></pre>
<!---->

<p>  in2ï¼šin2 å±æ€§æ ‡è¯†ç»™å®šfilteråŸè¯­çš„ç¬¬äºŒä¸ªè¾“å…¥ã€‚å®ƒçš„å·¥ä½œåŸç†ä¸ in å±æ€§å®Œå…¨ç›¸åŒã€‚</p>
<blockquote>
<p>colorMatrixé¢œè‰²çŸ©é˜µå˜æ¢</p>
</blockquote>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* R G B A 1 é¢œè‰²çŸ©é˜µè®¡ç®— */</span></span><br><span class="line"> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="comment">// R = 1*R + 0*G + 0*B + 0*A + 0 </span></span><br><span class="line"> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="comment">// G = 0*R + 1*G + 0*B + 0*A + 0 </span></span><br><span class="line"> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="comment">// B = 0*R + 0*G + 1*B + 0*A + 0 </span></span><br><span class="line"> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="comment">// A = 0*R + 0*G + 0*B + 1*A + 0</span></span><br></pre></td></tr></table></figure>

<iframe height="300" style="width: 100%;" scrolling="no" title="feDisplacementMap" src="https://codepen.io/l-jour/embed/xxWzjde?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/l-jour/pen/xxWzjde"></a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>


<blockquote>
<p>ä½¿ç”¨feGaussianBlurã€feColorMatrixã€feBlendå®ç°ç²˜ç¨ æ•ˆæœ</p>
</blockquote>
<iframe height="300" style="width: 100%;" scrolling="no" title="feDisplacementMap" src="https://codepen.io/l-jour/embed/JjLZbQO?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/l-jour/pen/JjLZbQO"></a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>


<blockquote>
<p>ä½¿ç”¨feCompositeå¹¶è®¾ç½®operatorä¸ºinï¼Œæ§åˆ¶æ˜¾ç¤ºå›¾åƒçš„ä¸€éƒ¨åˆ†ã€‚</p>
</blockquote>
<p>å…³äºfeCompositeï¼Œæ›´å¤šå¯ä»¥çœ‹è¿™é‡Œï¼š<a href="https://apike.ca/prog_svg_filter_feComposite.html">feComposite</a></p>
<iframe height="300" style="width: 100%;" scrolling="no" title="feDisplacementMap" src="https://codepen.io/l-jour/embed/wvmXOwZ?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/l-jour/pen/wvmXOwZ"></a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>


<blockquote>
<p>feDisplacementMapã€feTurbulence</p>
</blockquote>
<p>feDisplacementMapæ¨èçœ‹è¿™ç¯‡ï¼š<a href="https://www.zhangxinxu.com/wordpress/2017/12/understand-svg-fedisplacementmap-filter/">æ·±å…¥ç†è§£SVG feDisplacementMapæ»¤é•œåŠå®é™…åº”ç”¨</a></p>
<p>feTurbulenceæ¨èçœ‹è¿™ç¯‡ï¼š<a href="https://zhuanlan.zhihu.com/p/366438535">è¯´è¯´SVGçš„feTurbulenceæ»¤é•œ</a></p>
<p>ä½ç½®è½¬æ¢å…¬å¼ï¼š</p>
<p><code>P&#39;(x,y) â† P(x + scale * (XC(x,y) - 0.5), y + scale * (YC(x,y) - 0.5))</code></p>
<iframe height="300" style="width: 100%;" scrolling="no" title="feDisplacementMap" src="https://codepen.io/l-jour/embed/OJvwJqV?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/l-jour/pen/OJvwJqV"></a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>

<h2 id="æ¸å˜å…ƒç´ "><a href="#æ¸å˜å…ƒç´ " class="headerlink" title="æ¸å˜å…ƒç´ "></a>æ¸å˜å…ƒç´ </h2><h3 id="linearGradientï¼šçº¿æ€§æ¸å˜"><a href="#linearGradientï¼šçº¿æ€§æ¸å˜" class="headerlink" title="linearGradientï¼šçº¿æ€§æ¸å˜"></a>linearGradientï¼šçº¿æ€§æ¸å˜</h3><ul>
<li>  gradientUnits: æ§åˆ¶æ¸å˜åæ ‡çš„å•ä½</li>
<li>  gradientTransform: å¯¹æ¸å˜åæ ‡ç³»è¿›è¡Œå˜æ¢ï¼ˆtranslateã€skewã€rotateã€‚ã€‚ã€‚ï¼‰</li>
<li>  x1ï¼šçº¿æ€§æ¸å˜èµ·ç‚¹xåæ ‡-   y1ï¼šçº¿æ€§æ¸å˜èµ·ç‚¹yåæ ‡</li>
<li>  x2ï¼šçº¿æ€§æ¸å˜ç»ˆç‚¹xåæ ‡-   y2ï¼šçº¿æ€§æ¸å˜ç»ˆç‚¹yåæ ‡</li>
<li>  spreadMethodï¼šå®šä¹‰å¦‚ä½•åœ¨æ¸å˜ä¹‹å¤–å¡«å……    -   padï¼šç”¨æ¸å˜ç»ˆç‚¹é¢œè‰²å»å¡«å……é¢å¤–åŒºåŸŸ    -   repeatï¼šæŒ‰ç…§å¼€å§‹çš„æ¸å˜é¡ºåºé‡å¤    -   reflectï¼šæŒ‰ç…§å¼€å§‹çš„æ¸å˜ç›¸åé¡ºåºé‡å¤</li>
</ul>
  <iframe height="300" style="width: 100%;" scrolling="no" title="feDisplacementMap" src="https://codepen.io/l-jour/embed/JjLMMjR?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
    See the Pen <a href="https://codepen.io/l-jour/pen/JjLMMjR"></a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
    on <a href="https://codepen.io">CodePen</a>.
  </iframe>

<h3 id="radialGradientï¼šå¾„å‘æ¸å˜"><a href="#radialGradientï¼šå¾„å‘æ¸å˜" class="headerlink" title="radialGradientï¼šå¾„å‘æ¸å˜"></a>radialGradientï¼šå¾„å‘æ¸å˜</h3><ul>
<li>  gradientUnitsï¼šæ§åˆ¶æ¸å˜åæ ‡çš„å•ä½</li>
<li>  gradientTransformï¼šå¯¹æ¸å˜åæ ‡ç³»è¿›è¡Œå˜æ¢ï¼ˆtranslateã€skewã€rotateã€‚ã€‚ã€‚ï¼‰</li>
<li>  cx: ç”¨æ¥å®šä¹‰å¾„å‘æ¸å˜ç»ˆæ­¢åœ†çš„ x è½´åæ ‡(é»˜è®¤50%)ã€‚</li>
<li>  cyï¼šç”¨æ¥å®šä¹‰å¾„å‘æ¸å˜ç»ˆæ­¢åœ†çš„ y è½´åæ ‡ã€‚</li>
<li>  rï¼šç”¨æ¥å®šä¹‰å¾„å‘æ¸å˜ç»ˆæ­¢åœ†çš„åŠå¾„ã€‚</li>
<li>  fxï¼šç”¨æ¥å®šä¹‰å¾„å‘æ¸å˜çš„ç„¦ç‚¹çš„ x è½´åæ ‡</li>
<li>  fyï¼šç”¨æ¥å®šä¹‰å¾„å‘æ¸å˜çš„ç„¦ç‚¹çš„ y è½´åæ ‡</li>
<li>  spreadMethodï¼šç¡®å®šå¦‚ä½•åœ¨æ¸å˜çš„å®šä¹‰è¾¹ç¼˜ä¹‹å¤–å¡«å……å½¢çŠ¶ã€‚    -   padï¼šç”¨æ¸å˜ç»ˆç‚¹é¢œè‰²å»å¡«å……é¢å¤–åŒºåŸŸ    -   repeatï¼šæŒ‰ç…§å¼€å§‹çš„æ¸å˜é¡ºåºé‡å¤    -   reflectï¼šæŒ‰ç…§å¼€å§‹çš„æ¸å˜ç›¸åé¡ºåºé‡å¤</li>
<li>  stopï¼šæ¸å˜çš„é¢œè‰²å¡åº¦</li>
</ul>
<iframe height="300" style="width: 100%;" scrolling="no" title="svg-radialgradient" src="https://codepen.io/l-jour/embed/zYWWLBa?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/l-jour/pen/zYWWLBa">
  svg-radialgradient</a> by L-jour (<a href="https://codepen.io/l-jour">@l-jour</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>

<h2 id="å…³äºsvgä¸canvas"><a href="#å…³äºsvgä¸canvas" class="headerlink" title="å…³äºsvgä¸canvas"></a>å…³äºsvgä¸canvas</h2><p>  å¯ä»¥çœ‹çœ‹msdnçš„æ–‡ç« <a href="https://docs.microsoft.com/zh-cn/previous-versions/msdn10/Hh377884(v=MSDN.10)">å¦‚ä½•ä¸ºæ‚¨çš„ç½‘ç«™åœ¨Canvaså’ŒSVGä¹‹é—´åšå‡ºé€‰æ‹©</a></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>  svgçš„ä¸–ç•Œéå¸¸ä¸°å¯Œï¼Œå¹¶ä¸”å¾ˆå¤šå±æ€§å¯ä»¥ä½œç”¨ä¸åŒçš„å…ƒç´ ã€æ‹¥æœ‰ä¸åŒçš„æ•ˆæœã€‚å…ƒç´ ç›´æ¥æœ‰å¯ä»¥æ­é…ä½¿ç”¨ï¼Œå¦‚å¤šä¸ªåŠ¨ç”»ï¼Œå¤šä¸ªæ»¤é•œç­‰ç­‰ï¼Œæ»¤é•œå…ƒç´ è¿˜æ¶‰åŠæ›´å¤šé¢†åŸŸçŸ¥è¯†ã€‚æ€»ä¹‹ï¼Œå…ƒç´ ç§ç±»ã€å…ƒç´ å±æ€§éå¸¸å¤šï¼Œè¿˜æ˜¯éœ€è¦å¾—æ…¢æ…¢åœ°å­¦ä¹ ã€é˜…è¯»ç›¸å…³çš„æ¡ˆä¾‹å¹¶æ“ä½œä¸€ä¸‹æ‰èƒ½æœ‰æ‰€æŒæ¡ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li>  <a href="https://apike.ca/prog_svg_filter_feComposite.html">feComposite</a></li>
<li>  <a href="https://zh.wikipedia.org/zh-cn/%E8%B2%9D%E8%8C%B2%E6%9B%B2%E7%B7%9A">è´å¡å°”æ›²çº¿-wiki</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>ã€è¯‘ã€‘ä¼˜åŒ–é•¿ä»»åŠ¡ Optimize long tasks</title>
    <url>/2022/10/11/%E3%80%90%E8%AF%91%E3%80%91%E4%BC%98%E5%8C%96%E9%95%BF%E4%BB%BB%E5%8A%A1-Optimize-long-tasks/</url>
    <content><![CDATA[<p>åŸæ–‡ï¼š<a href="https://web.dev/optimize-long-tasks/">https://web.dev/optimize-long-tasks/</a></p>
<blockquote>
<p>ä½ æ›¾è¢«å‘Šè¯‰è¿‡ï¼Œä¸è¦é˜»å¡ä¸»çº¿ç¨‹å¹¶ä¸”åˆ†è§£ä½ çš„é•¿ä»»åŠ¡ï¼Œä½†æ˜¯æœ‰æƒ³è¿‡è¿™æ ·åšçš„æ„ä¹‰å—ï¼Ÿ</p>
</blockquote>
<p>å¦‚æœä½ è¯»äº†å¾ˆå¤šå…³äºç½‘ç«™æ€§èƒ½çš„èµ„æ–™, ä¿æŒ JavasScript åº”ç”¨ç¨‹åºå¿«é€Ÿè¿è¡Œçš„å»ºè®®å¾€å¾€æ¶‰åŠä»¥ä¸‹çš„å»ºè®®ï¼š</p>
<ul>
<li>ä¸è¦é˜»å¡ä¸»çº¿ç¨‹</li>
<li>åˆ†è§£ä½ çš„é•¿ä»»åŠ¡</li>
</ul>
<p>é‚£è¿™äº›æ„å‘³ç€ä»€ä¹ˆï¼Ÿå‡å°‘ JavaScript æ˜¯å¥½çš„ï¼Œä½†è¿™æ˜¯å¦è‡ªåŠ¨ç­‰åŒåœ¨æ•´ä¸ªé¡µé¢ç”Ÿå‘½å‘¨æœŸä¸­æ›´å¿«é€Ÿçš„ç”¨æˆ·ç•Œé¢ï¼Ÿä¹Ÿè®¸æ˜¯ï¼Œä¹Ÿè®¸ä¸æ˜¯.</p>
<span id="more"></span>

<h2 id="ä¸€ä¸ª-task-æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ"><a href="#ä¸€ä¸ª-task-æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ" class="headerlink" title="ä¸€ä¸ª task æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ"></a>ä¸€ä¸ª task æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</h2><p>ä¸€ä¸ª task æ˜¯æµè§ˆå™¨æ‰€åšçš„ä»»ä½•ç¦»æ•£çš„å·¥ä½œï¼Œtask åŒ…æ‹¬è§£æ HTML å’Œ CSS, è¿è¡Œ JavaScript ä»£ç , ä»¥åŠä¸€äº›ä½ ä¸èƒ½ç›´æ¥æ§åˆ¶çš„äº‹æƒ…ã€‚å¯¹äºæ‰€æœ‰çš„è¿™äº›ï¼Œä½ æ‰€ç¼–å†™çš„å¹¶ä¸”éƒ¨ç½²åˆ°æœåŠ¡å™¨çš„ JavaScript æ˜¯ä¸»è¦çš„ä»»åŠ¡æ¥æºã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/2022-10-11%2019.23.12.png" alt="img_1"></p>
<p>Tasks ä»¥å¤šç§æ–¹å¼å½±å“æ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œå½“æµè§ˆå™¨åœ¨å¯åŠ¨æ—¶ä¸‹è½½ js æ–‡ä»¶æ—¶ï¼Œæµè§ˆå™¨å°†ä»»åŠ¡è¿›è¡Œæ’é˜Ÿå¹¶ä¸”ç¼–è¯‘ js ä»¥è®©å…¶èƒ½è¢«æ‰§è¡Œã€‚ç„¶ååœ¨é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œï¼ˆä¾‹å¦‚é€šè¿‡äº‹ä»¶å¤„ç†ç¨‹åºé©±åŠ¨äº¤äº’ã€JavaScript é©±åŠ¨çš„åŠ¨ç”»å’Œåå°æ´»åŠ¨ï¼ˆä¾‹å¦‚åˆ†ææ”¶é›†ï¼‰ï¼‰å¯åŠ¨ä»»åŠ¡ã€‚æ‰€æœ‰çš„è¿™äº›ä¸œè¥¿ï¼Œé™¤äº† web worker å’Œç±»ä¼¼çš„ API éƒ½å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹ä¸Šã€‚</p>
<h2 id="ä¸»çº¿ç¨‹æ˜¯ä»€ä¹ˆ-ï¼Ÿ"><a href="#ä¸»çº¿ç¨‹æ˜¯ä»€ä¹ˆ-ï¼Ÿ" class="headerlink" title="ä¸»çº¿ç¨‹æ˜¯ä»€ä¹ˆ ï¼Ÿ"></a>ä¸»çº¿ç¨‹æ˜¯ä»€ä¹ˆ ï¼Ÿ</h2><p>ä¸»çº¿ç¨‹æ˜¯å¤§å¤šæ•°ä»»åŠ¡åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„åœ°æ–¹ã€‚å®ƒè¢«ç§°ä¸ºä¸»çº¿ç¨‹çš„åŸå› æ˜¯ï¼šå®ƒæ˜¯æ‚¨ç¼–å†™çš„å‡ ä¹æ‰€æœ‰ JavaScript éƒ½åœ¨è¿™ä¸ªçº¿ç¨‹ä¸­å·¥ä½œã€‚</p>
<p>ä¸»çº¿ç¨‹ä¸€æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªä»»åŠ¡ã€‚å½“ä»»åŠ¡è¶…å‡ºæŸä¸ªç¡®å®šçš„ç‚¹ï¼ˆå‡†ç¡®æ¥è¯´æ˜¯ 50ms ï¼‰æ—¶,å®ƒä»¬è¢«å½’ç±»ä¸ºé•¿ä»»åŠ¡ã€‚å¦‚æœç”¨æˆ·åœ¨é•¿æ—¶é—´çš„ä»»åŠ¡è¿è¡Œæ—¶å°è¯•ä¸é¡µé¢äº¤äº’ â€” æˆ–è€…å¦‚æœéœ€è¦è¿›è¡Œé‡è¦çš„æ¸²æŸ“æ›´æ–° â€” æµè§ˆå™¨å°†å»¶è¿Ÿå¤„ç†è¯¥å·¥ä½œã€‚è¿™ä¼šå¯¼è‡´äº¤äº’æˆ–æ¸²æŸ“å»¶è¿Ÿã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/2022-10-11%2019.42.24.png" alt="img_2"></p>
<p><em style="font-size:12px">Chromeæµè§ˆå™¨çš„æ€§èƒ½åˆ†æå™¨ä¸­æè¿°çš„é•¿ä»»åŠ¡ã€‚é•¿ä»»åŠ¡çš„è§’è½é‡Œæœ‰ä¸€ä¸ªçº¢è‰²çš„ä¸‰è§’å½¢ï¼Œä»»åŠ¡çš„é˜»å¡éƒ¨åˆ†ç”¨å¯¹è§’çº¿çš„çº¢è‰²æ¡çº¹å¡«å……</em></p>
<p>ä½ éœ€è¦åˆ†è§£ä»»åŠ¡ã€‚è¿™æ„å‘³ç€å°†ä¸€ä¸ªé•¿ä»»åŠ¡åˆ’åˆ†ä¸ºè¾ƒå°çš„ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡å•ç‹¬è¿è¡Œæ‰€éœ€çš„æ—¶é—´æ›´å°‘ã€‚</p>
<p><img src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8Bhl9Ilki4tM0aC1nfn8.png?auto=format&w=1600" alt="img_3"></p>
<p><em style="font-size:12px">å•ä¸ªé•¿ä»»åŠ¡ä¸åŒä¸€ä»»åŠ¡åˆ†è§£ä¸ºäº”ä¸ªè¾ƒçŸ­ä»»åŠ¡çš„å¯è§†åŒ–</em></p>
<p>è¿™å¾ˆé‡è¦ï¼Œå› ä¸ºå½“ä»»åŠ¡è¢«åˆ†è§£æ—¶ï¼Œæµè§ˆå™¨æœ‰æ›´å¤šæœºä¼šå“åº”æ›´é«˜ä¼˜å…ˆçº§çš„å·¥ä½œâ€”â€”åŒ…æ‹¬ç”¨æˆ·äº¤äº’ã€‚</p>
<p><img src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/0yV0ynwW7FujIwvCbCxQ.png?auto=format&w=1600" alt="img_3"></p>
<p><em style="font-size:12px">å½“ä»»åŠ¡å¤ªé•¿ï¼Œæµè§ˆå™¨ä¸èƒ½å¯¹äº’åŠ¨åšå‡ºè¶³å¤Ÿå¿«çš„ååº”æ—¶ï¼Œä¸å°†è¾ƒé•¿çš„ä»»åŠ¡åˆ†è§£æˆè¾ƒå°çš„ä»»åŠ¡æ—¶ç›¸æ¯”ï¼Œäº’åŠ¨ä¼šå‘ç”Ÿä»€ä¹ˆæ ·çš„æƒ…å†µï¼Œè¿™æ˜¯ä¸€ä¸ªå¯è§†åŒ–çš„ç»“æœ</em></p>
<p>å¦‚ä¸Šå›¾çš„ä¸ŠåŠéƒ¨åˆ†æ‰€è¿°ï¼Œç”±ç”¨æˆ·äº¤äº’æ’é˜Ÿçš„äº‹ä»¶å¤„ç†ç¨‹åºå¿…é¡»ç­‰å¾…ä¸€ä¸ªé•¿ä»»åŠ¡æ‰èƒ½è¿è¡Œã€‚è¿™å»¶è¿Ÿäº†äº¤äº’çš„å‘ç”Ÿã€‚åœ¨ä¸‹åŠéƒ¨åˆ†ï¼Œäº‹ä»¶å¤„ç†ç¨‹åºæœ‰æœºä¼šæ›´å¿«åœ°è¿è¡Œã€‚å› ä¸ºäº‹ä»¶å¤„ç†ç¨‹åºæœ‰æœºä¼šåœ¨è¾ƒå°çš„ä»»åŠ¡ä¹‹é—´è¿è¡Œã€‚å®ƒè¿è¡Œå¾—æ¯”å®ƒå¿…é¡»ç­‰å¾…ä¸€ä¸ªå¾ˆé•¿çš„ä»»åŠ¡å®Œæˆè¦å¿«ã€‚åœ¨ä¸ŠåŠéƒ¨åˆ†ä¸­ï¼Œç”¨æˆ·å¯èƒ½å·²ç»æ„Ÿå—åˆ°äº†å»¶è¿Ÿï¼Œåœ¨ä¸‹åŠéƒ¨åˆ†ï¼Œäº¤äº’å¯èƒ½æ˜¯å³æ—¶çš„ã€‚</p>
<p>ç„¶è€Œï¼Œé—®é¢˜åœ¨äº â€œåˆ†è§£ä½ çš„é•¿ä»»åŠ¡â€ å’Œ â€œä¸è¦é˜»å¡ä¸»çº¿ç¨‹â€çš„å»ºè®®ä¸å¤Ÿå…·ä½“,é™¤éä½ å·²ç»çŸ¥é“å¦‚ä½•åšè¿™äº›äº‹æƒ…ï¼Œè¿™å°±æ˜¯æœ¬æŒ‡å—å°†è¦è§£é‡Šçš„å†…å®¹ã€‚</p>
<h2 id="ä»»åŠ¡ç®¡ç†ç­–ç•¥"><a href="#ä»»åŠ¡ç®¡ç†ç­–ç•¥" class="headerlink" title="ä»»åŠ¡ç®¡ç†ç­–ç•¥"></a>ä»»åŠ¡ç®¡ç†ç­–ç•¥</h2><p>åœ¨è½¯ä»¶æ¶æ„ä¸­ï¼Œä¸€ä¸ªå¸¸è§å»ºè®®æ˜¯å°†æ‚¨çš„å·¥ä½œåˆ†è§£æ›´å°çš„åŠŸèƒ½ã€‚è¿™ä¸ºæ‚¨æä¾›äº†æ›´å¥½çš„ä»£ç å¯è¯»æ€§å’Œé¡¹ç›®å¯ç»´æŠ¤æ€§çš„å¥½å¤„ã€‚è¿™ä½¿å¾—æµ‹è¯•æ›´å®¹æ˜“ç¼–å†™ã€‚</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">saveSettings</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  validateForm();</span><br><span class="line">  showSpinner();</span><br><span class="line">  saveToDatabase();</span><br><span class="line">  updateUI();</span><br><span class="line">  sendAnalytics();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¿™é‡Œçš„ saveSettings å‡½æ•°ï¼Œåœ¨å®ƒè°ƒç”¨æ—¶ï¼Œå®ƒè°ƒç”¨äº†å…¶ä»–äº”ä¸ªå‡½æ•°ã€‚ä»æ¦‚å¿µä¸Šè®²ï¼Œè¿™æ˜¯å¾ˆå¥½çš„æ¶æ„ï¼Œå¦‚æœä½ éœ€è¦è°ƒè¯•è¿™äº›å‡½æ•°ä¸­çš„ä¸€ä¸ªï¼Œä½ å¯ä»¥ä¾¿åˆ©é¡¹ç›®æ ‘ä»¥å¼„æ¸…æ¯ä¸ªå‡½æ•°çš„ä½œç”¨ã€‚</p>
<p>ç„¶è€Œï¼Œé—®é¢˜åœ¨äº JavaScript ä¸ä¼šå°†è¿™äº›å‡½æ•°ä¸­çš„æ¯ä¸€ä¸ªä½œä¸ºå•ç‹¬çš„ä»»åŠ¡è¿è¡Œï¼Œå› ä¸ºå®ƒä»¬æ˜¯åœ¨ savaSettings å‡½æ•°ä¸­æ‰§è¡Œçš„ã€‚<strong>è¿™æ„å‘³ç€æ‰€æœ‰äº”ä¸ªåŠŸèƒ½éƒ½ä½œä¸ºå•ç‹¬ä»»åŠ¡è¿è¡Œã€‚</strong></p>
<blockquote>
<p>JavaScript ä»¥è¿™ç§æ–¹å¼å·¥ä½œæ˜¯å› ä¸ºå®ƒä½¿ç”¨ä»»åŠ¡æ‰§è¡Œçš„è¿è¡Œåˆ°å®Œæˆæ¨¡å‹ã€‚è¿™æ„å‘³ç€æ¯ä¸ªä»»åŠ¡å°†ä¸€ç›´è¿è¡Œåˆ°å®Œæˆï¼Œæ— è®ºå®ƒé˜»å¡ä¸»çº¿ç¨‹å¤šé•¿æ—¶é—´ã€‚</p>
</blockquote>
<p><img src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/0c61l5DCix9y0GBa3pFj.png?auto=format&w=1600" alt="img_4"></p>
<p><em style="font-size:12px">è°ƒç”¨äº”ä¸ªå‡½æ•°çš„å•ä¸ªå‡½æ•° saveSettings()ã€‚è¿™é¡¹å·¥ä½œæ˜¯ä½œä¸ºä¸€é¡¹é•¿æœŸçš„æ•´ä½“ä»»åŠ¡çš„ä¸€éƒ¨åˆ†è¿è¡Œçš„</em></p>
<p>åœ¨æœ€å¥½çš„æƒ…å†µä¸‹ï¼Œå³ä½¿åªæ˜¯è¿™äº›åŠŸèƒ½ä¸­çš„ä¸€ä¸ªï¼Œä¹Ÿå¯ä»¥ä¸ºä»»åŠ¡çš„æ€»é•¿åº¦è´¡çŒ®50æ¯«ç§’æˆ–æ›´å¤šã€‚åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œæ›´å¤šçš„è¿™äº›ä»»åŠ¡å¯ä»¥è¿è¡Œç›¸å½“é•¿çš„æ—¶é—´â€“ç‰¹åˆ«æ˜¯åœ¨èµ„æºæœ‰é™çš„è®¾å¤‡ä¸Šã€‚ä¸‹é¢æ˜¯ä¸€å¥—ç­–ç•¥ï¼Œä½ å¯ä»¥ç”¨æ¥åˆ†è§£å’Œä¼˜å…ˆå¤„ç†ä»»åŠ¡ã€‚</p>
<h2 id="æ‰‹åŠ¨å»¶è¿Ÿä»£ç æ‰§è¡Œ"><a href="#æ‰‹åŠ¨å»¶è¿Ÿä»£ç æ‰§è¡Œ" class="headerlink" title="æ‰‹åŠ¨å»¶è¿Ÿä»£ç æ‰§è¡Œ"></a>æ‰‹åŠ¨å»¶è¿Ÿä»£ç æ‰§è¡Œ</h2><p>å¼€å‘äººå‘˜ä½¿ç”¨çš„ä¸€ç§å°†ä»»åŠ¡åˆ†è§£æˆå°ä»»åŠ¡çš„æ–¹æ³•æ¶‰åŠåˆ° setTimeout(). ä½¿ç”¨è¿™ç§æŠ€æœ¯ï¼Œä½ æŠŠå‡½æ•°ä¼ ç»™ setTimeout è¿™å°†å›è°ƒçš„æ‰§è¡Œæ¨è¿Ÿåˆ°ä¸€ä¸ªå•ç‹¬çš„ä»»åŠ¡ä¸­ï¼Œå³æ—¶ä½ æŒ‡å®šçš„æ—¶é—´ä¸º 0ã€‚</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">saveSettings</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å®Œæˆç”¨æˆ·å¯è§çš„å…³é”®å·¥ä½œ:</span></span><br><span class="line">  validateForm();</span><br><span class="line">  showSpinner();</span><br><span class="line">  updateUI();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†ç”¨æˆ·ä¸å¯è§çš„å·¥ä½œæ¨è¿Ÿåˆ°å•ç‹¬çš„ä»»åŠ¡:</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    saveToDatabase();</span><br><span class="line">    sendAnalytics();</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ‚¨æœ‰ä¸€ç³»åˆ—éœ€è¦æŒ‰é¡ºåºè¿è¡Œçš„å‡½æ•°ï¼Œè¿™å¾ˆæœ‰æ•ˆï¼Œä½†æ‚¨çš„ä»£ç å¯èƒ½å¹¶ä¸æ€»æ˜¯ä»¥è¿™ç§æ–¹å¼ç»„ç»‡ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½æœ‰å¤§é‡æ•°æ®éœ€è¦å¾ªç¯å¤„ç†ï¼Œå¦‚æœæ‚¨æœ‰æ•°ç™¾ä¸‡ä¸ªé¡¹ç›®ï¼Œè¯¥ä»»åŠ¡å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´ã€‚</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">processData</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> largeDataArray) &#123;</span><br><span class="line">    <span class="comment">// Process the individual item here.</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ setTimeout æ˜¯å­˜åœ¨é—®é¢˜çš„, å› ä¸ºå®ƒçš„äººæœºå·¥ç¨‹å­¦ï¼ˆè¿™æ˜¯ä»€ä¹ˆæ„æ€ğŸ¤”ï¼ŒåŸæ–‡ï¼šergonomicsï¼‰ä½¿å…¶éš¾ä»¥å®ç°ï¼Œå¹¶ä¸”æ•´ä¸ªæ•°æ®æ•°ç»„å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´å¤„ç†ï¼Œå³ä½¿æ¯ä¸ªé¡¹ç›®éƒ½å¯ä»¥éå¸¸å¿«é€Ÿåœ°å¤„ç†ã€‚è¿™ä¸€åˆ‡åŠ èµ·æ¥ï¼ŒsetTimeout ä¸æ˜¯åˆé€‚çš„å·¥å…·ï¼Œè‡³å°‘åœ¨è¿™æ ·ä½¿ç”¨æ—¶ä¸æ˜¯ã€‚</p>
<p>é™¤äº† setTimeout ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»– API å…è®¸æ‚¨å°†ä»£ç æ‰§è¡Œæ¨è¿Ÿåˆ°åç»­ä»»åŠ¡ã€‚ ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ postMessage æ¥åŠ å¿«è¶…æ—¶ã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ requestIdleCallback() æ¥åˆ†è§£å·¥ä½œã€‚ ä½†æ˜¯è¦æ³¨æ„ â€“ requestIdleCallback() ä»¥å°½å¯èƒ½ä½çš„ä¼˜å…ˆçº§å®‰æ’ä»»åŠ¡ï¼Œè€Œä¸”åªåœ¨æµè§ˆå™¨ç©ºé—²æ—¶é—´å†…è¿›è¡Œã€‚å½“ä¸»çº¿ç¨‹æ‹¥æŒ¤æ—¶,ç”¨ requestIdleCallback() å®‰æ’çš„ä»»åŠ¡å¯èƒ½æ°¸è¿œæ— æ³•è¿è¡Œã€‚</p>
<h2 id="ä½¿ç”¨-async-await-yield-points"><a href="#ä½¿ç”¨-async-await-yield-points" class="headerlink" title="ä½¿ç”¨ async/await yield points"></a>ä½¿ç”¨ async/await yield points</h2><p>åœ¨æœ¬æŒ‡å—çš„å…¶ä½™éƒ¨åˆ†ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªçŸ­è¯­æ˜¯ â€œyield to the main threadâ€ï¼Œä½†æ˜¯ï¼Œè¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä½ è¦è¿™ä¹ˆåšï¼Ÿä½ ä»€ä¹ˆæ—¶å€™è¯¥è¿™æ ·åšï¼Ÿ</p>
<blockquote>
<p>å½“ä½  yield to the main threadï¼Œä½ ä¼šç»™å®ƒä¸€ä¸ªæœºä¼šæ¥å¤„ç†æ¯”å½“å‰æ’é˜Ÿçš„ä»»åŠ¡æ›´é‡è¦çš„ä»»åŠ¡ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼ˆideallyï¼‰ï¼Œå½“ä½ æœ‰ä¸€äº›å…³é”®çš„é¢å‘ç”¨æˆ·çš„å·¥ä½œï¼Œéœ€è¦æ¯” yield æ›´æ—©åœ°æ‰§è¡Œæ—¶ï¼Œä½ åº”è¯¥ yield main threadï¼Œyield main thread å¯ä»¥ä¸ºå…³é”®å·¥ä½œåˆ›é€ æœºä¼šï¼Œä½¿å…¶æ›´å¿«åœ°è¿è¡Œã€‚</p>
</blockquote>
<p>å½“ä»»åŠ¡è¢«åˆ†è§£æ—¶ï¼Œå…¶ä»–ä»»åŠ¡å¯ä»¥é€šè¿‡æµè§ˆå™¨å†…éƒ¨ä¼˜å…ˆçº§æ–¹æ¡ˆæ›´å¥½åœ°è¿›è¡Œä¼˜å…ˆçº§æ’åºã€‚yield main thread çš„æ–¹æ³•æ¶‰åŠåˆ°ä½¿ç”¨ä¸€ä¸ª Promise çš„ç»„åˆï¼Œè¯¥ç»„åˆä¸å¯¹ setTimeout() è¿›è¡Œçš„è°ƒç”¨è¿›è¡Œè§£æã€‚</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">yieldToMain</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(resolve, <span class="number">0</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è™½ç„¶è¿™ä¸ªä»£ç å®ä¾‹è¿”å›äº†ä¸€ä¸ªåœ¨è°ƒç”¨ setTimeout åè§£æçš„ Promise, ä½†è´Ÿè´£åœ¨æ–°ä»»åŠ¡ä¸­è¿è¡Œå¥‡é‡ä»£ç çš„å¹¶ä¸æ˜¯è¿™ä¸ª Promiseï¼Œè€Œæ˜¯ setTimeout è°ƒç”¨ã€‚Promise å›è°ƒä½œä¸ºå¾®ä»»åŠ¡è€Œä¸æ˜¯ä»»åŠ¡è¿è¡Œï¼Œå› æ­¤ä¸ä¼š yield main thread</p>
</blockquote>
<p>åœ¨ saveSettings() å‡½æ•°ä¸­ï¼Œå¦‚æœåœ¨æ¯æ¬¡å‡½æ•°è°ƒç”¨å await yieldToMain() å‡½æ•°ï¼Œåˆ™å¯ä»¥åœ¨æ¯æ¬¡å·¥ä½œå yield to the main</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">saveSettings</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Create an array of functions to run:</span></span><br><span class="line">  <span class="keyword">const</span> tasks = [</span><br><span class="line">    validateForm,</span><br><span class="line">    showSpinner,</span><br><span class="line">    saveToDatabase,</span><br><span class="line">    updateUI,</span><br><span class="line">    sendAnalytics</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Loop over the tasks:</span></span><br><span class="line">  <span class="keyword">while</span> (tasks.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// Shift the first task off the tasks array:</span></span><br><span class="line">    <span class="keyword">const</span> task = tasks.shift();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Run the task:</span></span><br><span class="line">    task();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Yield to the main thread:</span></span><br><span class="line">    <span class="keyword">await</span> yieldToMain();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½ ä¸å¿…åœ¨æ¯æ¬¡å‡½æ•°è°ƒç”¨åéƒ½ yieldã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ è¿è¡Œçš„ä¸¤ä¸ªå‡½æ•°ä¼šå¯¼è‡´ç”¨æˆ·ç•Œé¢çš„å…³é”®æ€§æ›´æ–°ï¼Œä½ å¯èƒ½ä¸æƒ³åœ¨å®ƒä»¬ä¹‹é—´ yieldã€‚å¦‚æœå¯ä»¥çš„è¯ï¼Œè®©è¿™äº› tast å…ˆè¿è¡Œï¼Œç„¶åè€ƒè™‘åœ¨é‚£äº›ä¸é‚£ä¹ˆå…³é”®çš„æˆ–ç”¨æˆ·çœ‹ä¸åˆ°çš„åå°å·¥ä½œçš„å‡½æ•°ä¹‹é—´è¿›è¡Œ yieldã€‚</p>
</blockquote>
<p>ç»“æœæ˜¯æ›¾ç»å•ä¸€çš„ä»»åŠ¡ç°åœ¨è¢«åˆ†è§£ä¸ºå•ç‹¬çš„ä»»åŠ¡</p>
<p><img src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/wg0FW6S29CzOCbbwk9kK.png?auto=format&w=1600" alt="img_5"></p>
<p><em style="font-size:12px">saveSettings() å‡½æ•°ç°åœ¨å°†å…¶å­å‡½æ•°ä½œä¸ºå•ç‹¬çš„ä»»åŠ¡æ‰§è¡Œã€‚</em></p>
<p>ä½¿ç”¨åŸºäº Promise çš„æ–¹æ³•æ¥äº§ç”Ÿè€Œä¸æ˜¯æ‰‹åŠ¨ä½¿ç”¨ setTimeout() çš„å¥½å¤„æ˜¯æ›´å¥½çš„äººä½“å·¥ç¨‹å­¦ã€‚å±ˆæœç‚¹æˆä¸ºå£°æ˜æ€§çš„ï¼Œå› æ­¤æ›´å®¹æ˜“ç¼–å†™ã€é˜…è¯»å’Œç†è§£ã€‚</p>
<h2 id="ä»…åœ¨å¿…è¦æ—¶-yield"><a href="#ä»…åœ¨å¿…è¦æ—¶-yield" class="headerlink" title="ä»…åœ¨å¿…è¦æ—¶ yield"></a>ä»…åœ¨å¿…è¦æ—¶ yield</h2><p>å¦‚æœæ‚¨æœ‰ä¸€å †ä»»åŠ¡ï¼Œä½†æ‚¨åªæƒ³åœ¨ç”¨æˆ·å°è¯•ä¸é¡µé¢äº¤äº’æ—¶è®©æ­¥æ€ä¹ˆåŠï¼Ÿè¿™å°±æ˜¯ isInputPending() çš„ç”¨é€”ã€‚</p>
<p>isInputPending() æ˜¯ä¸€ä¸ªæ‚¨å¯ä»¥éšæ—¶è¿è¡Œä»¥ç¡®å®šç”¨æˆ·æ˜¯å¦æ­£åœ¨å°è¯•ä¸é¡µé¢å…ƒç´ äº¤äº’çš„å‡½æ•°ï¼šå¯¹ isInputPending() çš„è°ƒç”¨å°†è¿”å› trueã€‚å¦åˆ™è¿”å› falseã€‚</p>
<p>å‡è®¾æ‚¨å¯æœ‰ä¸€ä¸ªéœ€è¦è¿è¡Œçš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œä½†æ‚¨ä¸æƒ³å¦¨ç¢ä»»ä½•è¾“å…¥ã€‚è¿™æ®µä»£ç  â€” å®ƒåŒæ—¶ä½¿ç”¨äº† isInputPending() å‡½æ•° â€” ç¡®ä¿åœ¨ç”¨æˆ·å°è¯•ä¸é¡µé¢äº¤äº’æ—¶è¾“å…¥ä¸ä¼šè¢«å»¶è¿Ÿã€‚</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">saveSettings</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// A task queue of functions</span></span><br><span class="line">  <span class="keyword">const</span> tasks = [</span><br><span class="line">    validateForm,</span><br><span class="line">    showSpinner,</span><br><span class="line">    saveToDatabase,</span><br><span class="line">    updateUI,</span><br><span class="line">    sendAnalytics</span><br><span class="line">  ];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">while</span> (tasks.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// Yield to a pending user input:</span></span><br><span class="line">    <span class="keyword">if</span> (navigator.scheduling.isInputPending()) &#123;</span><br><span class="line">      <span class="comment">// There&#x27;s a pending user input. Yield here:</span></span><br><span class="line">      <span class="keyword">await</span> yieldToMain();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// Shift the the task out of the queue:</span></span><br><span class="line">      <span class="keyword">const</span> task = tasks.shift();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Run the task:</span></span><br><span class="line">      task();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“ saveSettings() è¿è¡Œæ—¶ï¼Œå®ƒå°†éå†é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ã€‚å¦‚æœ isInputPending() åœ¨å¾ªç¯æœŸé—´è¿”å› trueï¼Œåˆ™ saveSettings() å°†è°ƒç”¨ yieldToMain() ä»¥ä¾¿å¤„ç†ç”¨æˆ·è¾“å…¥ã€‚å¦åˆ™ï¼Œå®ƒå°†æŠŠä¸‹ä¸€ä¸ªä»»åŠ¡ç§»å‡ºé˜Ÿåˆ—çš„å‰é¢å¹¶ç»§ç»­è¿è¡Œå®ƒã€‚å®ƒå°†æ‰§è¡Œæ­¤æ“ä½œï¼Œç›´åˆ°æ²¡æœ‰å…¶ä»–ä»»åŠ¡ä¸ºæ­¢ã€‚</p>
<p><img src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/snMl3kRlWyJjdbL0qsqM.png?auto=format&w=1600" alt="img_5"></p>
<p><em style="font-size:12px">saveSettings()è¿è¡Œä¸€ä¸ªæœ‰äº”ä¸ªä»»åŠ¡çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œä½†åœ¨ç¬¬äºŒä¸ªå·¥ä½œé¡¹è¿è¡Œæ—¶ï¼Œç”¨æˆ·å·²ç»ç‚¹å‡»æ‰“å¼€äº†ä¸€ä¸ªèœå•ã€‚ isInputPending()è®©ä½äºä¸»çº¿ç¨‹æ¥å¤„ç†è¿™ä¸ªäº¤äº’ï¼Œå¹¶æ¢å¤è¿è¡Œå…¶ä½™çš„ä»»åŠ¡ã€‚</em></p>
<blockquote>
<p>isInputPending()ä¸ä¸€å®šåœ¨ç”¨æˆ·è¾“å…¥åç«‹å³è¿”å›trueã€‚è¿™æ˜¯å› ä¸ºæ“ä½œç³»ç»Ÿéœ€è¦æ—¶é—´æ¥å‘Šè¯‰æµè§ˆå™¨å‘ç”Ÿäº†äº¤äº’ã€‚è¿™æ„å‘³ç€å…¶ä»–ä»£ç å¯èƒ½å·²ç»å¼€å§‹æ‰§è¡Œäº†ï¼ˆæ­£å¦‚ä½ åœ¨ä¸Šé¢çš„æˆªå›¾ä¸­çœ‹åˆ°çš„saveToDatabase()å‡½æ•°ï¼‰ã€‚å³ä½¿ä½ ä½¿ç”¨isInputPending()ï¼Œä½ ä»ç„¶è¦é™åˆ¶æ¯ä¸ªå‡½æ•°çš„å·¥ä½œé‡ï¼Œè¿™æ˜¯è‡³å…³é‡è¦çš„ã€‚</p>
</blockquote>
<p>å°† isInputPending() ä¸è®©æ­¥æœºåˆ¶ç»“åˆä½¿ç”¨æ˜¯è®©æµè§ˆå™¨åœæ­¢å…¶æ­£åœ¨å¤„ç†çš„ä»»ä½•ä»»åŠ¡ä»¥å“åº”å…³é”®çš„é¢å‘ç”¨æˆ·çš„äº¤äº’çš„å¥½æ–¹æ³•ã€‚è¿™å¯ä»¥å¸®åŠ©æé«˜æ‚¨çš„é¡µé¢åœ¨è®¸å¤šä»»åŠ¡æ­£åœ¨è¿›è¡Œæ—¶åœ¨è®¸å¤šæƒ…å†µä¸‹å“åº”ç”¨æˆ·çš„èƒ½åŠ›ã€‚</p>
<p>å¦ä¸€ç§ä½¿ç”¨isInputPending()çš„æ–¹æ³•â€“ç‰¹åˆ«æ˜¯å¦‚æœä½ æ‹…å¿ƒä¸ºä¸æ”¯æŒå®ƒçš„æµè§ˆå™¨æä¾›é€€è·¯â€“æ˜¯ä½¿ç”¨åŸºäºæ—¶é—´çš„æ–¹æ³•ä¸ å¯é€‰é“¾æ“ä½œç¬¦ ï¼ˆ?.ï¼‰</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">saveSettings</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// A task queue of functions</span></span><br><span class="line">  <span class="keyword">const</span> tasks = [</span><br><span class="line">    validateForm,</span><br><span class="line">    showSpinner,</span><br><span class="line">    saveToDatabase,</span><br><span class="line">    updateUI,</span><br><span class="line">    sendAnalytics</span><br><span class="line">  ];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">let</span> deadline = performance.now() + <span class="number">50</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (tasks.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// Optional chaining operator used here helps to avoid</span></span><br><span class="line">    <span class="comment">// errors in browsers that don&#x27;t support `isInputPending`:</span></span><br><span class="line">    <span class="keyword">if</span> (navigator.scheduling?.isInputPending() || performance.now() &gt;= deadline) &#123;</span><br><span class="line">      <span class="comment">// There&#x27;s a pending user input, or the</span></span><br><span class="line">      <span class="comment">// deadline has been reached. Yield here:</span></span><br><span class="line">      <span class="keyword">await</span> yieldToMain();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Extend the deadline:</span></span><br><span class="line">      deadline += <span class="number">50</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Stop the execution of the current loop and</span></span><br><span class="line">      <span class="comment">// move onto the next iteration:</span></span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Shift the the task out of the queue:</span></span><br><span class="line">    <span class="keyword">const</span> task = tasks.shift();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Run the task:</span></span><br><span class="line">    task();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œä½ å¯ä»¥ä¸ºä¸æ”¯æŒisInputPending()çš„æµè§ˆå™¨æä¾›ä¸€ä¸ªåå¤‡æ–¹æ¡ˆï¼Œå³ä½¿ç”¨ï¼ˆå¹¶è°ƒæ•´ï¼‰ä¸€ä¸ªæˆªæ­¢æ—¥æœŸï¼Œä»¥ä¾¿åœ¨å¿…è¦æ—¶å°†å·¥ä½œåˆ†å¼€ï¼Œæ— è®ºæ˜¯é€šè¿‡å±ˆæœäºç”¨æˆ·è¾“å…¥ï¼Œè¿˜æ˜¯åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¹‹å‰ã€‚</p>
<h2 id="å½“å‰-api-çš„å·®å¼‚"><a href="#å½“å‰-api-çš„å·®å¼‚" class="headerlink" title="å½“å‰ api çš„å·®å¼‚"></a>å½“å‰ api çš„å·®å¼‚</h2><p>åˆ°ç›®å‰ä¸ºæ­¢æåˆ°çš„APIå¯ä»¥å¸®åŠ©ä½ åˆ†è§£ä»»åŠ¡ï¼Œä½†å®ƒä»¬æœ‰ä¸€ä¸ªæ˜¾è‘—çš„ç¼ºç‚¹ï¼šå½“ä½ é€šè¿‡æ¨è¿Ÿä»£ç åœ¨åç»­ä»»åŠ¡ä¸­è¿è¡Œè€Œå±ˆæœäºä¸»çº¿ç¨‹æ—¶ï¼Œè¯¥ä»£ç ä¼šè¢«æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—çš„æœ€æœ«ç«¯ã€‚</p>
<p>å¦‚æœä½ æ§åˆ¶äº†ä½ é¡µé¢ä¸Šçš„æ‰€æœ‰ä»£ç ï¼Œå°±æœ‰å¯èƒ½åˆ›å»ºä½ è‡ªå·±çš„scheduler ï¼ˆå‚è€ƒ react å—ï¼ŒğŸ˜¯ï¼‰ï¼Œå¹¶èƒ½å¯¹ä»»åŠ¡è¿›è¡Œä¼˜å…ˆæ’åºï¼Œä½†ç¬¬ä¸‰æ–¹è„šæœ¬ä¸ä¼šä½¿ç”¨ä½ çš„è°ƒåº¦å™¨ã€‚å®é™…ä¸Šï¼Œåœ¨è¿™æ ·çš„ç¯å¢ƒä¸­ï¼Œä½ å¹¶ä¸èƒ½çœŸæ­£åœ°å¯¹å·¥ä½œè¿›è¡Œä¼˜å…ˆæ’åºã€‚ä½ åªèƒ½æŠŠå®ƒåˆ†æˆå‡ å—ï¼Œæˆ–è€…æ˜ç¡®åœ°å±ˆä»äºç”¨æˆ·çš„äº’åŠ¨ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼Œç›®å‰æœ‰ä¸€ä¸ªä¸“é—¨çš„è°ƒåº¦å™¨APIæ­£åœ¨å¼€å‘ä¸­ï¼Œå¯ä»¥è§£å†³è¿™äº›é—®é¢˜ã€‚</p>
<h2 id="ä¸€ä¸ªä¸“é—¨çš„è°ƒåº¦ç¨‹åºAPI"><a href="#ä¸€ä¸ªä¸“é—¨çš„è°ƒåº¦ç¨‹åºAPI" class="headerlink" title="ä¸€ä¸ªä¸“é—¨çš„è°ƒåº¦ç¨‹åºAPI"></a>ä¸€ä¸ªä¸“é—¨çš„è°ƒåº¦ç¨‹åºAPI</h2><p>è°ƒåº¦å™¨APIç›®å‰æä¾›äº†postTask()å‡½æ•°ï¼Œåœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œè¯¥å‡½æ•°åœ¨Chromiumæµè§ˆå™¨å’ŒFirefoxçš„ä¸€ä¸ªæ ‡å¿—åé¢å¯ç”¨ã€‚ postTask()å…è®¸å¯¹ä»»åŠ¡è¿›è¡Œæ›´ç²¾ç»†çš„è°ƒåº¦ï¼Œæ˜¯å¸®åŠ©æµè§ˆå™¨ç¡®å®šå·¥ä½œä¼˜å…ˆçº§çš„ä¸€ç§æ–¹æ³•ï¼Œè¿™æ ·ä½ä¼˜å…ˆçº§çš„ä»»åŠ¡å°±ä¼šè®©ä½äºä¸»çº¿ç¨‹ã€‚ postTask()ä½¿ç”¨ Promiseï¼Œå¹¶æ¥å—ä¸€ä¸ªä¼˜å…ˆçº§è®¾ç½®ã€‚</p>
<p>postTask() API å…·æœ‰ä¸‰ä¸ªå¯ä»¥ä½¿ç”¨çš„ priorities</p>
<ul>
<li>â€˜backgroundâ€™ : æœ€ä½ä¼˜å…ˆçº§ä»»åŠ¡ã€‚</li>
<li>â€˜user-visibleâ€™ : ä¸­ç­‰ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œâ€œç”¨æˆ·å¯è§â€ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®ä¼˜å…ˆçº§ï¼Œè¿™æ˜¯é»˜è®¤è®¾ç½®ã€‚</li>
<li>â€˜user-blockingâ€™: ç”¨äºéœ€è¦é«˜ä¼˜å…ˆçº§è¿è¡Œçš„å…³é”®ä»»åŠ¡ã€‚</li>
</ul>
<p>ä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹ï¼ŒpostTask()APIè¢«ç”¨æ¥ä»¥å°½å¯èƒ½é«˜çš„ä¼˜å…ˆçº§è¿è¡Œä¸‰ä¸ªä»»åŠ¡ï¼Œå¹¶ä»¥å°½å¯èƒ½ä½çš„ä¼˜å…ˆçº§è¿è¡Œå…¶ä½™ä¸¤ä¸ªä»»åŠ¡ã€‚</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">saveSettings</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Validate the form at high priority</span></span><br><span class="line">  scheduler.postTask(validateForm, &#123;<span class="attr">priority</span>: <span class="string">&#x27;user-blocking&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Show the spinner at high priority:</span></span><br><span class="line">  scheduler.postTask(showSpinner, &#123;<span class="attr">priority</span>: <span class="string">&#x27;user-blocking&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Update the database in the background:</span></span><br><span class="line">  scheduler.postTask(saveToDatabase, &#123;<span class="attr">priority</span>: <span class="string">&#x27;background&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Update the user interface at high priority:</span></span><br><span class="line">  scheduler.postTask(updateUI, &#123;<span class="attr">priority</span>: <span class="string">&#x27;user-blocking&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Send analytics data in the background:</span></span><br><span class="line">  scheduler.postTask(sendAnalytics, &#123;<span class="attr">priority</span>: <span class="string">&#x27;background&#x27;</span>&#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œï¼Œä»»åŠ¡çš„ä¼˜å…ˆçº§ä»¥æµè§ˆå™¨ä¼˜å…ˆçº§ä»»åŠ¡ï¼ˆä¾‹å¦‚ç”¨æˆ·äº¤äº’ï¼‰å¯ä»¥æ­£å¸¸å·¥ä½œçš„æ–¹å¼å®‰æ’ã€‚</p>
<div style="color:red">å­ä»»åŠ¡æ‰§è¡Œé¡ºåºå·®å¼‚</div>

<p><img src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ttvI1HqusI02CAdqhjWP.png?auto=format&w=1600" alt="img_6"></p>
<p><em style="font-size:12px">å½“saveSettings()è¿è¡Œæ—¶ï¼Œè¯¥å‡½æ•°ä½¿ç”¨postTask()å¯¹å„ä¸ªå‡½æ•°è¿›è¡Œè°ƒåº¦ã€‚é¢å‘ç”¨æˆ·çš„å…³é”®å·¥ä½œè¢«å®‰æ’åœ¨é«˜ä¼˜å…ˆçº§ï¼Œè€Œç”¨æˆ·ä¸çŸ¥é“çš„å·¥ä½œè¢«å®‰æ’åœ¨åå°è¿è¡Œã€‚è¿™ä½¿å¾—ç”¨æˆ·äº¤äº’çš„æ‰§è¡Œé€Ÿåº¦æ›´å¿«ï¼Œå› ä¸ºå·¥ä½œè¢«åˆ†å‰²å¼€æ¥å¹¶è¢«é€‚å½“åœ°å®‰æ’äº†ä¼˜å…ˆæ¬¡åºã€‚</em></p>
<p>è¿™æ˜¯ä¸€ä¸ªå¦‚ä½•ä½¿ç”¨ postTask() çš„ç®€å•ç¤ºä¾‹ã€‚å¯ä»¥å®ä¾‹åŒ–ä¸åŒçš„ TaskController å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡å¯ä»¥åœ¨ä»»åŠ¡ä¹‹é—´å…±äº«ä¼˜å…ˆçº§ï¼ŒåŒ…æ‹¬æ ¹æ®éœ€è¦æ›´æ”¹ä¸åŒ TaskController å®ä¾‹çš„ä¼˜å…ˆçº§çš„èƒ½åŠ›ã€‚</p>
<blockquote>
<p>å¹¶éæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒ postTask()ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ç‰¹å¾æ£€æµ‹æ¥æŸ¥çœ‹å®ƒæ˜¯å¦å¯ç”¨ï¼Œæˆ–è€…è€ƒè™‘ä½¿ç”¨ polyfill</p>
</blockquote>
<h2 id="å†…ç½®çš„-yield"><a href="#å†…ç½®çš„-yield" class="headerlink" title="å†…ç½®çš„ yield"></a>å†…ç½®çš„ yield</h2><p>è°ƒåº¦å™¨APIçš„ä¸€ä¸ªæ‹Ÿè®®çš„éƒ¨åˆ†ï¼Œç›®å‰æ²¡æœ‰åœ¨ä»»ä½•æµè§ˆå™¨ä¸­å®ç°ï¼Œå°±æ˜¯ä¸€ä¸ªå†…ç½®çš„ yield æœºåˆ¶ã€‚å®ƒçš„ä½¿ç”¨ç±»ä¼¼äºæœ¬æ–‡å‰é¢æ¼”ç¤ºçš„ yieldToMain() å‡½æ•°ã€‚</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">saveSettings</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Create an array of functions to run:</span></span><br><span class="line">  <span class="keyword">const</span> tasks = [</span><br><span class="line">    validateForm,</span><br><span class="line">    showSpinner,</span><br><span class="line">    saveToDatabase,</span><br><span class="line">    updateUI,</span><br><span class="line">    sendAnalytics</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Loop over the tasks:</span></span><br><span class="line">  <span class="keyword">while</span> (tasks.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// Shift the first task off the tasks array:</span></span><br><span class="line">    <span class="keyword">const</span> task = tasks.shift();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Run the task:</span></span><br><span class="line">    task();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Yield to the main thread with the scheduler</span></span><br><span class="line">    <span class="comment">// API&#x27;s own yielding mechanism:</span></span><br><span class="line">    <span class="keyword">await</span> scheduler.yield();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‚¨ä¼šæ³¨æ„åˆ°ï¼Œä¸Šé¢çš„ä»£ç éå¸¸ç†Ÿæ‚‰ï¼Œä½†æ˜¯æ‚¨æ²¡æœ‰ä½¿ç”¨ yieldToMain()ï¼Œè€Œæ˜¯è°ƒç”¨å¹¶ç­‰å¾… scheduler.yield()ã€‚</p>
<p><img src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/fyuvJqAV0mLxfZDM9tAm.png?auto=format&w=1294" alt="img_7"></p>
<p><em style="font-size:12px">ä¸€ä¸ªæ²¡æœ‰yieldã€yieldã€yield å’Œ continuation çš„ä»»åŠ¡æ‰§è¡Œçš„å¯è§†åŒ–å›¾ã€‚å½“ä½¿ç”¨scheduler.yield()æ—¶ï¼Œä»»åŠ¡çš„æ‰§è¡Œç”šè‡³åœ¨å±ˆæœç‚¹ä¹‹åè¿˜èƒ½ç»§ç»­æ‰§è¡Œã€‚</em></p>
<p>scheduler.yield() çš„å¥½å¤„æ˜¯continuationï¼Œè¿™æ„å‘³ç€å¦‚æœä½ åœ¨ä¸€ç»„ä»»åŠ¡ä¸­é—´yieldï¼Œå…¶ä»–çš„è®¡åˆ’ä»»åŠ¡ä¼šåœ¨yieldç‚¹ä¹‹åä»¥åŒæ ·çš„é¡ºåºç»§ç»­æ‰§è¡Œã€‚è¿™å¯ä»¥é¿å…ç¬¬ä¸‰æ–¹è„šæœ¬ä¸­çš„ä»£ç ç¯¡å¤ºæ‚¨çš„ä»£ç æ‰§è¡Œé¡ºåºã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç®¡ç†ä»»åŠ¡æ˜¯å…·æœ‰æŒ‘æˆ˜æ€§çš„ï¼Œä½†è¿™æ ·åšæœ‰åŠ©äºä½ çš„é¡µé¢å¯¹ç”¨æˆ·çš„äº’åŠ¨ä½œå‡ºæ›´å¿«é€Ÿçš„ååº”ã€‚åœ¨ç®¡ç†å’Œç¡®å®šä»»åŠ¡çš„ä¼˜å…ˆæ¬¡åºæ–¹é¢ï¼Œæ²¡æœ‰å•ä¸€çš„å»ºè®®ã€‚ç›¸åï¼Œå®ƒæ˜¯ä¸€äº›ä¸åŒçš„æŠ€æœ¯ã€‚é‡ç”³ä¸€ä¸‹ï¼Œè¿™äº›æ˜¯ä½ åœ¨ç®¡ç†ä»»åŠ¡æ—¶è¦è€ƒè™‘çš„ä¸»è¦äº‹é¡¹ã€‚</p>
<ul>
<li><p>è®©ç»™ä¸»çº¿ç¨‹ä»¥å®Œæˆå…³é”®çš„ã€é¢å‘ç”¨æˆ·çš„ä»»åŠ¡ã€‚</p>
</li>
<li><p>å½“ç”¨æˆ·å°è¯•ä¸é¡µé¢äº¤äº’æ—¶ï¼Œä½¿ç”¨ isInputPending() è®©æ­¥ç»™ä¸»çº¿ç¨‹ã€‚</p>
</li>
<li><p>ä½¿ç”¨ postTask() å¯¹ä»»åŠ¡è¿›è¡Œä¼˜å…ˆçº§æ’åºã€‚</p>
</li>
<li><p>æœ€åï¼Œåœ¨ä½ çš„å‡½æ•°ä¸­åšå°½å¯èƒ½å°‘çš„å·¥ä½œã€‚</p>
</li>
</ul>
<p>æœ‰äº†è¿™äº›å·¥å…·ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªï¼Œä½ åº”è¯¥èƒ½å¤Ÿåœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­æ„é€ å·¥ä½œï¼Œä½¿å…¶ä¼˜å…ˆè€ƒè™‘ç”¨æˆ·çš„éœ€æ±‚ï¼ŒåŒæ—¶ç¡®ä¿ä¸å¤ªå…³é”®çš„å·¥ä½œä»ç„¶èƒ½å¤Ÿå®Œæˆã€‚è¿™å°†åˆ›é€ ä¸€ä¸ªæ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œå®ƒçš„å“åº”é€Ÿåº¦æ›´å¿«ï¼Œä½¿ç”¨èµ·æ¥æ›´æ„‰å¿«ã€‚</p>
<p>Special thanks to Philip Walton for his technical vetting of this article.</p>
<p>Hero image sourced from Unsplash, courtesy of Amirali Mirhashemian.</p>
]]></content>
  </entry>
  <entry>
    <title>ä¸€å°é˜¿é‡Œäº‘çš„å–èŒ¶é‚®ä»¶</title>
    <url>/2022/02/08/%E4%B8%80%E5%B0%81%E9%98%BF%E9%87%8C%E4%BA%91%E7%9A%84%E5%96%9D%E8%8C%B6%E9%82%AE%E4%BB%B6/</url>
    <content><![CDATA[<p>äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼Œå°±åœ¨ä»Šå¤©æ—©ä¸Šï¼Œæ”¶åˆ°äº†ä¸€å°æ¥è‡ªé˜¿é‡Œäº‘çš„ã€å–èŒ¶ï¼ˆæ ¸æŸ¥ï¼‰é€šçŸ¥ã€‘ã€‚ä¸€çœ‹é‚®ä»¶ï¼Œå¾ˆæ˜æ˜¾å°±æ˜¯åŸŸåæ²¡æœ‰è§£æåˆ°å†…åœ°èŠ‚ç‚¹çš„æœåŠ¡å™¨ä¸Šé¢å‘¢ã€‚å›æƒ³ä¸€ä¸‹è‡ªå·±çš„è§£æï¼Œå®ƒè¯´çš„å¯¹ï¼ã€‚ã€‚ã€‚<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202202081154.png" alt="why"></p>
<span id="more"></span>

<h2 id="åŸç”±"><a href="#åŸç”±" class="headerlink" title="åŸç”±"></a>åŸç”±</h2><p>åœ¨è€æ—©ä»¥å‰äº†ï¼Œæˆ‘ç”¨ hexo éƒ¨ç½² blog åœ¨ GitHub Page ä¸Šé¢ï¼Œç„¶åè§£æäº†è‡ªå·±çš„åŸŸååœ¨ gh-page ä¸Šï¼Œæ˜¾ç„¶ï¼ŒGitHub Page çš„æœåŠ¡å™¨ä¸åœ¨å†…åœ°ã€‚æˆ‘ä¸ºäº†è®¿é—®é€Ÿåº¦èƒ½å¿«é‚£ä¹ˆä¸€ä¸ç‚¹ï¼Œå°±ç»§ç»­ä½¿ç”¨äº† cloudflare çš„ cdn åŠ é€Ÿï¼Œå› æ­¤ä¹Ÿåœ¨ä¸Šé¢è®¾ç½®äº† DNSï¼Œä½†æ˜¯æˆ‘åœ¨ DNS ä¸Šä¹Ÿè§£æäº†ä¸€ä¸ªäºŒçº§åŸŸååˆ°äº†é˜¿é‡Œäº‘çš„æœåŠ¡å™¨ä¸Šå•Šã€‚æŒ‰ç…§ç½‘ä¸Šçš„è¯´æ³•ï¼Œè®¾ç½®ä¸€ä¸ªäºŒçº§åŸŸåè§£æåˆ°å†…åœ°æœåŠ¡å™¨å°±è¡Œäº†å‘¢ï¼Œç„¶åç‚¹å‡»å¤æŸ¥è¿æ¥åè¿˜æ˜¯æ£€æŸ¥æœ‰é—®é¢˜ã€‚</p>
<h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>é€šè¿‡åŸç”±çš„åˆ†æï¼Œæˆ‘è¿™æ¬¡å°†é—®é¢˜æ”¾åœ¨äº† cloudflare ä¸Šé¢ï¼Œçœ‹äº†ä¸€ä¸‹ DNS è®¾ç½®ã€‚<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202202081207.png" alt="dns setting"><br>çœ‹åˆ°ä¸Šé¢çš„ä»£ç†çŠ¶æ€äº†å—ï¼Œæˆ‘å°±å¼€å§‹æ€€ç–‘æ˜¯è¿™ä¸ªçš„é—®é¢˜ï¼Œok,æŸ¥æŸ¥ä»€ä¹ˆæ„æ€ã€‚çœ‹åˆ°äº†ä¸‹é¢çš„ä¸€ä¸ªé—®é¢˜ã€‚<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202202081210.png" alt="Q&amp;A proxy"><br>æŒ‰ç…§ä¸Šé¢çš„è¯´æ³•ï¼Œæ˜¾ç„¶ proxy å°±æ˜¯ä¸€ä¸ªä»£ç†ï¼Œè®¿é—®åŸŸåæ—¶ï¼Œå¦‚æœè®¾ç½®äº†ä»£ç†ï¼Œé‚£ä¹ˆå°±ä¼šèµ°ä»£ç†ï¼Œè€Œä¸æ˜¯ç›´æ¥èµ°è§£æåœ°å€ã€‚<br>é‚£æˆ‘ä»¬æ¥ ping ä¸€ä¸‹çœ‹çœ‹ã€‚<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202202081213.png" alt="ping res"><br>ä¸Šé¢çš„ä¸¤ä¸ªåŸŸåå…¶å®æ˜¯åŒä¸€ä¸ª ip,ä½†æ˜¯ ping å‡ºæ¥å“åº”çš„ä¸ä¸€æ ·ï¼Œå› æ­¤ï¼Œç¡®å®æ˜¯æœ‰ä»£ç†çš„å­˜åœ¨ã€‚<br>æˆ‘è‡ªå·±çš„æœåŠ¡å™¨ ip æ˜¯ 47 å¼€å§‹çš„ï¼Œä¸Šé¢çš„ ping ç»“æœä¸€ä¸ªæ˜¯ cloudflare ä»£ç†çš„æœåŠ¡å™¨ï¼Œä¸€ä¸ªæ˜¯ gh-page çš„æœåŠ¡å™¨ã€‚<br>é‚£ä¹ˆå…³é—­ä»£ç†å°±å¯ä»¥äº†å—ï¼Ÿ<br>æ˜¯çš„ï¼Œå¯ä»¥äº†ã€‚<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202202081229.jpg" alt="pre|left|350*0"><br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202202081231.png" alt="|right|250*0"><br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202202081217.png" alt="result"></p>
]]></content>
      <categories>
        <category>ä¸€äº›è¶£äº‹çš„ğŸŒŸ</category>
      </categories>
  </entry>
  <entry>
    <title>ä¸€æ¬¡base64æŒ‡ä»¤çš„powershell</title>
    <url>/2021/11/18/%E4%B8%80%E6%AC%A1base64%E6%8C%87%E4%BB%A4%E7%9A%84powershell/</url>
    <content><![CDATA[<p><strong>äº‹æƒ…å‘ç”Ÿæ˜¯åœ¨ä¸€ä¸ªæœˆé»‘é£é«˜çš„æ™šä¸Šã€‚ã€‚ã€‚ã€‚ä¸å¥½æ„æ€æé”™äº† ğŸ˜¬ã€‚</strong><br><strong>äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼Œä»Šå¤©åœ¨ä½¿ç”¨ webpack-dev-middleware æ„å»ºå¼€å‘ç¯å¢ƒçš„æ—¶å€™ï¼Œæƒ³è¦ä½¿ç”¨ node å¯åŠ¨æµè§ˆå™¨å¹¶è‡ªåŠ¨æ‰“å¼€ç›¸å…³çš„æœ¬åœ°ç½‘å€ã€‚äºæ˜¯å°±å‘ç”Ÿäº†ä¸‹é¢çš„ä¸€å¹•ã€‚</strong><br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/u=1178727920,923148390&fm=26&fmt=auto.webp"></p>
<span id="more"></span>

<h1 id="å…³äº-open-è¿™ä¸ª-node-module"><a href="#å…³äº-open-è¿™ä¸ª-node-module" class="headerlink" title="å…³äº open è¿™ä¸ª node_module"></a>å…³äº open è¿™ä¸ª node_module</h1><p><strong>è¿™æ˜¯ä¸€ä¸ª node çš„ä¾èµ–åŒ…ï¼Œä½¿ç”¨å…¶æä¾›çš„ç›¸å…³ api å¯ä»¥ç”¨æµè§ˆå™¨æ‰“å¼€å…·ä½“çš„ç½‘å€ã€‚å…·ä½“ç”¨æ³•å¦‚ä¸‹</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> open = <span class="built_in">require</span>(<span class="string">&quot;open&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Opens the image in the default image viewer and waits for the opened app to quit.</span></span><br><span class="line"><span class="keyword">await</span> open(<span class="string">&quot;unicorn.png&quot;</span>, &#123; <span class="attr">wait</span>: <span class="literal">true</span> &#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;The image viewer app quit&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Opens the URL in the default browser.</span></span><br><span class="line"><span class="keyword">await</span> open(<span class="string">&quot;https://sindresorhus.com&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Opens the URL in a specified browser.</span></span><br><span class="line"><span class="keyword">await</span> open(<span class="string">&quot;https://sindresorhus.com&quot;</span>, &#123; <span class="attr">app</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;firefox&quot;</span> &#125; &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Specify app arguments.</span></span><br><span class="line"><span class="keyword">await</span> open(<span class="string">&quot;https://sindresorhus.com&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">app</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;google chrome&quot;</span>, <span class="attr">arguments</span>: [<span class="string">&quot;--incognito&quot;</span>] &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Open an app</span></span><br><span class="line"><span class="keyword">await</span> open.openApp(<span class="string">&quot;xcode&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Open an app with arguments</span></span><br><span class="line"><span class="keyword">await</span> open.openApp(open.apps.chrome, &#123; <span class="attr">arguments</span>: [<span class="string">&quot;--incognito&quot;</span>] &#125;);</span><br></pre></td></tr></table></figure>

<p><strong>ä¸ºäº†ä¸€æ¢ç©¶ç«Ÿï¼Œå®ƒæ˜¯æ€æ ·æ‰“å¼€æµè§ˆå™¨çš„ï¼Œæ‰€ä»¥æˆ‘å°±å¼€å§‹äº†æŸ¥çœ‹æºä»£ç ä¹‹æ—…ã€‚ç„¶åå°±å‡ºç°äº† powershell æ‰§è¡Œ base64 ç¼–ç çš„å‘½ä»¤è¿™ä¸ªæœ‰è¶£çš„äº‹æƒ…äº†ã€‚</strong></p>
<h1 id="åœ¨-powershell-ä¸­ä½¿ç”¨-base64-ç¼–ç çš„æŒ‡ä»¤"><a href="#åœ¨-powershell-ä¸­ä½¿ç”¨-base64-ç¼–ç çš„æŒ‡ä»¤" class="headerlink" title="åœ¨ powershell ä¸­ä½¿ç”¨ base64 ç¼–ç çš„æŒ‡ä»¤"></a>åœ¨ powershell ä¸­ä½¿ç”¨ base64 ç¼–ç çš„æŒ‡ä»¤</h1><p><strong>åœ¨ open çš„æºç ä¸­ï¼Œæœ‰ä¸ª encodeArguments çš„æ•°ç»„ï¼Œå¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­[â€˜startâ€™, â€˜http://â€¦.â€™ ]ï¼Œå…¶æ‰“å¼€æµè§ˆçš„çš„ä¸»è¦å‘½ä»¤å°±æ˜¯</strong></p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">start</span> (application) &lt;ç½‘å€&gt;</span><br></pre></td></tr></table></figure>

<p><strong>è€Œå®ƒåœ¨ä¼ é€’ powershell å‘½ä»¤æ—¶æœ‰è¿™æ ·ä¸€è¡Œä»£ç ä»£ç ,é€šè¿‡æ³¨é‡Šæˆ‘ä»¬å¯ä»¥æ˜ç™½è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ base64 ç¼–ç çš„ powershell å‘½ä»¤ã€‚äºæ˜¯ä¹æˆ‘å°±å¼€å§‹äº†æˆ‘çš„å®éªŒæ€§æ¢ç©¶äº†äº†</strong>ğŸ¥³ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Using Base64-encoded command, accepted by PowerShell, to allow special characters.</span></span><br><span class="line">target = Buffer.from(encodedArguments.join(<span class="string">&quot; &quot;</span>), <span class="string">&quot;utf16le&quot;</span>).to;</span><br></pre></td></tr></table></figure>

<p><strong>æœä¸å…¶ç„¶ï¼Œåœ¨å¾®è½¯çš„æ–‡æ¡£é‡Œç¡®å®æŸ¥åˆ°äº† ğŸ˜ƒ,ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯éœ€è¦ utf-16le çš„ç¼–ç ã€‚</strong><br><strong><em>é“›é“›é“›é“›ï¼ï¼</em></strong><br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/encodedCommand.png"></p>
<h1 id="å®é™…æµ‹è¯•"><a href="#å®é™…æµ‹è¯•" class="headerlink" title="å®é™…æµ‹è¯•"></a>å®é™…æµ‹è¯•</h1><p><strong>ä¸‹é¢æˆ‘å°±ä»¥ node æ‰“å¼€æµè§ˆå™¨ä¸ºä¾‹å­ï¼Œè¿›è¡Œ base64 ç¼–ç å‘½ä»¤çš„æµ‹è¯•ã€‚</strong><br><strong>node æ‰“å¼€æµè§ˆå™¨çš„ä»£ç å¦‚ä¸‹ï¼š</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> cp = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–base64ç¼–ç çš„æŒ‡ä»¤</span></span><br><span class="line"><span class="keyword">let</span> command = Buffer.from(&lt;ç›®æ ‡æŒ‡ä»¤&gt; <span class="string">&#x27;utf16le&#x27;</span>).toString(<span class="string">&#x27;base64&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> subprocess = cp.spawn(<span class="string">`<span class="subst">$&#123;process.env.SYSTEMROOT&#125;</span>\\System32\\WindowsPowerShell\\v1.0\\powershell`</span>, [</span><br><span class="line">    <span class="string">&quot;-EncodedCommand&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;cwB0AGEAcgB0ACAAaAB0AHQAcAA6AC8ALwBiAGEAaQBkAHUALgBjAG8AbQA=&#x27;</span></span><br><span class="line">    <span class="comment">// &#x27;start http://baidu.com&#x27; ä¸Šé¢æ˜¯è¿™ä¸€è¡Œå‘½ä»¤çš„ç¼–ç </span></span><br><span class="line">], &#123;</span><br><span class="line">    <span class="attr">windowsVerbatimArguments</span>: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>ä¸‹é¢æ˜¯æ•ˆæœå›¾</strong><br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/20211191146.gif"><br><strong>å¥‡æ€ªçš„çŸ¥è¯†åˆå¢åŠ äº† ğŸŒŸ</strong></p>
]]></content>
      <categories>
        <category>ä¸€äº›è¶£äº‹çš„ğŸŒŸ</category>
      </categories>
  </entry>
  <entry>
    <title>å¯¹javaScriptäº‹ä»¶å†’æ³¡ä¸äº‹ä»¶æ•è·çš„å†å­¦ä¹ </title>
    <url>/2021/10/21/%E5%AF%B9javaScript%E4%BA%8B%E4%BB%B6%E5%86%92%E6%B3%A1%E4%B8%8E%E4%BA%8B%E4%BB%B6%E6%8D%95%E8%8E%B7%E7%9A%84%E5%86%8D%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="å¯¹-javaScript-äº‹ä»¶å†’æ³¡ä¸äº‹ä»¶æ•è·çš„å†å­¦ä¹ "><a href="#å¯¹-javaScript-äº‹ä»¶å†’æ³¡ä¸äº‹ä»¶æ•è·çš„å†å­¦ä¹ " class="headerlink" title="å¯¹ javaScript äº‹ä»¶å†’æ³¡ä¸äº‹ä»¶æ•è·çš„å†å­¦ä¹ "></a>å¯¹ javaScript äº‹ä»¶å†’æ³¡ä¸äº‹ä»¶æ•è·çš„å†å­¦ä¹ </h1><h2 id="DOM-æ ‘ç»“æ„"><a href="#DOM-æ ‘ç»“æ„" class="headerlink" title="DOM æ ‘ç»“æ„"></a>DOM æ ‘ç»“æ„</h2><p>æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸Šä¼šçœ‹è§ä¸€é¢— dom æ ‘ï¼Œè¿™æ ·çš„æ ‘çŠ¶ç»“æ„å†³å®šäº†äº‹ä»¶çš„å†’æ³¡ä¸æ•è·ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello Github Action<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;out-A&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;out-B&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;out-C&quot;</span>&gt;</span>hello, I&#x27;am C<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h2 id="äº‹ä»¶æ•è·ä¸äº‹ä»¶å†’æ³¡æµç¨‹"><a href="#äº‹ä»¶æ•è·ä¸äº‹ä»¶å†’æ³¡æµç¨‹" class="headerlink" title="äº‹ä»¶æ•è·ä¸äº‹ä»¶å†’æ³¡æµç¨‹"></a>äº‹ä»¶æ•è·ä¸äº‹ä»¶å†’æ³¡æµç¨‹</h2><p><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/bubbling-capturing.png" alt="äº‹ä»¶å†’æ³¡ä¸æ•è·"></p>
<h4 id="é¦–å…ˆï¼Œäº‹ä»¶å†’æ³¡æ•è·å»ºç«‹åœ¨çˆ¶å­èŠ‚ç‚¹ç»‘å®šäº†ç›¸åŒç±»å‹çš„äº‹ä»¶ã€‚æ¯”å¦‚ï¼šéƒ½ç»‘å®šäº†-onclick-ç‚¹å‡»äº‹ä»¶ã€‚"><a href="#é¦–å…ˆï¼Œäº‹ä»¶å†’æ³¡æ•è·å»ºç«‹åœ¨çˆ¶å­èŠ‚ç‚¹ç»‘å®šäº†ç›¸åŒç±»å‹çš„äº‹ä»¶ã€‚æ¯”å¦‚ï¼šéƒ½ç»‘å®šäº†-onclick-ç‚¹å‡»äº‹ä»¶ã€‚" class="headerlink" title="é¦–å…ˆï¼Œäº‹ä»¶å†’æ³¡æ•è·å»ºç«‹åœ¨çˆ¶å­èŠ‚ç‚¹ç»‘å®šäº†ç›¸åŒç±»å‹çš„äº‹ä»¶ã€‚æ¯”å¦‚ï¼šéƒ½ç»‘å®šäº† onclick ç‚¹å‡»äº‹ä»¶ã€‚"></a>é¦–å…ˆï¼Œäº‹ä»¶å†’æ³¡æ•è·å»ºç«‹åœ¨çˆ¶å­èŠ‚ç‚¹ç»‘å®šäº†ç›¸åŒç±»å‹çš„äº‹ä»¶ã€‚æ¯”å¦‚ï¼šéƒ½ç»‘å®šäº† onclick ç‚¹å‡»äº‹ä»¶ã€‚</h4><h5 id="1-å½“æˆ‘ä»¬ç‚¹å‡»æœ€é‡Œé¢çš„-div-æ ‡ç­¾æ—¶ï¼Œ"><a href="#1-å½“æˆ‘ä»¬ç‚¹å‡»æœ€é‡Œé¢çš„-div-æ ‡ç­¾æ—¶ï¼Œ" class="headerlink" title="1.å½“æˆ‘ä»¬ç‚¹å‡»æœ€é‡Œé¢çš„ div æ ‡ç­¾æ—¶ï¼Œ"></a>1.å½“æˆ‘ä»¬ç‚¹å‡»æœ€é‡Œé¢çš„ div æ ‡ç­¾æ—¶ï¼Œ</h5><p>ä¼šå…ˆæ²¿ç€ window-&gt;document-&gt;parentNodes-&gt;EventTarget è·¯çº¿è¿›è¡Œäº‹ä»¶æ•è·ï¼Œåœ¨æ•è·æ—¶ä¼šè¿›è¡Œå¯¹æ¯ä¸ª html å¯¹è±¡è¯¢é—®æ˜¯å¦ç»‘å®šäº†è¯¥äº‹ä»¶çš„ listener,å¦‚æœæœ‰åˆ™æ‰§è¡Œå®ƒã€‚è€Œäº‹ä»¶å†’æ³¡åˆ™ä¸ä¸Šé¢è·¯çº¿ç›¸åï¼Œä½†è¯¢é—®è¡Œä¸ºç›¸åŒã€‚ ######ä¸€èˆ¬æˆ‘ä»¬ç»™ html å…ƒç´ æ·»åŠ äº‹ä»¶æ—¶ï¼Œä¼šä½¿ç”¨ HTMLElement.addEventListener(type, listener, useCapture)ç»™å…¶æ·»åŠ äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè¿™é‡Œçš„å‚æ•°è¯¦è§<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener">EventTarget.addEventListener</a>ã€‚éœ€è¦ç‰¹åˆ«è¯´æ˜çš„æ˜¯ç¬¬ä¸‰ä¸ªå‚æ•°:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">useCapture:boolean</span><br><span class="line"></span><br><span class="line">OR</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">	<span class="attr">capture</span>:boolean,</span><br><span class="line">	<span class="attr">once</span>:boolean,</span><br><span class="line">	<span class="attr">passive</span>:boolean</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œçš„ useCapture ä»¥åŠ capture å°±æ˜¯è®¾ç½®è¯¥äº‹ä»¶ listener æ˜¯å¦ä¼šåœ¨æ•è·é˜¶æ®µè§¦å‘ï¼Œé»˜è®¤ä¸º falseã€‚</p>
<h5 id="2-æˆ‘ä»¬ä»¥å¦‚ä¸‹ä¾‹å­ä¸ºä¾‹ï¼š"><a href="#2-æˆ‘ä»¬ä»¥å¦‚ä¸‹ä¾‹å­ä¸ºä¾‹ï¼š" class="headerlink" title="2.æˆ‘ä»¬ä»¥å¦‚ä¸‹ä¾‹å­ä¸ºä¾‹ï¼š"></a>2.æˆ‘ä»¬ä»¥å¦‚ä¸‹ä¾‹å­ä¸ºä¾‹ï¼š</h5><h6 id="è¿™é‡Œç»˜åˆ¶ä¸€ä¸ªä¸‰å±‚åµŒå¥—çš„-divï¼Œå¹¶ç»™å®ƒä»¬æ·»åŠ ç‚¹å‡»äº‹ä»¶ã€‚"><a href="#è¿™é‡Œç»˜åˆ¶ä¸€ä¸ªä¸‰å±‚åµŒå¥—çš„-divï¼Œå¹¶ç»™å®ƒä»¬æ·»åŠ ç‚¹å‡»äº‹ä»¶ã€‚" class="headerlink" title="è¿™é‡Œç»˜åˆ¶ä¸€ä¸ªä¸‰å±‚åµŒå¥—çš„ divï¼Œå¹¶ç»™å®ƒä»¬æ·»åŠ ç‚¹å‡»äº‹ä»¶ã€‚"></a>è¿™é‡Œç»˜åˆ¶ä¸€ä¸ªä¸‰å±‚åµŒå¥—çš„ divï¼Œå¹¶ç»™å®ƒä»¬æ·»åŠ ç‚¹å‡»äº‹ä»¶ã€‚</h6><p><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/div.png" alt="div"></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> diva = <span class="built_in">document</span>.querySelector(<span class="string">&quot;.out-A&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> divb = <span class="built_in">document</span>.querySelector(<span class="string">&quot;.out-B&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> divc = <span class="built_in">document</span>.querySelector(<span class="string">&quot;.out-C&quot;</span>);</span><br><span class="line">diva.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">divb.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">divc.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;C&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬ç‚¹å‡» C,å‡ºç°å¦‚ä¸‹ç»“æœï¼š<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/output.png" alt="output"><br>å¯ä»¥çœ‹è§ç‚¹å‡» C åå‡ºç°äº† C-&gt;B-&gt;A çš„è¾“å‡ºé¡ºåºï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç° CBA çš„è¾“å‡ºé¡ºåºå‘¢ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨æ·»åŠ äº‹ä»¶æ—¶ï¼Œä½¿ç”¨äº† capture çš„é»˜è®¤å€¼ false,å³åœ¨äº‹ä»¶æ•è·é˜¶æ®µä¸ä¼šè§¦å‘äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p>
<h6 id="å°†-capture-çš„å€¼è®¾ç½®ä¸º-true"><a href="#å°†-capture-çš„å€¼è®¾ç½®ä¸º-true" class="headerlink" title="å°† capture çš„å€¼è®¾ç½®ä¸º true"></a>å°† capture çš„å€¼è®¾ç½®ä¸º true</h6><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">diva.addEventListener(</span><br><span class="line">  <span class="string">&quot;click&quot;</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">true</span></span><br><span class="line">);</span><br><span class="line">divb.addEventListener(</span><br><span class="line">  <span class="string">&quot;click&quot;</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">true</span></span><br><span class="line">);</span><br><span class="line">divc.addEventListener(</span><br><span class="line">  <span class="string">&quot;click&quot;</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;C&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">true</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœä¸ºï¼š<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202110202333.png"><br>è¿™é‡Œå¯ä»¥çœ‹è§è¾“å‡ºç»“æœå˜ä¸ºäº† ABCï¼Œè¿™å°±æ˜¯ä»çˆ¶èŠ‚ç‚¹åˆ° EventTarget èŠ‚ç‚¹çš„æ•è·ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å‘ç°ï¼Œå¦‚æœåªç»™èŠ‚ç‚¹æ·»åŠ ä¸€ä¸ªäº‹ä»¶å¤„ç†ï¼Œè¿™æ ·åªä¼šè¿›è¡Œæ•è·æˆ–è€…å†’æ³¡ã€‚æ‰€ä»¥ä¸‹é¢æˆ‘ä»¬ç»™ä¸€ä¸ªèŠ‚ç‚¹æ·»åŠ ä¸¤ä¸ª click äº‹ä»¶ï¼Œå¹¶ä¸”æŠŠå…¶ä¸­ä¸€ä¸ªçš„ capture è®¾ç½®ä¸º true,å¦ä¸€ä¸ªä¸º false.</p>
<h6 id="ç»™ä¸€ä¸ªèŠ‚ç‚¹æ·»åŠ ä¸¤ä¸ª-click-äº‹ä»¶ï¼Œå¹¶ä¸”æŠŠå…¶ä¸­ä¸€ä¸ªçš„-capture-è®¾ç½®ä¸º-true-å¦ä¸€ä¸ªä¸º-false"><a href="#ç»™ä¸€ä¸ªèŠ‚ç‚¹æ·»åŠ ä¸¤ä¸ª-click-äº‹ä»¶ï¼Œå¹¶ä¸”æŠŠå…¶ä¸­ä¸€ä¸ªçš„-capture-è®¾ç½®ä¸º-true-å¦ä¸€ä¸ªä¸º-false" class="headerlink" title="ç»™ä¸€ä¸ªèŠ‚ç‚¹æ·»åŠ ä¸¤ä¸ª click äº‹ä»¶ï¼Œå¹¶ä¸”æŠŠå…¶ä¸­ä¸€ä¸ªçš„ capture è®¾ç½®ä¸º true,å¦ä¸€ä¸ªä¸º false."></a>ç»™ä¸€ä¸ªèŠ‚ç‚¹æ·»åŠ ä¸¤ä¸ª click äº‹ä»¶ï¼Œå¹¶ä¸”æŠŠå…¶ä¸­ä¸€ä¸ªçš„ capture è®¾ç½®ä¸º true,å¦ä¸€ä¸ªä¸º false.</h6><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">diva.addEventListener(</span><br><span class="line">  <span class="string">&quot;click&quot;</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;A:capture=true&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">true</span></span><br><span class="line">);</span><br><span class="line">divb.addEventListener(</span><br><span class="line">  <span class="string">&quot;click&quot;</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;B:capture=true&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">true</span></span><br><span class="line">);</span><br><span class="line">divc.addEventListener(</span><br><span class="line">  <span class="string">&quot;click&quot;</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;C:capture=true&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">true</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">//   é»˜è®¤false</span></span><br><span class="line">diva.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;A:capture=false&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">divb.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;B:capture=false&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">divc.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;C:capture=false&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å†æ¬¡ç‚¹å‡» C,è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202110202341.png"><br>çœ‹çœ‹ï¼Œè¿™é‡Œçš„ç»“æœè¡¨ç¤ºåŒæ—¶å‡ºç°äº†äº‹ä»¶æ•è·ä¸äº‹ä»¶å†’æ³¡ã€‚<br><font color="green">åˆ°äº†è¿™é‡Œï¼Œæƒ³å¿…å¤§å®¶å¯¹äºäº‹ä»¶çš„æ•è·ä¸å†’æ³¡æµç¨‹æœ‰äº†ä¸€å®šçš„äº†è§£å§ã€‚</font>ä¸‹é¢æˆ‘ä»¬å†æ¥èŠèŠ Event.stopPropagation()ä¸ Event.preventDefault()</p>
<h2 id="Event-stopPropagation-ä¸-Event-preventDefault"><a href="#Event-stopPropagation-ä¸-Event-preventDefault" class="headerlink" title="Event.stopPropagation()ä¸ Event.preventDefault()"></a>Event.stopPropagation()ä¸ Event.preventDefault()</h2><h4 id="Event-stopPropagation"><a href="#Event-stopPropagation" class="headerlink" title="Event.stopPropagation()"></a>Event.stopPropagation()</h4><h6 id="åŒæ ·æ˜¯ä¸Šé¢çš„ä¾‹å­ã€‚æˆ‘ä»¬ç»™-A-capture-trueï¼ˆæ•è·é˜¶æ®µï¼‰çš„é‚£ä¸ªäº‹ä»¶å¤„ç†åŠ ä¸Š-stopPropagation-çœ‹çœ‹ä¸‹é¢çš„è¾“å‡ºï¼š"><a href="#åŒæ ·æ˜¯ä¸Šé¢çš„ä¾‹å­ã€‚æˆ‘ä»¬ç»™-A-capture-trueï¼ˆæ•è·é˜¶æ®µï¼‰çš„é‚£ä¸ªäº‹ä»¶å¤„ç†åŠ ä¸Š-stopPropagation-çœ‹çœ‹ä¸‹é¢çš„è¾“å‡ºï¼š" class="headerlink" title="åŒæ ·æ˜¯ä¸Šé¢çš„ä¾‹å­ã€‚æˆ‘ä»¬ç»™ A:capture=trueï¼ˆæ•è·é˜¶æ®µï¼‰çš„é‚£ä¸ªäº‹ä»¶å¤„ç†åŠ ä¸Š stopPropagation().çœ‹çœ‹ä¸‹é¢çš„è¾“å‡ºï¼š"></a>åŒæ ·æ˜¯ä¸Šé¢çš„ä¾‹å­ã€‚æˆ‘ä»¬ç»™ A:capture=trueï¼ˆæ•è·é˜¶æ®µï¼‰çš„é‚£ä¸ªäº‹ä»¶å¤„ç†åŠ ä¸Š stopPropagation().çœ‹çœ‹ä¸‹é¢çš„è¾“å‡ºï¼š</h6><p><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202110202353.png"></p>
<h6 id="åªè¾“å‡ºäº†æ•è·é˜¶æ®µçš„-A-å¤„ç†å‡½æ•°ï¼Œåé¢å­èŠ‚ç‚¹çš„äº‹ä»¶å‡½æ•°éƒ½æ²¡æœ‰è§¦å‘ã€‚é‚£æˆ‘ä»¬åœ¨å†’æ³¡é˜¶æ®µæ·»åŠ è¿™ä¸€è¡Œåˆä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿä¸‹é¢å°†æ·»åŠ -stopPropagation-åˆ°-C-çš„å†’æ³¡å¤„ç†å‡½æ•°é‡Œï¼Œå³åœ¨-C-capture-false-é‡Œé¢ã€‚ä¸‹é¢æ˜¯è¾“å‡ºç»“æœï¼š"><a href="#åªè¾“å‡ºäº†æ•è·é˜¶æ®µçš„-A-å¤„ç†å‡½æ•°ï¼Œåé¢å­èŠ‚ç‚¹çš„äº‹ä»¶å‡½æ•°éƒ½æ²¡æœ‰è§¦å‘ã€‚é‚£æˆ‘ä»¬åœ¨å†’æ³¡é˜¶æ®µæ·»åŠ è¿™ä¸€è¡Œåˆä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿä¸‹é¢å°†æ·»åŠ -stopPropagation-åˆ°-C-çš„å†’æ³¡å¤„ç†å‡½æ•°é‡Œï¼Œå³åœ¨-C-capture-false-é‡Œé¢ã€‚ä¸‹é¢æ˜¯è¾“å‡ºç»“æœï¼š" class="headerlink" title="åªè¾“å‡ºäº†æ•è·é˜¶æ®µçš„ A å¤„ç†å‡½æ•°ï¼Œåé¢å­èŠ‚ç‚¹çš„äº‹ä»¶å‡½æ•°éƒ½æ²¡æœ‰è§¦å‘ã€‚é‚£æˆ‘ä»¬åœ¨å†’æ³¡é˜¶æ®µæ·»åŠ è¿™ä¸€è¡Œåˆä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿä¸‹é¢å°†æ·»åŠ  stopPropagation åˆ° C çš„å†’æ³¡å¤„ç†å‡½æ•°é‡Œï¼Œå³åœ¨ C:capture=false é‡Œé¢ã€‚ä¸‹é¢æ˜¯è¾“å‡ºç»“æœï¼š"></a>åªè¾“å‡ºäº†æ•è·é˜¶æ®µçš„ A å¤„ç†å‡½æ•°ï¼Œåé¢å­èŠ‚ç‚¹çš„äº‹ä»¶å‡½æ•°éƒ½æ²¡æœ‰è§¦å‘ã€‚é‚£æˆ‘ä»¬åœ¨å†’æ³¡é˜¶æ®µæ·»åŠ è¿™ä¸€è¡Œåˆä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿä¸‹é¢å°†æ·»åŠ  stopPropagation åˆ° C çš„å†’æ³¡å¤„ç†å‡½æ•°é‡Œï¼Œå³åœ¨ C:capture=false é‡Œé¢ã€‚ä¸‹é¢æ˜¯è¾“å‡ºç»“æœï¼š</h6><p><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202110210005.png"></p>
<h6 id="åŒæ ·çš„ï¼Œäº‹ä»¶æ•è·ä¸äº‹ä»¶å†’æ³¡æµç¨‹è¢«æˆªæ–­äº†ã€‚"><a href="#åŒæ ·çš„ï¼Œäº‹ä»¶æ•è·ä¸äº‹ä»¶å†’æ³¡æµç¨‹è¢«æˆªæ–­äº†ã€‚" class="headerlink" title="åŒæ ·çš„ï¼Œäº‹ä»¶æ•è·ä¸äº‹ä»¶å†’æ³¡æµç¨‹è¢«æˆªæ–­äº†ã€‚"></a>åŒæ ·çš„ï¼Œäº‹ä»¶æ•è·ä¸äº‹ä»¶å†’æ³¡æµç¨‹è¢«æˆªæ–­äº†ã€‚</h6><h5 id="çœ‹åˆ°è¿™é‡Œï¼Œæƒ³å¿…æ˜ç™½äº†å§ï¼ŒstopPropagation-å°±å¥½æ¯”ä¸€æŠŠâ€˜åˆ€â€™ï¼Œä½ æŠŠå®ƒæ·»åŠ åˆ°ä»€ä¹ˆé˜¶æ®µï¼Œé‚£ä¹ˆè¿™ä¸ªé˜¶æ®µåé¢çš„å°±ä¼šè¢«æˆªå»ã€‚"><a href="#çœ‹åˆ°è¿™é‡Œï¼Œæƒ³å¿…æ˜ç™½äº†å§ï¼ŒstopPropagation-å°±å¥½æ¯”ä¸€æŠŠâ€˜åˆ€â€™ï¼Œä½ æŠŠå®ƒæ·»åŠ åˆ°ä»€ä¹ˆé˜¶æ®µï¼Œé‚£ä¹ˆè¿™ä¸ªé˜¶æ®µåé¢çš„å°±ä¼šè¢«æˆªå»ã€‚" class="headerlink" title="çœ‹åˆ°è¿™é‡Œï¼Œæƒ³å¿…æ˜ç™½äº†å§ï¼ŒstopPropagation å°±å¥½æ¯”ä¸€æŠŠâ€˜åˆ€â€™ï¼Œä½ æŠŠå®ƒæ·»åŠ åˆ°ä»€ä¹ˆé˜¶æ®µï¼Œé‚£ä¹ˆè¿™ä¸ªé˜¶æ®µåé¢çš„å°±ä¼šè¢«æˆªå»ã€‚"></a>çœ‹åˆ°è¿™é‡Œï¼Œæƒ³å¿…æ˜ç™½äº†å§ï¼ŒstopPropagation å°±å¥½æ¯”ä¸€æŠŠâ€˜åˆ€â€™ï¼Œä½ æŠŠå®ƒæ·»åŠ åˆ°ä»€ä¹ˆé˜¶æ®µï¼Œé‚£ä¹ˆè¿™ä¸ªé˜¶æ®µåé¢çš„å°±ä¼šè¢«æˆªå»ã€‚</h5><ul>
<li>è€Œæ•´ä¸ªæµç¨‹æ˜¯ï¼š</li>
</ul>
<h6 id="äº‹ä»¶æ•è·åˆ°äº‹ä»¶å†’æ³¡"><a href="#äº‹ä»¶æ•è·åˆ°äº‹ä»¶å†’æ³¡" class="headerlink" title="äº‹ä»¶æ•è·åˆ°äº‹ä»¶å†’æ³¡"></a>äº‹ä»¶æ•è·åˆ°äº‹ä»¶å†’æ³¡</h6><h6 id="çˆ¶èŠ‚ç‚¹åˆ°-EventTarget-èŠ‚ç‚¹å†åˆ°çˆ¶èŠ‚ç‚¹"><a href="#çˆ¶èŠ‚ç‚¹åˆ°-EventTarget-èŠ‚ç‚¹å†åˆ°çˆ¶èŠ‚ç‚¹" class="headerlink" title="çˆ¶èŠ‚ç‚¹åˆ° EventTarget èŠ‚ç‚¹å†åˆ°çˆ¶èŠ‚ç‚¹"></a>çˆ¶èŠ‚ç‚¹åˆ° EventTarget èŠ‚ç‚¹å†åˆ°çˆ¶èŠ‚ç‚¹</h6><h4 id="Event-preventDefault"><a href="#Event-preventDefault" class="headerlink" title="Event.preventDefault()"></a>Event.preventDefault()</h4><p>é‚£æŠŠä¸Šé¢çš„æ”¹æˆ preventDefault åˆä¼šæ˜¯æ€æ ·çš„ç»“æœå‘¢ï¼Ÿé‚£å°±è¯•è¯•çœ‹å’¯ï¼š<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202110202356.png"><br>æ²¡æœ‰å½±å“ï¼ï¼ï¼preventDefault åœ¨æ²¡æœ‰å¯¹äº‹ä»¶æ•è·äº§ç”Ÿå½±å“ï¼Œé‚£å†’æ³¡é˜¶æ®µå‘¢ï¼Ÿä¹Ÿæ²¡æœ‰å½±å“ã€‚æ‰€ä»¥ preventDefault åªæ˜¯å•çº¯çš„é˜»æ­¢äº† html å…ƒç´ çš„é»˜è®¤äº‹ä»¶ï¼Œæ¯”å¦‚ä¸€ä¸ª a æ ‡ç­¾èƒ½å¤Ÿè·³è½¬é“¾æ¥ï¼ŒåŠ ä¸Š preventDefault åå°±ä¸èƒ½è·³è½¬äº†ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><h6 id="æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¯ä»¥ä½¿ç”¨-stopPropagation-é˜»æ­¢äº‹ä»¶çš„å†’æ³¡ã€‚é€šå¸¸æˆ‘ä»¬åœ¨ç»™-html-å…ƒç´ æ·»åŠ äº‹ä»¶æ—¶ï¼Œä¸€èˆ¬éƒ½ä¼šä½¿ç”¨-capture-çš„é»˜è®¤å€¼ï¼šfalse-è¿™æ ·å°±åªä¼šåœ¨å†’æ³¡é˜¶æ®µè§¦å‘äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè¿™æ ·é€šå¸¸æˆ‘ä»¬åªéœ€è¦åœ¨-capture-ä¸º-false-çš„æƒ…å†µä¸‹ï¼Œç»™-EventTarget-å…ƒç´ æ·»åŠ -stopPropagation-å°±è¡Œäº†ï¼Œè¿™æ ·ï¼Œæ— è®ºåœ¨æ•è·é˜¶æ®µè¿˜æ˜¯åœ¨å†’æ³¡é˜¶æ®µéƒ½åªä¼šè§¦å‘-EventTarget-çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä»è€Œå‡å°‘ä¸å¿…è¦çš„å‰¯ä½œç”¨ã€‚"><a href="#æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¯ä»¥ä½¿ç”¨-stopPropagation-é˜»æ­¢äº‹ä»¶çš„å†’æ³¡ã€‚é€šå¸¸æˆ‘ä»¬åœ¨ç»™-html-å…ƒç´ æ·»åŠ äº‹ä»¶æ—¶ï¼Œä¸€èˆ¬éƒ½ä¼šä½¿ç”¨-capture-çš„é»˜è®¤å€¼ï¼šfalse-è¿™æ ·å°±åªä¼šåœ¨å†’æ³¡é˜¶æ®µè§¦å‘äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè¿™æ ·é€šå¸¸æˆ‘ä»¬åªéœ€è¦åœ¨-capture-ä¸º-false-çš„æƒ…å†µä¸‹ï¼Œç»™-EventTarget-å…ƒç´ æ·»åŠ -stopPropagation-å°±è¡Œäº†ï¼Œè¿™æ ·ï¼Œæ— è®ºåœ¨æ•è·é˜¶æ®µè¿˜æ˜¯åœ¨å†’æ³¡é˜¶æ®µéƒ½åªä¼šè§¦å‘-EventTarget-çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä»è€Œå‡å°‘ä¸å¿…è¦çš„å‰¯ä½œç”¨ã€‚" class="headerlink" title="æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¯ä»¥ä½¿ç”¨ stopPropagation é˜»æ­¢äº‹ä»¶çš„å†’æ³¡ã€‚é€šå¸¸æˆ‘ä»¬åœ¨ç»™ html å…ƒç´ æ·»åŠ äº‹ä»¶æ—¶ï¼Œä¸€èˆ¬éƒ½ä¼šä½¿ç”¨ capture çš„é»˜è®¤å€¼ï¼šfalse,è¿™æ ·å°±åªä¼šåœ¨å†’æ³¡é˜¶æ®µè§¦å‘äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè¿™æ ·é€šå¸¸æˆ‘ä»¬åªéœ€è¦åœ¨ capture ä¸º false çš„æƒ…å†µä¸‹ï¼Œç»™ EventTarget å…ƒç´ æ·»åŠ  stopPropagation å°±è¡Œäº†ï¼Œè¿™æ ·ï¼Œæ— è®ºåœ¨æ•è·é˜¶æ®µè¿˜æ˜¯åœ¨å†’æ³¡é˜¶æ®µéƒ½åªä¼šè§¦å‘ EventTarget çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä»è€Œå‡å°‘ä¸å¿…è¦çš„å‰¯ä½œç”¨ã€‚"></a>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¯ä»¥ä½¿ç”¨ stopPropagation é˜»æ­¢äº‹ä»¶çš„å†’æ³¡ã€‚é€šå¸¸æˆ‘ä»¬åœ¨ç»™ html å…ƒç´ æ·»åŠ äº‹ä»¶æ—¶ï¼Œä¸€èˆ¬éƒ½ä¼šä½¿ç”¨ capture çš„é»˜è®¤å€¼ï¼šfalse,è¿™æ ·å°±åªä¼šåœ¨å†’æ³¡é˜¶æ®µè§¦å‘äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè¿™æ ·é€šå¸¸æˆ‘ä»¬åªéœ€è¦åœ¨ capture ä¸º false çš„æƒ…å†µä¸‹ï¼Œç»™ EventTarget å…ƒç´ æ·»åŠ  stopPropagation å°±è¡Œäº†ï¼Œè¿™æ ·ï¼Œæ— è®ºåœ¨æ•è·é˜¶æ®µè¿˜æ˜¯åœ¨å†’æ³¡é˜¶æ®µéƒ½åªä¼šè§¦å‘ EventTarget çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä»è€Œå‡å°‘ä¸å¿…è¦çš„å‰¯ä½œç”¨ã€‚</h6><p>å‚è€ƒï¼š<a href="https://web.dev/eventing-deepdive/">JavaScript eventing deep dive</a></p>
]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>Event</tag>
      </tags>
  </entry>
  <entry>
    <title>è°ˆè°ˆcookieã€sessionä¸token(jwt)</title>
    <url>/2021/12/07/%E8%B0%88%E8%B0%88cookie%E3%80%81session%E4%B8%8Etoken-jwt/</url>
    <content><![CDATA[<p><strong>é¦–å…ˆå‘¢ï¼Œç½‘ä¸Šå…³äºå®ƒä»¬çš„æ–‡ç« å·²ç»å¾ˆå¤šäº†ï¼Œåœ¨è¿™é‡Œæˆ‘å°±åªæ˜¯æ¥è®°å½•ä»¥ä¸‹æˆ‘çš„ç†è§£ï¼Œå…¶å®ä¹Ÿæ˜¯çœ‹å…¶ä»–ç½‘ä¸Šå†…å®¹çš„ä¸€ä¸ªæ€»ç»“å§ã€‚</strong></p>
<blockquote>
<p><strong>å‰è¨€ï¼šç”±äº HTTP åè®®æ— çŠ¶æ€çš„ç¼ºé™·ã€‚WEB çš„è®¾è®¡è€…ä»¬æå‡ºäº† Cookie å’Œ Session ä¸¤ç§è§£å†³æœºåˆ¶ã€‚è€Œ token,é€šå¸¸æ˜¯ jwt(json web token)ä½œä¸ºä¸€ç§ç”¨æˆ·èº«ä»½ä»¤ç‰Œï¼Œä¹Ÿå¸¸å¸¸ç”¨äºè®°å½• http çš„çŠ¶æ€å­˜å‚¨ï¼Œé€šå¸¸æ˜¯åœ¨ç”¨æˆ·ç™»å½•åï¼Œä¼´éšæ¯ä¸€æ¬¡è¯·æ±‚å‘é€ç»™ç»™åç«¯ã€‚ä¸‹é¢å°±æ¥èŠèŠå®ƒä»¬ã€‚</strong></p>
</blockquote>
 <span id="more"></span>

<h3 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h3><h4 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h4><p>Cookie æ˜¯ä¸€æ®µä¸è¶…è¿‡ 4KB çš„å°å‹æ–‡æœ¬æ•°æ®ï¼Œç”±ä¸€ä¸ªåç§°ï¼ˆNameï¼‰ã€ä¸€ä¸ªå€¼ï¼ˆValueï¼‰å’Œå…¶å®ƒå‡ ä¸ªç”¨äºæ§åˆ¶ Cookie æœ‰æ•ˆæœŸã€å®‰å…¨æ€§ã€ä½¿ç”¨èŒƒå›´çš„å¯é€‰å±æ€§ç»„æˆã€‚<br>åŒ…æ‹¬ï¼š</p>
<ol>
<li>Name/Valueï¼šè®¾ç½® Cookie çš„åç§°åŠç›¸å¯¹åº”çš„å€¼ï¼Œå¯¹äºè®¤è¯ Cookieï¼ŒValue å€¼åŒ…æ‹¬ Web æœåŠ¡å™¨æ‰€æä¾›çš„è®¿é—®ä»¤ç‰Œã€‚</li>
<li>Expires å±æ€§ï¼šè®¾ç½® Cookie çš„ç”Ÿå­˜æœŸã€‚æœ‰ä¸¤ç§å­˜å‚¨ç±»å‹çš„ Cookieï¼šä¼šè¯æ€§ä¸æŒä¹…æ€§ã€‚Expires å±æ€§ç¼ºçœæ—¶ï¼Œä¸ºä¼šè¯æ€§ Cookieï¼Œä»…ä¿å­˜åœ¨å®¢æˆ·ç«¯å†…å­˜ä¸­ï¼Œå¹¶åœ¨ç”¨æˆ·å…³é—­æµè§ˆå™¨æ—¶å¤±æ•ˆï¼›æŒä¹…æ€§ Cookie ä¼šä¿å­˜åœ¨ç”¨æˆ·çš„ç¡¬ç›˜ä¸­ï¼Œç›´è‡³ç”Ÿå­˜æœŸåˆ°æˆ–ç”¨æˆ·ç›´æ¥åœ¨ç½‘é¡µä¸­å•å‡»â€œæ³¨é”€â€ç­‰æŒ‰é’®ç»“æŸä¼šè¯æ—¶æ‰ä¼šå¤±æ•ˆã€‚</li>
<li>Domain å±æ€§ï¼šæŒ‡å®šäº†å¯ä»¥è®¿é—®è¯¥ Cookie çš„ Web ç«™ç‚¹æˆ–åŸŸã€‚Cookie æœºåˆ¶å¹¶æœªéµå¾ªä¸¥æ ¼çš„åŒæºç­–ç•¥ï¼Œå…è®¸ä¸€ä¸ªå­åŸŸï¼ˆåŸŸåå‰ç¼€ä¸åŒï¼‰å¯ä»¥è®¾ç½®æˆ–è·å–å…¶çˆ¶åŸŸçš„ Cookieã€‚</li>
<li>Secure å±æ€§ï¼šæŒ‡å®šæ˜¯å¦ä½¿ç”¨ HTTPS å®‰å…¨åè®®å‘é€ Cookieã€‚</li>
<li>Path å±æ€§ï¼šå®šä¹‰äº† Web ç«™ç‚¹ä¸Šå¯ä»¥è®¿é—®è¯¥ Cookie çš„ç›®å½•ã€‚</li>
<li>HTTPOnly å±æ€§ ï¼šç”¨äºé˜²æ­¢å®¢æˆ·ç«¯è„šæœ¬é€šè¿‡ document.cookie å±æ€§è®¿é—® Cookieï¼Œæœ‰åŠ©äºä¿æŠ¤ Cookie ä¸è¢«è·¨ç«™è„šæœ¬æ”»å‡»çªƒå–æˆ–ç¯¡æ”¹ã€‚ä½†æ˜¯ï¼ŒHTTPOnly çš„åº”ç”¨ä»å­˜åœ¨å±€é™æ€§ï¼Œä¸€äº›æµè§ˆå™¨å¯ä»¥é˜»æ­¢å®¢æˆ·ç«¯è„šæœ¬å¯¹ Cookie çš„è¯»æ“ä½œï¼Œä½†å…è®¸å†™æ“ä½œï¼›æ­¤å¤–å¤§å¤šæ•°æµè§ˆå™¨ä»å…è®¸é€šè¿‡ XMLHTTP å¯¹è±¡è¯»å– HTTP å“åº”ä¸­çš„ Set-Cookie å¤´ã€‚<br><strong>å¥½äº†ï¼Œä»¥ä¸Šå†…å®¹æ˜¯æ¥è‡ªç™¾åº¦ç™¾ç§‘ã€‚ç®€å•åœ°åšä¸ªæ€»ç»“ï¼šcookie æ˜¯ä¸€ç§å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„å°å‹æ–‡æœ¬æ•°æ®ï¼Œé‡Œé¢çš„ç±»å®¹æœ‰é”®å€¼å¯¹ã€ç”Ÿå­˜å‘¨æœŸã€è®¿é—®åŸŸã€æ˜¯å¦ä½¿ç”¨ http,web ç«™ç‚¹å¯è®¿é—® cookie çš„ç›®å½•ä»¥åŠæ˜¯å¦å…è®¸å®¢æˆ·ç«¯è¯»å– cookieã€‚</strong></li>
</ol>
<h4 id="å®‰å…¨æ€§"><a href="#å®‰å…¨æ€§" class="headerlink" title="å®‰å…¨æ€§"></a>å®‰å…¨æ€§</h4><p><strong>XSRF/CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰</strong>ï¼šåˆ©ç”¨çš„æ˜¯ web ä¸­ç”¨æˆ·èº«ä»½éªŒè¯çš„ä¸€ä¸ªæ¼æ´ï¼šç®€å•çš„èº«ä»½éªŒè¯åªèƒ½ä¿è¯è¯·æ±‚å‘è‡ªæŸä¸ªç”¨æˆ·çš„æµè§ˆå™¨,å´ä¸èƒ½ä¿è¯è¯·æ±‚æœ¬èº«æ˜¯ç”¨æˆ·è‡ªæ„¿å‘å‡ºçš„ã€‚è¿™é‡Œæœ‰ä¸€äº›å¦‚ Firefoxã€Opera ç­‰æµè§ˆå™¨ä½¿ç”¨å•è¿›ç¨‹æœºåˆ¶ï¼Œ<strong>å¤šä¸ªçª—å£æˆ–æ ‡ç­¾ä½¿ç”¨åŒä¸€ä¸ªè¿›ç¨‹ï¼Œå…±äº« Cookie ç­‰ä¼šè¯æ•°æ®</strong>ã€‚IE åˆ™æ··åˆä½¿ç”¨å•è¿›ç¨‹ä¸å¤šè¿›ç¨‹æ¨¡å¼ï¼Œä¸€ä¸ªçª—å£ä¸­çš„å¤šä¸ªæ ‡ç­¾ï¼Œä»¥åŠä½¿ç”¨â€œCTRL+Nâ€ æˆ–å•å‡»ç½‘é¡µä¸­çš„é“¾æ¥æ‰“å¼€çš„æ–°çª—å£ä½¿ç”¨åŒä¸€è¿›ç¨‹ï¼Œå…±äº«ä¼šè¯æ•°æ®ï¼›åªæœ‰ç›´æ¥è¿è¡Œ IE å¯æ‰§è¡Œç¨‹åºæ‰“å¼€çª—å£æ—¶ï¼Œæ‰ä¼šåˆ›å»ºæ–°çš„è¿›ç¨‹ã€‚<strong>Chrome è™½ç„¶ä½¿ç”¨å¤šè¿›ç¨‹æœºåˆ¶ï¼Œç„¶è€Œç»æµ‹è¯•å‘ç°ï¼Œå…¶ä¸åŒçš„çª—å£æˆ–æ ‡ç­¾ä¹‹é—´ä»ä¼šå…±äº«ä¼šè¯æ•°æ®ï¼Œé™¤éä½¿ç”¨éšèº«è®¿é—®æ–¹å¼ã€‚</strong>å› è€Œï¼Œç”¨æˆ·åŒæ—¶æ‰“å¼€å¤šä¸ªæµè§ˆå™¨çª—å£æˆ–æ ‡ç­¾è®¿é—®äº’è”ç½‘èµ„æºæ—¶ï¼Œå°±ä¸º CSRF æ”»å‡»ç¯¡å¤ºç”¨æˆ·çš„ä¼šè¯ Cookie åˆ›é€ äº†æ¡ä»¶ã€‚å´ä¸èƒ½ä¿è¯è¯·æ±‚æœ¬èº«æ˜¯ç”¨æˆ·è‡ªæ„¿å‘å‡ºçš„ã€‚å…¶æœ€å…¸å‹çš„ä¾‹å­<strong>å°±æ˜¯å½“ cookie è¿˜æ²¡è¿‡æœŸæ—¶ï¼Œç”¨æˆ·æµè§ˆçš„ç½‘ç«™æœ‰ä¸å…¶æ²¡è¿‡æœŸçš„ç½‘ç«™çš„ä¸€äº› api è¯·æ±‚ï¼Œé‚£ä¹ˆå½“ç”¨æˆ·æµè§ˆè¿™ä¸ªæ¶æ„ç½‘ç«™æ—¶å°±å¯èƒ½ä¼šå—åˆ°å±å®³</strong>ã€‚<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202112161949.png"><br><strong>ä¼šè¯å®šç½®(Session Fixation)æ”»å‡»</strong>æ˜¯æŒ‡ï¼Œæ”»å‡»è€…å‘å—å®³è€…ä¸»æœºæ³¨å…¥è‡ªå·±æ§åˆ¶çš„è®¤è¯ Cookie ç­‰ä¿¡æ¯ï¼Œä½¿å¾—å—å®³è€…ä»¥æ”»å‡»è€…çš„èº«ä»½ç™»å½•ç½‘ç«™ï¼Œä»è€Œçªƒå–å—å®³è€…çš„ä¼šè¯ä¿¡æ¯ã€‚æ³¨å…¥ Cookie çš„æ–¹æ³•åŒ…æ‹¬ï¼šä½¿ç”¨è·¨ç«™è„šæœ¬æˆ–æœ¨é©¬ç­‰æ¶æ„ç¨‹åºï¼›æˆ–ä¼ªé€ ä¸åˆæ³•ç½‘ç«™åŒåŸŸçš„ç«™ç‚¹ï¼Œå¹¶åˆ©ç”¨å„ç§æ–¹æ³•æ¬ºéª—ç”¨æˆ·è®¿é—®è¯¥ä»¿å†’ç½‘ç«™ï¼Œä»è€Œé€šè¿‡ HTTP å“åº”ä¸­çš„ Set-Cookie å¤´å°†æ”»å‡»è€…æ‹¥æœ‰çš„è¯¥åŸŸ Cookie å‘é€ç»™ç”¨æˆ·ç­‰ã€‚å› ä¸º sessionID ä¸€èˆ¬éƒ½ä¼šæ”¾åœ¨ cookie ä¸­å­˜å‚¨ï¼Œæ‰€ä»¥ä¼šå®¹æ˜“å—åˆ°ä¼šè¯å®šåˆ¶æ”»å‡»ã€‚</p>
<h3 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h3><h4 id="æ¦‚å¿µ-1"><a href="#æ¦‚å¿µ-1" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h4><p>ä¸ cookie ç›¸æ¯”ï¼Œsession å°±æ˜¯å­˜æ”¾åœ¨æœåŠ¡ç«¯äº†ï¼Œå®ƒè¡¨ç¤ºåœ¨å®¢æˆ·ç«¯ç™»å½•æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šå‘æ”¾ä¸€ä¸ª sessionid åˆ°å®¢æˆ·ç«¯ï¼Œå®ƒä¸€èˆ¬å­˜åœ¨ cookie ä¸­ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ä»¥åçš„è¯·æ±‚å°±ä¼šåœ¨è¯·æ±‚å¤´çš„ cookies å­—æ®µä¸­æºå¸¦è¿™ä¸ªä¿¡æ¯ã€‚è¿™æ ·æœåŠ¡ç«¯å°±å¯ä»¥é€šè¿‡è¿™ä¸ªæ•°æ®åˆ¤æ–­å®¢æˆ·ç«¯çš„ç™»å½•çŠ¶æ€ã€‚è¿™å°±å¥½æ¯”æˆ‘ä»¬å»ç‚¹èœï¼Œç‚¹å¥½äº†åå•†å®¶ç»™æˆ‘ä»¬ä¸€ä¸ªå·ç ç‰Œï¼Œç­‰èœå¥½äº†ï¼Œå°±é€å¾€ç›¸åº”å·ç ç‰Œçš„ä½ç½®ã€‚</p>
<h4 id="å®‰å…¨æ€§-1"><a href="#å®‰å…¨æ€§-1" class="headerlink" title="å®‰å…¨æ€§"></a>å®‰å…¨æ€§</h4><p>å› ä¸º session æ˜¯æ”¾åœ¨æœåŠ¡å™¨ä¸Šçš„ï¼Œæ‰€ä»¥ä¸€èˆ¬çš„å®‰å…¨æ€§å°±è€ƒè™‘ sessionid çš„ä¼ªé€ ä¸æˆªè·ã€‚å¦‚æœ sessionid æ˜¯æ”¾åœ¨ cookie ä¸­çš„ï¼Œé‚£ä¹ˆ cookie çš„æ—¶æ•ˆå°±å†³å®šäº† sessionid å³ç™»å½•çŠ¶æ€çš„æ—¶æ•ˆã€‚<br>éœ€è¦æ³¨æ„çš„å°±æ˜¯ä¼šè¯å›ºå®šï¼ˆsession fixation)ï¼šæ„æ€æ˜¯æ”»å‡»è€…å…ˆè‡ªå·±è·å–ä¸€ä¸ª sessionid,ç„¶åå‡å†’ä¸€ä¸ªç½‘ç«™å¹¶å°†è¿æ¥å‘ç»™è¢«æ”»å‡»çš„äººï¼Œå½“å—å®³è€…ç™»å½•åï¼Œæ”»å‡»è€…å°±å¯ä»¥åŠ«æŒå—å®³äººçš„ä¼šè¯ã€‚å› ä¸ºåœ¨æ”»å‡»è€…ç™»å½•è·å– sessionid åï¼Œç½‘ç»œæœåŠ¡å™¨çœ‹åˆ°ä¼šè¯å·²ç»å»ºç«‹ï¼Œæ— éœ€åˆ›å»ºæ–°çš„ä¼šè¯ã€‚æ‰€ä»¥æ”»å‡»è€…å°±æˆåŠŸåœ°å†’å……äº†å—å®³è€…ï¼Œä»è€Œè·å–äº†å—å®³è€…çš„ä¿¡æ¯ã€‚</p>
<h3 id="Tokenï¼ˆJWTï¼‰"><a href="#Tokenï¼ˆJWTï¼‰" class="headerlink" title="Tokenï¼ˆJWTï¼‰"></a>Tokenï¼ˆJWTï¼‰</h3><h4 id="æ¦‚å¿µï¼š"><a href="#æ¦‚å¿µï¼š" class="headerlink" title="æ¦‚å¿µï¼š"></a>æ¦‚å¿µï¼š</h4><p>JSON Web Token (JWT) æ˜¯ä¸€ç§å¼€æ”¾æ ‡å‡† (RFC 7519)ï¼Œå®ƒå®šä¹‰äº†ä¸€ç§ç´§å‡‘ä¸”è‡ªåŒ…å«çš„æ–¹å¼ï¼Œç”¨äºåœ¨å„æ–¹ä¹‹é—´ä½œä¸º JSON å¯¹è±¡å®‰å…¨åœ°ä¼ è¾“ä¿¡æ¯ã€‚ç”±äºæ­¤ä¿¡æ¯ç»è¿‡æ•°å­—ç­¾åï¼Œå› æ­¤å¯ä»¥éªŒè¯å’Œä¿¡ä»»ã€‚ JWT å¯ä»¥ä½¿ç”¨ç§˜å¯†ï¼ˆä½¿ç”¨ HMAC ç®—æ³•ï¼‰æˆ–ä½¿ç”¨ RSA æˆ– ECDSA çš„å…¬é’¥/ç§é’¥å¯¹è¿›è¡Œç­¾åã€‚å°½ç®¡ JWTs å¯ä»¥è¢«åŠ å¯†ï¼Œä»¥ä¾¿åœ¨å„æ–¹ä¹‹é—´æä¾›ä¿å¯†æ€§ï¼Œä½†æˆ‘ä»¬å°†ä¸“æ³¨äºç­¾åçš„ä»¤ç‰Œã€‚ç­¾åçš„ä»¤ç‰Œå¯ä»¥éªŒè¯å…¶ä¸­åŒ…å«çš„ç´¢èµ”çš„å®Œæ•´æ€§ï¼Œè€ŒåŠ å¯†çš„ä»¤ç‰Œåˆ™å¯¹å…¶ä»–å„æ–¹éšè—è¿™äº›ç´¢èµ”ã€‚å½“ä»¤ç‰Œä½¿ç”¨å…¬é’¥/ç§é’¥å¯¹ç­¾åæ—¶ï¼Œç­¾åä¹Ÿè¯æ˜äº†åªæœ‰æŒæœ‰ç§é’¥çš„ä¸€æ–¹æ‰æ˜¯ç­¾åè€…ã€‚ - - - - <a href="https://jwt.io/introduction">https://jwt.io/introduction</a></p>
<h4 id="ç»„æˆï¼š"><a href="#ç»„æˆï¼š" class="headerlink" title="ç»„æˆï¼š"></a>ç»„æˆï¼š</h4><blockquote>
<p>å½¢å¦‚ï¼šxxxxx.yyyyy.zzzzz</p>
</blockquote>
<ol>
<li>headerï¼šæ ‡å¤´é€šå¸¸ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä»¤ç‰Œçš„ç±»å‹ï¼Œå³ JWTï¼Œä»¥åŠæ­£åœ¨ä½¿ç”¨çš„ç­¾åç®—æ³•ï¼Œä¾‹å¦‚ HMAC SHA256 æˆ– RSAã€‚<strong>ç„¶åï¼Œè¿™ä¸ª JSON è¢« Base64Url ç¼–ç ä»¥å½¢æˆ JWT çš„ç¬¬ä¸€éƒ¨åˆ†ã€‚</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;alg&quot;</span>: <span class="string">&quot;HS256&quot;</span>,</span><br><span class="line">  <span class="string">&quot;typ&quot;</span>: <span class="string">&quot;JWT&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>payloadï¼šåŒ…å«ä¸€äº›å£°æ˜ï¼Œ å£°æ˜æ˜¯å…³äºå®ä½“ï¼ˆé€šå¸¸æ˜¯ç”¨æˆ·ï¼‰å’Œé™„åŠ æ•°æ®çš„å£°æ˜ã€‚å…±æœ‰ä¸‰ç§ç±»å‹çš„ claimsï¼šæ³¨å†Œè´Ÿè½½ã€å…¬å…±è´Ÿè½½å’Œç§äººè´Ÿè½½ã€‚</li>
</ol>
<ul>
<li>Registered claimsï¼ˆæ³¨å†Œï¼‰: é€šå¸¸æœ‰å››ä¸ªéƒ¨åˆ†ï¼Œiss(issuer)ï¼Œexp (expiration time), sub (subject), aud (audience)ã€‚è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ï¼Œæ¯”å¦‚ï¼šnbf (Not Before)ã€iat (Issued At)ã€jti (JWT ID)ã€‚<br><strong>issï¼ˆissuerï¼‰</strong>ï¼šå£°æ˜æ ‡è¯†å‘è¡Œè¯¥è¯ä¹¦çš„å§”æ‰˜äººã€‚<br>**exp (expiration time)**ï¼šå£°æ˜æ ‡è¯†äº†è¿‡æœŸæ—¶é—´æˆ–ä¹‹åä¸å¾—æ¥å— JWT è¿›è¡Œå¤„ç†<br>**sub (subject)**ï¼šJWT çš„ä¸»é¢˜ã€‚ JWT ä¸­çš„å£°æ˜é€šå¸¸æ˜¯å£°æ˜ï¼Œå…³äºä¸»é¢˜ã€‚ä¸»é¢˜å€¼å¿…é¡»è¦ä¹ˆè¢«é™å®šä¸ºåœ¨å‘è¡Œäººçš„ä¸Šä¸‹æ–‡ä¸­æ˜¯æœ¬åœ°å”¯ä¸€çš„ï¼Œæˆ–è€…æ˜¯å…¨çƒå”¯ä¸€çš„ã€‚<br>**aud (audience)**ï¼šå£°æ˜æ ‡è¯†äº† JWT çš„æ¥æ”¶è€…ã€‚</li>
<li>Public claimsï¼ˆå…¬å…±ï¼‰ï¼šè¿™äº›å¯ä»¥ç”±ä½¿ç”¨ JWT çš„äººéšæ„å®šä¹‰ã€‚ä½†æ˜¯ä¸ºäº†é¿å…å†²çªï¼Œå®ƒä»¬åº”è¯¥åœ¨ <a href="https://www.iana.org/assignments/jwt/jwt.xhtml">IANA JSON Web Token Registry</a> ä¸­å®šä¹‰ï¼Œæˆ–è€…å®šä¹‰ä¸ºåŒ…å«æŠ—å†²çªå‘½åç©ºé—´çš„ URIã€‚</li>
<li>Private claimsï¼ˆç§æœ‰ï¼‰ï¼šè¿™äº›æ˜¯ä¸ºäº†åœ¨åŒæ„ä½¿ç”¨å®ƒä»¬çš„å„æ–¹ä¹‹é—´å…±äº«ä¿¡æ¯è€Œåˆ›å»ºçš„è‡ªå®šä¹‰å£°æ˜ï¼Œè¿™äº›å£°æ˜æ—¢ä¸æ˜¯æ³¨å†Œå£°æ˜ä¹Ÿä¸æ˜¯å…¬å¼€å£°æ˜ã€‚æ­¤å£°æ˜çš„å¤„ç†é€šå¸¸æ˜¯<strong>ç‰¹å®šäºåº”ç”¨ç¨‹åº</strong>çš„ã€‚</li>
</ul>
<p><strong>ç„¶åï¼Œè¿™ä¸ª JSON è¢« Base64Url ç¼–ç ä»¥å½¢æˆ JWT çš„ç¬¬äºŒéƒ¨åˆ†ã€‚</strong><br><strong>è¿™é‡Œï¼Œheader ä¸ payload éƒ½æ˜¯å¯ä»¥ç›´æ¥é€šè¿‡ base64url è§£ç è·å¾—å…¶ json æ•°æ®çš„ã€‚</strong> 3. signatureï¼šç­¾åï¼Œè¿™æ˜¯ jwt æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå°±æ˜¯åŒ…å« base64 ç¼–ç çš„ header,payload,ä»¥åŠ secretï¼Œæœ€åå†å°†æ•´ä¸ªä½¿ç”¨åŠ å¯†ç®—æ³•è¿›è¡ŒåŠ å¯†ã€‚å…¶ä¸­çš„ secret å°±æ˜¯æœåŠ¡ç«¯å‘æ”¾çš„ç§é’¥ã€‚</p>
<blockquote>
<p>å½¢å¦‚ï¼š<br>HMACSHA256(<br>base64UrlEncode(header) + â€œ.â€ +<br>base64UrlEncode(payload),<br>secret<br>)</p>
</blockquote>
<h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><p>æ¯å½“ç”¨æˆ·æƒ³è¦è®¿é—®å—ä¿æŠ¤çš„è·¯ç”±æˆ–èµ„æºæ—¶ï¼Œç”¨æˆ·ä»£ç†åº”å‘é€ JWTï¼Œé€šå¸¸åœ¨ä½¿ç”¨ Bearer æ¨¡å¼çš„ Authorization æ ‡å¤´ä¸­ã€‚æ ‡é¢˜çš„å†…å®¹åº”å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">Authorization: Bearer &lt;token&gt;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä»¤ç‰Œåœ¨ Authorization æ ‡å¤´ä¸­å‘é€ï¼Œåˆ™è·¨æºèµ„æºå…±äº« (CORS) ä¸ä¼šæˆä¸ºé—®é¢˜ï¼Œå› ä¸ºå®ƒä¸ä½¿ç”¨ cookieï¼ˆcookie æ˜¯ä¸èƒ½è·¨åŸŸçš„ï¼‰ã€‚è¿™ä¸€ç‚¹å°±éå¸¸é€‚åˆå•ç‚¹ç™»å½•ã€‚</p>
<h4 id="å®‰å…¨æ€§-2"><a href="#å®‰å…¨æ€§-2" class="headerlink" title="å®‰å…¨æ€§"></a>å®‰å…¨æ€§</h4><p>å› ä¸ºåœ¨ jwt ç­¾å‘çš„æ—¶å€™ï¼Œå¯†é’¥æ˜¯æœåŠ¡ç«¯ç”Ÿæˆçš„ï¼Œæ‰€ä»¥æ¥è¯´æ˜¯æ¯”è¾ƒå®‰å…¨çš„ï¼Œå½“ payload çš„æ•°æ®ä¿®æ”¹åï¼Œå‘é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ä¼šé‡‡ç”¨ç›¸åŒçš„åŠ å¯†ç®—æ³•ç”Ÿæˆä¸€ä¸ª token å‰¯æœ¬ä¸ä¹‹å‰ç­¾å‘çš„è¿›è¡Œå¯¹æ¯”ï¼Œæ˜¾ç„¶ï¼Œä¿®æ”¹åçš„æ•°æ®å†æ¬¡åŠ å¯†åä¸ä¹‹å‰çš„ token å¯¹æ¯”è‚¯å®šä¸åŒã€‚<br>åœ¨ payload ä¸­ï¼Œå› ä¸ºæ˜¯ base64url ç¼–ç çš„ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“è§£ç è·å–ä¿¡æ¯ï¼Œå› æ­¤ä¸å®œåœ¨é‡Œé¢æ”¾ä¸€äº›æ¯”è¾ƒé‡è¦çš„ä¿¡æ¯ã€‚</p>
]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title>èŠèŠJavaScriptäº‹ä»¶å¾ªç¯</title>
    <url>/2022/01/12/%E8%81%8A%E8%81%8AJavaScript%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/</url>
    <content><![CDATA[<p><strong>äº‹æƒ…è¿˜å¾—ä»è¿™ä¹ˆä¸€é“é¢˜å¼€å§‹ï¼š</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;p&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;setTime&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;end&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>å„ä½æƒ³æƒ³ä¸‹é¢çš„è¾“å‡ºé¡ºåºæ˜¯ä»€ä¹ˆå§ï¼Ÿ<br>æˆ‘å…ˆè¯´ä¸€ä¸‹æˆ‘çš„ç­”æ¡ˆå§ï¼š</p>
<blockquote>
<p>end<br>p<br>setTime</p>
</blockquote>
<p>ä¸Šé¢çš„è¾“å‡ºæ˜¯é”™è¯¯çš„ ğŸ˜¥ï¼Œæˆ‘æ˜¯æ€ä¹ˆä¹Ÿä¸å¼€å¿ƒå•Šï¼Œäºæ˜¯æˆ‘å°±å¼€å§‹ç¿»éå„ç§èµ„æ–™ï¼Œå…¶ä¸­åŒ…æ‹¬ä»»åŠ¡ã€å¾®ä»»åŠ¡ã€JavaScript äº‹ä»¶å¾ªç¯ã€Promise ç­‰ç­‰èµ„æ–™ã€‚ä¸‹é¢å°±è®©æˆ‘æ¥ç»†è¯´å§ã€‚</p>
<span id="more"></span>

<p><strong>é¦–å…ˆä»‹ç»å‡ ä¸ªé‡è¦çš„æ¦‚å¿µã€‚</strong></p>
<h2 id="ç›¸å…³æ¦‚å¿µ"><a href="#ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ç›¸å…³æ¦‚å¿µ"></a>ç›¸å…³æ¦‚å¿µ</h2><h3 id="ä»»åŠ¡ï¼ˆå®ä»»åŠ¡ï¼‰"><a href="#ä»»åŠ¡ï¼ˆå®ä»»åŠ¡ï¼‰" class="headerlink" title="ä»»åŠ¡ï¼ˆå®ä»»åŠ¡ï¼‰"></a>ä»»åŠ¡ï¼ˆå®ä»»åŠ¡ï¼‰</h3><p>ä»»åŠ¡æœ‰ä»¥ä¸‹ä¸‰ç±»ï¼š</p>
<ul>
<li>ä¸€æ®µæ–°ç¨‹åºæˆ–å­ç¨‹åºè¢«ç›´æ¥æ‰§è¡Œæ—¶ï¼ˆæ¯”å¦‚ä»ä¸€ä¸ªæ§åˆ¶å°ï¼Œæˆ–åœ¨ä¸€ä¸ª &lt;script&gt; å…ƒç´ ä¸­è¿è¡Œä»£ç ï¼‰ã€‚</li>
<li>è§¦å‘äº†ä¸€ä¸ªäº‹ä»¶ï¼Œå°†å…¶<strong>å›è°ƒå‡½æ•°</strong>æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—æ—¶ã€‚</li>
<li>æ‰§è¡Œåˆ°ä¸€ä¸ªç”± setTimeout() æˆ– setInterval() åˆ›å»ºçš„ timeout æˆ– intervalï¼Œä»¥è‡´ç›¸åº”çš„<strong>å›è°ƒå‡½æ•°</strong>è¢«æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—æ—¶ã€‚</li>
<li>setImmediate()å›è°ƒï¼ˆnodejsï¼‰</li>
<li>I/O</li>
<li>UI</li>
<li>postMessage</li>
<li>requestAnimationFrame</li>
</ul>
<h3 id="å¾®ä»»åŠ¡"><a href="#å¾®ä»»åŠ¡" class="headerlink" title="å¾®ä»»åŠ¡"></a>å¾®ä»»åŠ¡</h3><ul>
<li>promise.then(callback)ä¸­çš„<strong>callback</strong>ã€‚</li>
<li>MutationObserver</li>
<li>process.nextTick(Node.js)</li>
</ul>
<h3 id="æ‰§è¡Œæ ˆ"><a href="#æ‰§è¡Œæ ˆ" class="headerlink" title="æ‰§è¡Œæ ˆ"></a>æ‰§è¡Œæ ˆ</h3><p>å‡½æ•°çš„äº’ç›¸è°ƒç”¨ä¼šè®©å‡½æ•°æ ‘å½¢æˆä¸€ä¸ªè°ƒç”¨æ ˆï¼Œè€Œå‡½æ•°çš„æ‰§è¡Œä¼šæŒ‰ç…§è¿™ä¸ªæ ˆæ¥æ‰§è¡Œï¼Œå³åè¿›å…ˆæ‰§è¡Œã€‚æ‰§è¡Œæ ˆä¼šå ç”¨ JavaScript çš„ run timeã€‚</p>
<h3 id="æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡"></a>æ‰§è¡Œä¸Šä¸‹æ–‡</h3><p>JavaScript åœ¨è¿è¡Œæ—¶ï¼Œæ˜¯è¿è¡Œåœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ï¼Œæ¯ä¸€ä¸ªä¸Šä¸‹æ–‡æ‹¥æœ‰è‡ªå·±çš„å˜é‡ã€å¯¹è±¡ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡æœ‰å¦‚ä¸‹å‡ ç±»ï¼š</p>
<ul>
<li>å…¨å±€ä¸Šä¸‹æ–‡ï¼šåœ¨ JavaScript å¼€å§‹æ‰§è¡Œæ—¶ä¾¿åˆ›å»ºï¼Œæ˜¯æœ€åŸºç¡€çš„ä¸Šä¸‹æ–‡ã€‚</li>
<li>å‡½æ•°ä¸Šä¸‹æ–‡ï¼ˆå±€éƒ¨ä¸Šä¸‹æ–‡ï¼‰ï¼šåœ¨å‡½æ•°è°ƒç”¨æ—¶ä¼šåˆ›å»ºï¼Œä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œï¼Œä¼´éšä¸€ä¸ªå‡½æ•°ä¸Šä¸‹æ–‡çš„äº§ç”Ÿã€‚</li>
<li>eval ä¸Šä¸‹æ–‡ï¼šä½¿ç”¨ eval å‡½æ•°æ‰€åˆ›å»ºçš„ä¸Šä¸‹æ–‡ã€‚</li>
</ul>
<h3 id="JavaScript-RunTime"><a href="#JavaScript-RunTime" class="headerlink" title="JavaScript RunTime"></a>JavaScript RunTime</h3><p>æ‰§è¡Œ js ä»£ç æ—¶ï¼Œè¿è¡Œæ—¶å¼•æ“æ‹¥æœ‰ä¸€ç³»åˆ—çš„ä»£ç†ï¼Œæ¯ä¸€ä¸ªä»£ç†ç”±ä¸€ç³»åˆ—çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€æ‰§è¡Œæ ˆã€ä¸»çº¿ç¨‹ã€é™„åŠ çº¿ç¨‹ï¼ˆworkerï¼‰ã€ä»»åŠ¡é˜Ÿåˆ—ã€å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚å¸¸è§çš„ JavaScript run time æœ‰ iframeã€web workerã€JavaScript ä¸»çº¿ç¨‹ã€‚</p>
<h3 id="äº‹ä»¶å¾ªç¯"><a href="#äº‹ä»¶å¾ªç¯" class="headerlink" title="äº‹ä»¶å¾ªç¯"></a>äº‹ä»¶å¾ªç¯</h3><p>äº‹ä»¶å¾ªç¯è´Ÿè´£æ”¶é›†ç”¨äº‹ä»¶ï¼ˆåŒ…æ‹¬ç”¨æˆ·äº‹ä»¶ä»¥åŠå…¶ä»–éç”¨æˆ·äº‹ä»¶ç­‰ï¼‰ã€å¯¹ä»»åŠ¡è¿›è¡Œæ’é˜Ÿä»¥ä¾¿åœ¨åˆé€‚çš„æ—¶å€™æ‰§è¡Œå›è°ƒã€‚ç„¶åå®ƒæ‰§è¡Œæ‰€æœ‰å¤„äºç­‰å¾…ä¸­çš„ JavaScript ä»»åŠ¡ï¼ˆå®ä»»åŠ¡ï¼‰ï¼Œç„¶åæ˜¯å¾®ä»»åŠ¡ï¼Œç„¶ååœ¨å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯ä¹‹å‰æ‰§è¡Œä¸€äº›å¿…è¦çš„æ¸²æŸ“å’Œç»˜åˆ¶æ“ä½œã€‚æ¯ä¸€ä¸ª JavaScript run time éƒ½ä¼šæ‹¥æœ‰è‡ªå·±çš„äº‹ä»¶å¾ªç¯ï¼ŒRunTime é‡Œé¢çš„ä»£ç†ç”±äº‹ä»¶å¾ªç¯æ‰€é©±åŠ¨ã€‚<br><strong>äº‹ä»¶å¾ªç¯åˆ†ä¸ºä¸‰ç±»ï¼š</strong></p>
<h4 id="window-event-loop"><a href="#window-event-loop" class="headerlink" title="window event loop"></a>window event loop</h4><p>é©±åŠ¨åŒæºçš„çª—å£ï¼ˆFrame,Tabï¼‰çš„äº‹ä»¶å¾ªç¯ï¼Œæ¥è‡ªç›¸åŒ origin çš„ window å¯èƒ½å…±äº«åŒä¸€ä¸ªäº‹ä»¶å¾ªç¯</p>
<h4 id="worker-event-loop"><a href="#worker-event-loop" class="headerlink" title="worker event loop"></a>worker event loop</h4><p>é©±åŠ¨ worker æ‰§è¡Œï¼ˆweb workersã€ shared workersã€service workersï¼‰worker æ‹¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªä¸ä¸»ç¨‹åºä¸åŒçš„ä»£ç†ã€‚</p>
<h4 id="worklet-event-loop"><a href="#worklet-event-loop" class="headerlink" title="worklet event loop"></a>worklet event loop</h4><p>é©±åŠ¨ worklet ä»£ç†çš„è¿è¡Œã€‚worklet çš„ç±»å‹åŒ…æ‹¬ï¼ˆWorkletã€AudioWorkletã€PaintWorkletï¼‰ã€‚</p>
<h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><p>ä¸€ç§å¼‚æ­¥ JavaScript çš„è§£å†³æ–¹æ¡ˆï¼Œæ˜¯å¯¹å¼‚æ­¥æ–¹æ³•çš„è¿”å›å€¼çš„ä¸€ç§æè¿°ï¼Œç”¨äºåœ¨å°†æ¥æŸä¸ªæ—¶åˆ»å°†å¼‚æ­¥ç»“æœè¿”å›ç»™ä½¿ç”¨è€…ï¼Œæœ€é‡è¦çš„ä¸€ç‚¹æ˜¯é€šè¿‡ then é“¾å¼è°ƒç”¨ã€‚</p>
<h2 id="äº‹ä»¶å¾ªç¯æœºåˆ¶"><a href="#äº‹ä»¶å¾ªç¯æœºåˆ¶" class="headerlink" title="äº‹ä»¶å¾ªç¯æœºåˆ¶"></a>äº‹ä»¶å¾ªç¯æœºåˆ¶</h2><p>åœ¨æ¯ä¸€è½®äº‹ä»¶å¾ªç¯å¼€å§‹æ—¶ï¼ŒRunTime ä¼šä»ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢å–å‡ºä»»åŠ¡æ¥æ‰§è¡Œï¼Œå¦‚æœä»»åŠ¡é‡Œé¢åˆæ·»åŠ äº†æ–°ä»»åŠ¡åˆ°é˜Ÿåˆ—é‡Œé¢ï¼Œæ–°ä»»åŠ¡ä¸ä¼šå†æœ¬è½®äº‹ä»¶å¾ªç¯é‡Œå»æ‰§è¡Œã€‚å½“ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œå¼¹å‡ºä»»åŠ¡é˜Ÿåˆ—æ—¶ï¼Œå¹¶ä¸”æ‰§è¡Œæ ˆä½ç©ºæ—¶ï¼Œè¿™æ—¶ä¼šå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¾®ä»»åŠ¡ä¸ä¼šåƒä»»åŠ¡é‚£æ ·æ¯æ¬¡åªæ‰§è¡Œä¸€ä¸ªï¼Œè€Œæ˜¯å°†å¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œçš„å¾®ä»»åŠ¡æ‰§è¡Œå®Œï¼Œå³ä½¿æ˜¯åœ¨æ‰§è¡Œå¾®ä»»åŠ¡æ—¶æœ‰æ–°çš„å¾®ä»»åŠ¡åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œåœ¨ä¸‹ä¸€ä¸ªä»»åŠ¡å¼€å§‹ä»¥åŠäº‹ä»¶å¾ªç¯è¿­ä»£ç»“æŸä¹‹å‰ä¾ç„¶ä¼šæ‰§è¡Œå¾®ä»»åŠ¡ã€‚<br>OKï¼Œè¯´åˆ°è¿™å„¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥åˆ†æä»¥ä¸‹åˆšæ‰çš„é¢˜äº†ã€‚</p>
<h2 id="é¢˜ç›®åˆ†æ"><a href="#é¢˜ç›®åˆ†æ" class="headerlink" title="é¢˜ç›®åˆ†æ"></a>é¢˜ç›®åˆ†æ</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;p&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;setTime&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;end&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>æœ€å¼€å§‹ï¼š</strong>å°†æ•´ä½“ä»£ç ï¼ˆä¸€æ®µæ–°ç¨‹åºï¼‰åŠ å…¥ä»»åŠ¡é˜Ÿåˆ—ã€‚æ­¤æ—¶çš„ JavaScript RunTime çš„æƒ…å†µå¦‚ä¸‹å›¾ï¼š<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202201122218.png" alt="1"></p>
<p>æ­¤æ—¶ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢ä»…æœ‰æ•´ä½“ç¨‹åºï¼Œè€Œå¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢ä»€ä¹ˆä¹Ÿæ²¡æœ‰ã€‚æ•´ä½“ç¨‹åºå°†è¿›å…¥æ‰§è¡Œæ ˆä¸­æ‰§è¡Œã€‚<br><strong>åˆ›å»º promise å¯¹è±¡ï¼š</strong>åœ¨åˆ›å»º promise å¯¹è±¡æ—¶ï¼Œä¼ å…¥äº†å¯é€‰å‚æ•°å³ï¼š</p>
<blockquote>
<p>(resolve,reject)=&gt;{<br>console.log(â€˜pâ€™);<br>}</p>
</blockquote>
<p>è€Œ Promise æ„é€ å™¨å°†ä¼šåœ¨è¿”å›æ–°å¯¹è±¡ä¹‹å‰æ‰§è¡Œä¼ å…¥çš„å‡½æ•°å‚æ•°ã€‚æ‰€ä»¥åœ¨æ‰§è¡Œæ ˆä¸­ä¼šæ‰§è¡Œ console.log(â€˜pâ€™)ï¼Œæ‰“å°å‡º â€˜pâ€™ã€‚<br><strong>æ‰§è¡Œå®šæ—¶å™¨ï¼š</strong>æ‰§è¡Œå®šæ—¶å™¨ï¼Œä¼šåœ¨ä¼ å…¥çš„å»¶è¿Ÿæ—¶é—´ä¹‹åå°†å›è°ƒå‡½æ•°åŠ å…¥é˜Ÿåˆ—ï¼ŒåŠ å…¥ä»€ä¹ˆé˜Ÿåˆ—å‘¢ï¼Œè¿™é‡ŒåŠ å…¥çš„æ˜¯ä»»åŠ¡é˜Ÿåˆ—ï¼Œå› ä¸º settimeoout çš„å›è°ƒå±äºå®ä»»åŠ¡ã€‚ä¹‹åï¼Œå½“å‰æ‰§è¡Œæ ˆä¸ä¸ºç©ºï¼Œä¼šç»§ç»­æ‰§è¡Œã€‚<br><strong>æ‰“å° end:<strong>åœ¨æ‰§è¡Œ console.log(â€˜endâ€™)åï¼Œç°åœ¨æ‰§è¡Œæ ˆä¸ºç©ºäº†ï¼Œæ•´ä½“ç¨‹åºå¼¹å‡ºä»»åŠ¡é˜Ÿåˆ—ã€‚æ­¤æ—¶ä»»åŠ¡é˜Ÿåˆ—æ˜¯</strong>ä¸ä¸ºç©ºçš„</strong>ï¼ˆåŒ…å«å®šæ—¶å™¨çš„å›è°ƒ()=&gt;{console.log(â€˜setTimeâ€™)}ï¼‰</p>
<p>æ­¤æ—¶çš„ JavaScript RunTime çš„æƒ…å†µå¦‚ä¸‹å›¾ï¼š<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202201122230.png" alt="2"><br>è¿™æ—¶çš„ä»»åŠ¡é˜Ÿåˆ—åŒ…æ‹¬å®šæ—¶å™¨çš„å›è°ƒï¼Œè€Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¾ç„¶ä¸ºç©ºï¼ˆè¿™é“é¢˜å°±æ²¡æ¶‰åŠåˆ°å¾®ä»»åŠ¡ã€‚ã€‚ã€‚ï¼‰ã€‚éšåå®šæ—¶å™¨å›è°ƒå°†è¿›å…¥æ‰§è¡Œæ ˆï¼Œæ‰“å°å‡º setTimeã€‚æ‰€ä»¥æœ€ç»ˆçš„æ‰“å°ç»“æœä¸ºï¼š</p>
<blockquote>
<p>p<br>end<br>setTime</p>
</blockquote>
<p><strong>è¿™é‡Œå°±æ³¨æ„ promise çš„æ„å»ºå°±è¡Œäº†ï¼Œæ˜¯ç«‹å³æ‰§è¡Œï¼Œæˆ‘é”™çš„æ˜¯åº”ä¸ºå®ƒä¼šè¿›å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚è€Œ Promise è¿›å…¥å¾®ä»»åŠ¡çš„æ˜¯ then çš„å›è°ƒå‡½æ•°ã€‚</strong></p>
<h2 id="æ‰©å±•é¢˜ç›®"><a href="#æ‰©å±•é¢˜ç›®" class="headerlink" title="æ‰©å±•é¢˜ç›®"></a>æ‰©å±•é¢˜ç›®</h2><p>ä¸Šé¢çš„é¢˜æ²¡æœ‰æ¶‰åŠå¾®ä»»åŠ¡ï¼Œé‚£æˆ‘ä»¬æ”¹æ”¹åŸé¢˜ç›®çœ‹çœ‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p_2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;p_2&quot;</span>);</span><br><span class="line">  <span class="comment">// å®šæ—¶å™¨1</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    res(<span class="string">&quot;å®šæ—¶å™¨1&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(v));</span><br><span class="line"><span class="comment">// å®šæ—¶å™¨2</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;å®šæ—¶å™¨2&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;end&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢æ–°å¢çš„æ˜¯åœ¨åˆ›å»º Promise å¯¹è±¡æ—¶å¢åŠ äº†ä¸€ä¸ªå®šæ—¶å™¨ï¼Œä»¥åŠå¢åŠ äº†å¯¹ then çš„å›è°ƒã€‚<br>ä¾æ—§ä»æ•´ä½“ç¨‹åºå¼€å§‹ï¼Œè¿›å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œå½“æ•´ä½“ç¨‹åºæ‰§è¡Œå®Œæ—¶ï¼Œè¿™æ—¶çš„ RunTime æƒ…å†µå¦‚ä¸‹ï¼š<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202201122252.png" alt="3"><br>æ­¤æ—¶è¾“å‡ºä¸ºï¼š</p>
<blockquote>
<p>p_2<br>end</p>
</blockquote>
<p>æŒ‰ç…§é˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºï¼Œå®šæ—¶å™¨ 1 å…ˆè¿›å…¥é˜Ÿåˆ—ï¼Œæ‰€ä»¥å…¶å…ˆäºå®šæ—¶å™¨ 2 æ‰§è¡Œã€‚æ­¤æ—¶å®šæ—¶å™¨ 1 çš„å›è°ƒè¿›å…¥æ‰§è¡Œæ ˆæ‰§è¡Œï¼Œæ‰§è¡Œ res(â€˜å®šæ—¶å™¨ 1â€™)æ”¹å˜ promise çš„çŠ¶æ€ä¸º resolve,å°† then çš„å›è°ƒåŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ­¤æ—¶ RunTime çš„æƒ…å†µå¦‚ä¸‹ï¼š<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202201122258.png" alt="4"></p>
<p>å®šæ—¶å™¨ 1 æ‰§è¡Œå®Œæ¯•å¼¹å‡ºä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œåï¼Œæ£€ç´¢å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œè¿™æ—¶å¾®ä»»åŠ¡é˜Ÿåˆ—å­˜åœ¨ä¸€ä¸ª then å›è°ƒï¼Œæ‰€ä»¥å°†å…¶åŠ å…¥æ‰§è¡Œæ ˆã€‚</p>
<p>ç°åœ¨çš„è¾“å‡ºæ˜¯ï¼š</p>
<blockquote>
<p>p_2<br>end<br>å®šæ—¶å™¨ 1</p>
</blockquote>
<p>æœ€ç»ˆï¼Œåªå‰©ä¸‹äº†ä»»åŠ¡é˜Ÿåˆ—çš„å®šæ—¶å™¨ 2 å›è°ƒï¼Œé‡å¤æ—¶é—´å¾ªç¯ï¼Œå°†å®šæ—¶å™¨ 2 çš„å›è°ƒåŠ å…¥æ‰§è¡Œæ ˆå¹¶æ‰§è¡Œã€‚æœ€ç»ˆçš„è¾“å‡ºç»“æœä¸ºï¼š</p>
<blockquote>
<p>p_2<br>end<br>å®šæ—¶å™¨ 1<br>å®šæ—¶å™¨ 2</p>
</blockquote>
<p>ä¸Šé¢è¿™é¢˜å°±è¯´æ˜äº†ä¸€ä¸ªä»»åŠ¡å¼¹å‡ºä»»åŠ¡é˜Ÿåˆ—åä¼šæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—çš„ä»»åŠ¡ï¼Œå¯æ˜¯åœ¨ä¸Šé¢çš„æ¦‚å¿µä¸€ç« ä¸­è¿˜æåˆ°äº†ä¸€ä¸ªä»»åŠ¡å‡ºé˜Ÿåˆ—åæ˜¯è¦æ‰§è¡Œæ‰€æœ‰çš„å¾®ä»»åŠ¡ï¼Œè€Œä¸Šé¢çš„é‚£ä¸€é¢˜åªæœ‰ä¸€ä¸ªå¾®ä»»åŠ¡çœ‹ä¸å‡ºä»€ä¹ˆè¹Šè··ï¼Œé‚£ä¹ˆæˆ‘ä»¬å†æ”¹ä¸€ä¸‹å§ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p_2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;p_2&quot;</span>);</span><br><span class="line">  <span class="comment">// å®šæ—¶å™¨1</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    res(<span class="string">&quot;å®šæ—¶å™¨1&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;å¾®ä»»åŠ¡å¼€å§‹&quot;</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">    <span class="built_in">window</span>.queueMicrotask(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// å‡½æ•°çš„å†…å®¹</span></span><br><span class="line">      <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// å®šæ—¶å™¨2</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;å®šæ—¶å™¨2&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;end&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>è¿™æ¬¡æˆ‘ä»¬æ›´æ”¹äº† then çš„å›è°ƒï¼Œä½¿ç”¨äº† window.queueMicrotask()æ¥æ·»åŠ å›è°ƒåˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚è¿™æ¬¡æ˜¯æ·»åŠ äº”ä¸ªè¾“å‡ºåˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢ã€‚é¡ºç€ä¸Šä¸€é¢˜çš„æ€è·¯ï¼Œæˆ‘ä»¬åªéœ€å°†ä¸Šä¸€é¢˜çš„è¾“å‡º<strong>â€˜å®šæ—¶å™¨ 1â€™</strong>æ›´æ”¹ä¸€ä¸‹å°±è¡Œäº†ã€‚æŒ‰ç…§ä¸€æ¬¡æ‰§è¡Œæ‰æ‰€æœ‰å¾®ä»»åŠ¡çš„ç»“è®ºï¼Œæˆ‘ä»¬å¯ä»¥ä½œå‡ºå¦‚ä¸‹æ›´æ”¹ã€‚</p>
<blockquote>
<p>p_2<br>end<br>å¾®ä»»åŠ¡å¼€å§‹<br>0<br>1<br>2<br>3<br>4<br>å®šæ—¶å™¨ 2</p>
</blockquote>
<p>åœ¨ chrome é‡Œé¢è¯•ä¸€ä¸‹å§ï¼šï¼‰<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202201122327.png" alt="5"></p>
<p>å¯ä»¥çœ‹è§ï¼Œç»“è®ºæ­£ç¡®ã€‚</p>
<p><strong>å‚è€ƒï¼š</strong><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_DOM_API/Microtask_guide">https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_DOM_API/Microtask_guide</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_DOM_API/Microtask_guide/In_depth">https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_DOM_API/Microtask_guide/In_depth</a></p>
]]></content>
      <categories>
        <category>javascript</category>
      </categories>
  </entry>
  <entry>
    <title>2022 å¹´ç»ˆæ€»ç»“</title>
    <url>/2022/12/31/2022-%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<blockquote>
<center>è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®</center>
</blockquote>
<p>2022 å¹´å°±è¦ç»“æŸäº†ï¼Œå›æƒ³è¿™ä¸€å¹´å¯è°“æ˜¯äº”å‘³æ‚é™ˆå•Šã€‚ä¹Ÿæ˜¯ç»å†è®¸å¤šç¬¬ä¸€æ¬¡çš„ä¸€å¹´å§ã€‚</p>
<span id="more"></span>

<h2 id="ç”Ÿæ´»"><a href="#ç”Ÿæ´»" class="headerlink" title="ç”Ÿæ´»"></a>ç”Ÿæ´»</h2><p>åœ¨è¿™å­¦æœŸå¼€å§‹ï¼Œä¹Ÿå°±æ˜¯å¤§ä¸‰ä¸‹ï¼Œç„¶åå¼€å§‹æ‰¾å®ä¹ äº†ã€‚åœ¨æ‰¾å®ä¹ çš„è¿‡ç¨‹ä¸­è¿˜ç®—åå·å§ï¼Œç»å†äº†äººç”Ÿçš„ç¬¬ä¸€æ¬¡é¢è¯•ã€‚å…¶å®æŠ•çš„å…¬å¸ä¸€ä¸ªæ‰‹èƒ½æ•°è¿‡æ¥ã€‚ç„¶åå°±åˆ†åˆ«é¢äº†å­—èŠ‚ã€ç½‘æ˜“ã€èš‚èšã€‚å…¶ä¸­å­—èŠ‚é¢äº†ä¸¤æ¬¡ï¼Œä¸€æ¬¡æ˜¯å›½é™…åŒ–ç”µå•†ï¼Œå¦ä¸€æ¬¡å°±æ˜¯æˆ‘ä¸‹åŠå¹´æ‰€å®ä¹ çš„éƒ¨é—¨æ‡‚è½¦å¸äº†ã€‚</p>
<p>æ›²æ›²æŠ˜æŠ˜ï¼Œè¿™ä¸€å¹´æœ€ç¾å¥½çš„ä¹Ÿå°±æ˜¯ä¸‹åŠå¹´å®ä¹ åŒ—æ¼‚çš„è¿™ä¸€æ®µæ—¶é—´äº†ï¼Œè·Ÿæˆ‘çš„å®éªŒå®¤åŒå­¦ã€å®¤å‹ã€ä¸€å¼€å§‹ä¸è®¤è¯†çš„åŒæ ¡åŒå­¦ï¼ˆå“ˆå“ˆå“ˆï¼Œè¿™ç§°å‘¼æ„Ÿè§‰æœ‰ç‚¹æ€ªæ€ªçš„ï¼‰ã€‚</p>
<h3 id="ç§Ÿæˆ¿ç¯‡"><a href="#ç§Ÿæˆ¿ç¯‡" class="headerlink" title="ç§Ÿæˆ¿ç¯‡"></a>ç§Ÿæˆ¿ç¯‡</h3><p>å»åŒ—äº¬æ€»å¾—ç§Ÿæˆ¿å§ã€‚æ˜¯çš„ï¼Œç„¶åæˆ‘ä»¬å°±è¢«ä¸­ä»‹â€¦(æ‡‚çš„éƒ½æ‡‚)ã€‚ç¬¬ä¸€æ¬¡ç§Ÿæˆ¿æ˜¯ä¸‰ä¸ªåˆç§Ÿçš„ï¼Œæˆ¿ç§Ÿ 8000 ä¸€æœˆï¼Œé¦–ä»˜ä¸€å…± 4 ä¸‡å¤šå§ï¼Œä¸‰ä¸ªæœˆã€‚å½“æ—¶è¿˜æ˜¯æŒºéœ‡æƒŠçš„ï¼Œç¬¬ä¸€æ¬¡æ‹¿å‡ºå»è¿™ä¹ˆå¤šé’± ğŸ˜‚ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼ŒåŒ—äº¬ç§Ÿæˆ¿æƒ³äº‹å°‘çš„è¯è¿˜æ˜¯èµ°ä¸€äº›å¹³å°ï¼Œæ¯”å¦‚è‡ªå¦‚ä»€ä¹ˆçš„ï¼Œè™½ç„¶è¯´æœ‰é‚£ä¹ˆäº¿ä¸¢ä¸¢è´µã€‚ä½†æ˜¯ä¼šæœ‰ä¸€äº›æœåŠ¡ä¹‹ç±»çš„ï¼Œæ¯”å¦‚æ‰“æ‰«æˆ¿é—´ã€‚å¥½åƒå°±æ‰“æ‰«æˆ¿é—´æœ‰ç”¨ ğŸ¤”ã€‚</p>
<h3 id="ä¸Šç­ç¯‡"><a href="#ä¸Šç­ç¯‡" class="headerlink" title="ä¸Šç­ç¯‡"></a>ä¸Šç­ç¯‡</h3><p><strong>å›¢é˜Ÿèšé¤</strong><br>æ‰‹åŠ¨è¡¥ä¸Š ä¿Šå“¥è·Ÿä¸œé˜³å“¥ ğŸ‘</p>
<p><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202212311521.JPG" alt="team"></p>
<ul>
<li><p>åœ°ç‚¹ï¼šåŒ—äº¬å¸‚æµ·æ·€åŒºä¸­åŸ/ä¸­å…´å¤§å¦</p>
</li>
<li><p>äº¤é€šå·¥å…·ï¼šå¼€æ°´å›¢çš„è‡ªè¡Œè½¦å•Šå“ˆå“ˆå“ˆå“ˆå“ˆ</p>
</li>
</ul>
<p>ä¸€ä¸ªèŒåœºå°ç™½ï¼Œåˆå…¥èŒåœºï¼Œæœ‰å¾ˆå¤šä¸œè¥¿éœ€è¦å­¦ä¹ ï¼Œä¸è®ºæ˜¯ä¸“ä¸šçš„è¿˜æ˜¯éä¸“ä¸šçš„ã€‚ä»ä¸€ä¸ªæœˆå¼€å§‹çš„é™Œç”Ÿåˆ°åæ¥çš„è½»è½¦ç†Ÿè·¯ã€‚æ”¶è·é¢‡ä¸ºä¸°åšï¼Œåœ¨è¿™é‡Œå¿…é¡»è¦æ„Ÿè°¢ä¸‹æˆ‘çš„ mentorï¼ŒçœŸæ˜¯éå¸¸çš„ niceã€‚</p>
<p>æ”¶è·æ»¡æ»¡çš„ gitlab</p>
<p><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202212311520.JPG" alt="gitlab commit"></p>
<p>å¾ˆé«˜å…´èƒ½åœ¨è¿™é‡Œå®ä¹ ï¼Œæ€»çš„æ¥è¯´ç´¯å¹¶å¿«ä¹ç€ï¼Œé—æ†¾å°±æ˜¯æœªèƒ½ç•™ä¸‹ç»§ç»­å‰è¡Œ ğŸ˜…ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202212311502.png" alt="waka time"></p>
<h3 id="å¨±ä¹ç¯‡"><a href="#å¨±ä¹ç¯‡" class="headerlink" title="å¨±ä¹ç¯‡"></a>å¨±ä¹ç¯‡</h3><p>è¿™æ³¢å•Šï¼Œè™½ç„¶åŒ—äº¬è·Ÿæˆ‘æƒ³è±¡çš„æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œä½†è¿˜æ˜¯å¯ä»¥çš„</p>
<p><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202212311522.PNG" alt="è·Ÿæœ‹å‹ä»¬åƒçš„ç¾é£Ÿ"></p>
<p>ç¬¬ä¸€æ¬¡çœ‹è§äº†â€œå¤§è£¤è¡©â€<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202212311739.JPG" alt="å¤§è£¤è¡©"></p>
<p>å’Œæœ‹å‹ä»¬é€›äº†ä¸€å°ä¼šé¸Ÿå·¢<br><img src="https://cdn.jsdelivr.net/gh/PancakeDogLLL/imageBed/img/202212311740.JPG" alt="é¸Ÿå·¢"></p>
<p><strong>å›æƒ³èµ·æ¥çœŸæ˜¯å›å¿†æ»¡æ»¡</strong></p>
<h2 id="è§„åˆ’"><a href="#è§„åˆ’" class="headerlink" title="è§„åˆ’"></a>è§„åˆ’</h2><ul>
<li>åšæŒå†™ä½œï¼Œè¾“å‡ºè´¨é‡æ–‡ç« </li>
<li>å­¦ä¹ å›¾å½¢å­¦ï¼Œå‘å±•å¤šé¢†åŸŸ</li>
<li>æœ‰æœºä¼šå‘å‡ ä¸ª b ç«™è§†é¢‘ ğŸ¤”</li>
<li>positive</li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>2022 å……æ»¡å›å¿†çš„ä¸€å¹´ï¼Œæ„Ÿè°¢æˆ‘èº«è¾¹çš„æ¯ä¸€ä¸ªäººï¼Œä»–ä»¬æ•™ä¼šäº†æˆ‘è®¸å¤šï¼Œè®©æˆ‘æ˜ç™½äº†è®¸å¤šã€‚ Respectã€‚</p>
]]></content>
      <categories>
        <category>å¹´ç»ˆæ€»ç»“</category>
      </categories>
  </entry>
</search>
